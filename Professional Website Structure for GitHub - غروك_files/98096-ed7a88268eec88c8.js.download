!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9b6a016e-6c1c-46f5-91cc-215f7580f1dc",e._sentryDebugIdIdentifier="sentry-dbid-9b6a016e-6c1c-46f5-91cc-215f7580f1dc")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98096],{1451:(e,t,a)=>{a.d(t,{y:()=>o});var s=a(79342),n=a(88382),l=a(51182),r=a(91915),i=a(17438);function o(e){let{readOnly:t=!1,editable:a=!t,onContentUpdate:o,className:c}=e,{calcEngine:d}=(0,i.Tm)((0,l.k)(e=>({calcEngine:e.calcEngine}))),u=n.useCallback(async e=>{a&&o&&d&&o(await d.exportToBuffer())},[a,o,d]);return(0,s.jsx)(r.X,{editable:a,readOnly:t,onCellsChange:u,className:c})}},2280:(e,t,a)=>{a.d(t,{l1:()=>c,pA:()=>d,tg:()=>o,zU:()=>u});var s=a(17703),n=a(38541),l=a.n(n),r=a(88382);function i(e){let{top:t,bottom:a}=e,s=document.createElement("div");return s.style.height="1px",s.style.width="100%",s.style.top=null!=t?t:"",s.style.bottom=null!=a?a:"",s.style.flexShrink="0",s.className="scroll-gradient-sentinel",s}function o(e){let{ref:t}=e,[a,n]=(0,r.useState)(!1),[o,u]=(0,r.useState)(!1),h=(0,r.useRef)(null),m=(0,r.useRef)(null),[x,p]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(!t.current)return;let e=i({top:"0"}),a=i({bottom:"0"});return t.current.prepend(e),t.current.append(a),p(!0),h.current=e,m.current=a,()=>{try{e.remove(),a.remove()}catch(e){(0,s.vV)("use-scroll-gradient:sentinel-clean-up",e)}p(!1)}},[t]),(0,r.useEffect)(()=>{if(!t.current)return;let e=new IntersectionObserver(e=>{let t=l().last(e);t&&n(t.isIntersecting)},{root:t.current,threshold:1}),a=new IntersectionObserver(e=>{let t=l().first(e);t&&u(t.isIntersecting)},{root:t.current,threshold:1});return h.current&&e.observe(h.current),m.current&&a.observe(m.current),()=>{e.disconnect(),a.disconnect()}},[t]),(0,r.useMemo)(()=>x?a||o?a?o?{}:{maskImage:d,WebkitMaskImage:d}:{maskImage:c,WebkitMaskImage:c}:{maskImage:"".concat(c,", ").concat(d),WebkitMaskImage:"".concat(c,", ").concat(d),maskComposite:"intersect"}:{},[a,o,x])}let c="linear-gradient(to top, black 85%, transparent 100%)",d="linear-gradient(to bottom, black 85%, transparent 100%)",u="linear-gradient(to right, black 85%, transparent 100%)"},17438:(e,t,a)=>{a.d(t,{bs:()=>v,Tm:()=>k});var s=a(79342),n=a(82591),l=a(88382),r=a(65146),i=a(21874),o=a(4890),c=a(35501),d=a(64332);let u=new Worker(a.tu(new URL(a.p+a.u(73608),a.b)),{type:void 0}),h=d.LV(u);var m=a(60234);function x(){let e=k(e=>e.error),{showBoundary:t,resetBoundary:a}=(0,m.Md)();return(0,l.useEffect)(()=>{e?t(e):a()},[e,t,a]),null}let p=new Worker(a.tu(new URL(a.p+a.u(75318),a.b)),{type:void 0}),f=d.LV(p),g=l.createContext(void 0),v=e=>{let{initialState:t,children:a,content:i,readOnly:o=!1}=e,{t:d}=(0,r.Bd)("files"),u=l.useRef(void 0);return u.current||(u.current=b(t)),!function(e,t,a){let s=l.useRef(!1);l.useEffect(function(){if(s.current||void 0===t)return;s.current=!0;let n=e.current;if(!n)return;let l=n.getState().name||"Workbook";(a?f.fromXLSX(t):null===t?h.initModel(l):h.fromXLSX(t)).then(async function(e){let t=await e.getSheetProperties();n.getState().setSpreadsheetState(a=>({...a,name:l,calcEngine:e,sheets:t}))}).catch(e=>{e instanceof Error&&n.getState().setError(e)})},[t,a])}(u,i,o),(0,s.jsx)(g.Provider,{value:u.current,children:(0,s.jsxs)(n.t,{fallbackRender:()=>(0,s.jsx)(c.f,{message:d("spreadsheet-open-error.message","The file can't be opened right now. The file format is invalid.")}),children:[a,(0,s.jsx)(x,{})]})})},b=e=>(0,i.y)()(t=>{var a;return{name:(null==e?void 0:e.name)||"Workbook",setName:e=>t({name:e}),highlightedRegions:(null==e?void 0:e.highlightedRegions)||[],setHighlightedRegions:e=>t({highlightedRegions:e}),activeSheet:null!=(a=null==e?void 0:e.activeSheet)?a:0,setActiveSheet:e=>t({activeSheet:e}),selection:(null==e?void 0:e.selection)||[],setSelection:e=>t({selection:e}),editingCell:null==e?void 0:e.editingCell,setEditingCell:e=>t({editingCell:e}),dataGridRefs:(null==e?void 0:e.dataGridRefs)||{},setDataGridRefs:e=>t({dataGridRefs:e}),sheets:(null==e?void 0:e.sheets)||[],setSheets:e=>t({sheets:e}),calcEngine:null==e?void 0:e.calcEngine,setCalcEngine:e=>t({calcEngine:e}),error:null==e?void 0:e.error,setError:e=>t({error:e}),setSpreadsheetState:e=>t(t=>e(t))}}),j=e=>e;function k(e){let t=l.useContext(g);if(!t)throw Error("useSpreadsheetStore must be used within SpreadsheetStoreProvider");return(0,o.P)(t,null!=e?e:j)}},50460:(e,t,a)=>{a.d(t,{q:()=>ei,C:()=>eh});var s=a(79342),n=a(97325),l=a(63209),r=a(65258);class i{constructor(e,t){this.set=e,this.get=t,this.setCurrentAction=(0,r.kp)(this.set,"currentAction")}}let o=(0,r.y$)(i,"useAppSidebarStore");var c=a(92207),d=a(77334),u=a(72712);let h=e=>(0,s.jsx)(u.I,{viewBox:"0 0 14 14",...e,children:(0,s.jsx)("path",{d:"M7 0.501953C7.2252 0.501953 7.44769 0.513774 7.66699 0.536133V1.87598C7.44859 1.84783 7.22607 1.83203 7 1.83203C4.2347 1.83203 1.97711 4.00345 1.83887 6.73438L1.83203 7C1.83203 8.45819 2.43546 9.77408 3.4082 10.7148L3.78613 11.0791L3.51855 11.5303L3.1416 12.168H6.98438L7.27734 12.1611C9.91708 12.0218 12.0323 9.90065 12.1621 7.25781L12.168 7C12.168 6.77393 12.1522 6.55141 12.124 6.33301H13.4648C13.4872 6.55228 13.498 6.77483 13.498 7L13.4902 7.32422C13.3268 10.652 10.66 13.3218 7.33301 13.4902L7.32422 13.4912H7.31543L7.01562 13.498H0.810547L1.4043 12.4951L2.12012 11.2852C1.18522 10.2216 0.5891 8.85081 0.510742 7.3418L0.501953 7C0.501953 3.41107 3.41107 0.501953 7 0.501953ZM11.999 0.976562L11.998 2L13.0234 2.00098L13.6885 2.00195V3.33203H13.0234L11.998 3.33008V5.02246H10.668V3.33008L9.64355 3.33203H8.97754V2.00195L9.64258 2.00098L10.668 2V0.311523H11.998L11.999 0.976562Z",fill:"currentColor"})}),m=e=>(0,s.jsx)(u.I,{viewBox:"-0.5 -0.5 15 15",...e,children:(0,s.jsx)("path",{d:"M7.23047 1.26183C7.86569 0.082389 9.45799 -0.151271 10.4053 0.796012L13.2041 3.59484C14.1514 4.54211 13.9177 6.1344 12.7383 6.76964L11.1338 7.6339C10.5893 7.9271 10.2112 8.45562 10.1094 9.06554L9.62207 11.9874L8.33301 13.2765L5 9.9425L2.1377 12.8019L1 13.0001L1.19824 11.8614L4.05664 9.00011L0.723633 5.66711L2.0127 4.37804L4.93359 3.89074C5.54368 3.78906 6.07294 3.41087 6.36621 2.86632L7.23047 1.26183ZM9.46191 1.73839C9.14619 1.42309 8.61607 1.50091 8.4043 1.89367L7.54004 3.49816C7.05129 4.40584 6.17019 5.03667 5.15332 5.20617L2.65332 5.62218L2.60938 5.66711L8.33301 11.3907L8.37793 11.3468L8.79395 8.84679C8.96343 7.8299 9.59426 6.94883 10.502 6.46007L12.1064 5.59582C12.4993 5.38395 12.5774 4.85289 12.2617 4.53722L9.46191 1.73839Z",fill:"currentColor"})});var x=a(12001);let p=e=>(0,s.jsxs)(u.I,{viewBox:"1 2 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[(0,s.jsx)("path",{d:"M15 18H3"}),(0,s.jsx)("path",{d:"M17 6H3"}),(0,s.jsx)("path",{d:"M21 12H3"})]});var f=a(42557),g=a(35692),v=a(56691),b=a(73772),j=a(1826),k=a(97225),C=a(3209),y=a(26676),w=a(75500),N=a(41320),S=a(91102),I=a(12065),E=a(35181),L=a(24734),z=a(2280),M=a(32006),A=a(80354),_=a(17703),R=a(84499),D=a(61312),T=a(80882),P=a(49972),B=a(73304),H=a(97991),U=a(20337),W=a(31643),X=a(28205),O=a(80864),G=a(51234),F=a(21185),K=a(84810),Z=a(38541),V=a.n(Z),$=a(67381),Y=a(19717),q=a(10684),Q=a(82263),J=a(66347),ee=a(59346),et=a(84969),ea=a(33846),es=a(74995),en=a(88382),el=a(65146),er=a(51182);function ei(){let{t:e}=(0,el.Bd)("base"),{open:t,setOpen:a,toggleSidebar:r}=(0,k.cL)(),i=(0,w.h)(),{client:o}=(0,U.useStatsigClient)(),{commandPrefix:u}=(0,S.c)(),m=(0,N.Di)();(0,en.useEffect)(()=>{m&&a(!1)},[m]);let x=(0,P.w)(e=>e.fetchListConversations);(0,E.v)(x()),(0,E.v)(x({filterIsStarred:!0}));let g=(0,P.w)(e=>e.byId),b=(0,en.useMemo)(()=>Object.values(g).map(e=>e.conversationId),[g]),j=(0,P.w)(e=>e.fetchGetManyConversations),y=(0,en.useMemo)(()=>j(b),[b]),{data:I}=(0,E.v)(y,{preserveValue:!0}),L=!!(0,f.wV)().user,M=(0,en.useMemo)(()=>{if(!I)return[];let e=I.filter(e=>!e.temporary).filter(e=>0===e.workspaces.length).filter(e=>!e.taskResultId);return V().sortBy(e,e=>-new Date(e.modifyTime).getTime())},[I]),T=(0,en.useMemo)(()=>M.slice(0,10),[M]),{sortedBuckets:B,bucketedConversations:W}=(0,en.useMemo)(()=>{let e=V().groupBy(T,e=>{let t=e.modifyTime;return e.starred?"Pinned":(0,X.c)(t)?"Today":(0,O.P)(t)?"Yesterday":(0,G.x)(t)?"This Week":(0,F.e)(t)?(0,K.GP)(t,"MMMM"):(0,K.GP)(t,"yyyy")}),t={Pinned:0,Today:1,Yesterday:2,"This Week":3,"This Month":4};return{sortedBuckets:V().sortBy(Object.keys(e),a=>{var s,n;let l=t[a];return null!=l?l:new Date(null==(n=e[a])||null==(s=n[0])?void 0:s.modifyTime).getTime()}),bucketedConversations:e}},[T]),{push:Z}=(0,R.wK)(),q=(0,H.M)(e=>e.loadRecentWorkspaces);(0,en.useEffect)(()=>{q()},[q]);let Q=(0,H.M)((0,er.k)(e=>e.recentWorkspaces.map(t=>e.byId[t]).filter(Boolean))),{route:J}=(0,R.wK)(),ee=(0,en.useCallback)(e=>{if("chat"===J.page){let{setOptimisticConversationId:e,setConversationId:t,setSidePanelContent:a}=n.aP.getState();e(void 0),t(void 0),a(void 0)}},[J.page]),es=(0,n.aP)(e=>e.conversationId),ei=(0,P.w)(e=>{var t;return!!es&&(null==(t=e.byId[es])?void 0:t.temporary)}),ec=(0,en.useMemo)(()=>"chat"===J.page||"files"===J.page?{page:"main"}:{page:"chat",conversationId:null!=es?es:null,temporary:ei},[es,ei,J.page]),ex=(0,en.useCallback)(()=>{let{setSidePanelContent:e}=n.aP.getState();e(void 0)},[]),ep=(0,en.useRef)(null),ev=(0,z.tg)({ref:ep}),{add:eb}=(0,C.O)(),ej=(0,en.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),eb().catch((0,_.HX)("app-sidebar:create-workspace"))},[eb]),ek=(0,en.useCallback)(e=>{m&&a(!1)},[m,a]),eC=(0,en.useCallback)(()=>a(!1),[a]),ey=(0,en.useCallback)(()=>a(!0),[a]);return(0,s.jsxs)(k.Bx,{className:(0,D.cn)("z-20 bg-surface-base border-r border-border-l2",t?"cursor-w-resize":"cursor-e-resize"),collapsible:m?"offcanvas":"icon",variant:m?"floating":"sidebar",onClick:r,children:[(0,s.jsx)(k.Gh,{className:(0,D.cn)("mb-2 mt-1 pt-3 pe-2 cursor-default",k.y$),onClick:A.Y,children:(0,s.jsxs)("div",{className:(0,D.cn)("relative flex flex-row"),children:[(0,s.jsx)(l.C9,{alwaysSmall:!0,className:"relative z-10 bg-surface-base block w-fit",onClick:ek}),t&&(0,s.jsx)("div",{className:"grow cursor-w-resize",onClick:eC})]})}),(0,s.jsxs)(k.Yv,{ref:ep,className:(0,D.cn)("relative scroll-bar"),style:{...ev},children:[(0,s.jsx)(k.Cn,{className:"my-1",children:(0,s.jsxs)(k.Uj,{"aria-label":e("sidebar-search","Search"),className:(0,D.cn)("py-2.5","ps-[11px] pe-[11px]","rounded-full border border-border-l1","bg-surface-l1 justify-between","text-secondary",k.b,k.hV),onClick:e=>{e.preventDefault(),e.stopPropagation(),c.H0.getState().openMenu(),o.logEvent("opened_command_menu",void 0,{location:"app-sidebar:search"})},children:[(0,s.jsx)(et.N,{children:t&&(0,s.jsxs)(ea.P.span,{className:"space-x-1 align-baseline",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,s.jsx)("span",{children:e("sidebar-search","Search")}),!m&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:u?"".concat(u,"K"):""})]})}),(0,s.jsx)(d.WI,{className:"size-4.5 absolute right-5"})]})}),(0,s.jsx)(k.Cn,{children:(0,s.jsx)(k.wZ,{children:(0,s.jsx)(em,{icon:(0,s.jsx)(h,{size:14}),text:e("sidebar-chat-nav","Chat"),route:ec,onClick:ee,tooltip:e("sidebar-chat-nav","Chat")})})}),i.ENABLE_FILES_PAGE&&(0,s.jsx)(k.Cn,{children:(0,s.jsx)(k.wZ,{children:(0,s.jsx)(em,{icon:(0,s.jsx)($.A,{size:16}),text:e("sidebar-files-nav","Files"),route:{page:"files",fileId:null},onClick:ex,tooltip:e("sidebar-files-nav","Files")})})}),i.ENABLE_GROK_TASKS&&L&&(0,s.jsx)(k.Cn,{className:(0,D.cn)(""),children:(0,s.jsx)(k.wZ,{children:(0,s.jsx)(eo,{open:t})})}),i.ENABLE_IMAGE_TAB&&(0,s.jsx)(k.Cn,{children:(0,s.jsx)(k.wZ,{children:(0,s.jsx)(em,{icon:(0,s.jsx)(d.xf,{size:16}),text:e("sidebar-images-nav","Images"),route:{page:"images",tab:"explore"},tooltip:e("sidebar-images-nav","Images")})})}),(0,s.jsx)(k.Cn,{className:(0,D.cn)(""),children:(0,s.jsx)(k.wZ,{children:(0,s.jsx)(ef,{trigger:(0,s.jsx)(em,{icon:(null==Q?void 0:Q.length)?(0,s.jsx)(eg,{Icon:d.XR}):(0,s.jsx)(d.XR,{size:16}),action:(0,s.jsx)(v.$n,{className:"ms-auto opacity-0 group-hover/menu-item:opacity-100 transition-opacity duration-200",variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:ej,"aria-label":e("sidebar-create-workspace-button.label","Create new workspace"),children:(0,s.jsx)(Y.A,{size:12})}),text:e("sidebar-workspaces-nav","Workspaces"),route:(null==Q?void 0:Q.length)?void 0:{page:"workspaces"},canPopover:!0}),hasContent:!!(null==Q?void 0:Q.length),content:(0,s.jsxs)(s.Fragment,{children:[!t&&(0,s.jsx)("div",{className:(0,D.cn)("py-1 pl-2 text-sm text-secondary font-semibold sticky top-0"),children:e("sidebar-workspaces-nav","Workspaces")}),!t&&!(null==Q?void 0:Q.length)&&(0,s.jsx)(eh,{content:e("No workspaces yet","No workspaces yet"),ctaText:e("Create Workspace","Create Workspace"),onClickCta:ej},"no-workspaces"),!!(null==Q?void 0:Q.length)&&Q.slice(0,5).map(e=>(0,s.jsx)(eu,{workspaceId:e.workspaceId,showActions:t},e.workspaceId)),Q.length>0&&(0,s.jsx)(v.$n,{tabIndex:-1,variant:"text",size:"none",className:"w-full justify-start px-2.5 text-xs font-semibold no-wrap pb-1 mt-1",onClick:()=>{Z({page:"workspaces"}),o.logEvent("opened_command_menu",void 0,{location:"app-sidebar:recent-chats"})},children:e("See all","See all")})]}),collapsible:!0,onClick:t?void 0:ey})})}),(0,s.jsx)(k.Cn,{className:(0,D.cn)(""),children:(0,s.jsx)(k.wZ,{children:(0,s.jsx)(ef,{hasContent:!!B.length,trigger:(0,s.jsx)(em,{icon:(null==B?void 0:B.length)?(0,s.jsx)(eg,{Icon:p}):(0,s.jsx)(p,{size:16}),text:e("History","History"),canPopover:!0}),content:(0,s.jsxs)(s.Fragment,{children:[!t&&(0,s.jsx)("div",{className:(0,D.cn)("py-1 pl-2 text-sm text-secondary font-semibold sticky top-0"),children:e("History","History")}),!t&&0===B.length&&(0,s.jsx)(eh,{content:e("No chats","No chats")},"no-recent-chats"),B.length>0&&B.map(e=>{let a=W[e]||[];if(0===a.length)return null;let n=V().orderBy(a,[e=>e.createTime],["desc"]);return(0,s.jsxs)(en.Fragment,{children:[(0,s.jsx)("div",{className:(0,D.cn)("py-1 pl-2 text-xs font-semibold text-secondary sticky top-0 z-20 text-nowrap"),children:e}),n.map(e=>(0,s.jsx)(ed,{conversation:e,showActions:t},e.conversationId))]},e)}),B.length>0&&(0,s.jsx)(v.$n,{tabIndex:-1,variant:"text",size:"none",className:"w-full justify-start px-2.5 text-xs font-semibold no-wrap pb-1 mt-1",onClick:()=>{c.H0.getState().openMenu(),o.logEvent("opened_command_menu",void 0,{location:"app-sidebar:recent-chats"})},children:e("Show more","Show more")})]}),collapsible:!0,onClick:t?void 0:ey})})})]}),(0,s.jsxs)(k.CG,{className:(0,D.cn)("relative shrink-0",t?"h-[56px]":"h-[96px]"),children:[(0,s.jsx)("div",{className:(0,D.cn)("absolute bottom-3",k.vd),style:{transform:t?"translateY(0)":"translateY(-44px)",transitionProperty:"transform",transitionDuration:"300ms"},children:(0,s.jsx)(l.IO,{})}),(0,s.jsx)(k.x2,{className:(0,D.cn)("absolute end-2 bottom-3"),iconSize:17})]})]})}function eo(e){var t,a;let{open:n}=e,{t:l}=(0,el.Bd)("base"),r=(0,w.h)(),i=(0,B.d)(es.A("handleSetCreateDialog")),{client:o}=(0,U.useStatsigClient)(),{push:c}=(0,R.wK)(),{getUserTasksQuery:d}=(0,M.ek)(),{data:u}=d,{setOpen:h}=(0,k.cL)(),m=(0,en.useCallback)(()=>h(!0),[h]),x=(0,en.useMemo)(()=>{var e,t;return null!=(t=null==u||null==(e=u.unreadResults)?void 0:e.filter(e=>!e.isRead&&e.status===T.cn.TaskResultSuccess).slice(0,3))?t:[]},[null==u?void 0:u.unreadResults]),p=(null==u||null==(a=u.unreadResults)||null==(t=a.at(0))?void 0:t.isRead)===!1&&u.unreadResults.length>0,f=(0,en.useCallback)(()=>{o.logEvent("clicked_add_new_task",void 0,{location:"tasks-nav-button"}),i(!0)},[i,o]);return(0,s.jsx)(ef,{collapsible:!0,trigger:(0,s.jsx)(em,{icon:x.length&&r.SHOW_SIDEBAR_TASK_CHATS?(0,s.jsx)(eg,{Icon:q.A}):(0,s.jsx)(q.A,{size:17}),text:l("sidebar-tasks-label","Tasks"),route:0===x.length?{page:"tasks",taskId:null,tab:null}:void 0,action:(0,s.jsx)(v.$n,{className:"ms-auto opacity-0 group-hover/menu-item:opacity-100 transition-opacity duration-200",variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:f,"aria-label":l("create-task","Create task"),children:(0,s.jsx)(Y.A,{size:12})}),canPopover:!0,children:p&&(r.SHOW_SIDEBAR_TASK_CHATS&&!n||!r.SHOW_SIDEBAR_TASK_CHATS)&&(0,s.jsx)(g.x,{variant:"sm",className:"absolute top-[50%] translate-y-[-50%] left-[5px]"})}),hasContent:x.length>0&&r.SHOW_SIDEBAR_TASK_CHATS,content:(0,s.jsxs)(s.Fragment,{children:[!n&&(0,s.jsxs)("div",{className:"w-full flex justify-between py-1 items-center gap-1 pl-2 text-sm text-secondary font-semibold sticky top-0",children:[(0,s.jsx)("div",{className:(0,D.cn)(""),children:l("sidebar-tasks-nav","Tasks")}),(0,s.jsx)(v.$n,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:f,"aria-label":l("create-task","Create task"),children:(0,s.jsx)(Y.A,{size:12})})]}),!n&&!(null==x?void 0:x.length)&&(0,s.jsx)(eh,{content:l("No unread task results","No unread task results")},"no-workspaces"),(0,s.jsx)("div",{className:"w-full flex flex-col gap-1",children:(null==x?void 0:x.length)>0&&x.map(e=>(0,s.jsx)(ec,{taskResult:e},e.taskResultId))}),n&&(null==u?void 0:u.tasks)&&u.tasks.length>0&&(0,s.jsx)(v.$n,{tabIndex:-1,variant:"text",size:"none",className:"w-full justify-start px-2.5 text-xs font-semibold no-wrap pb-1 mt-1",onClick:()=>{c({page:"tasks",taskId:null,tab:null})},children:l("Manage tasks","Manage tasks")})]}),onClick:!n&&x.length>0?m:void 0})}function ec(e){var t,a;let{taskResult:n}=e,{t:l}=(0,el.Bd)("base"),{client:r}=(0,U.useStatsigClient)(),i=(0,en.useCallback)(()=>{r.logEvent("clicked_task_result",void 0,{location:"tasks-nav-button"})},[r]),o=(0,N.Di)(),{setOpen:c}=(0,k.cL)(),d=(0,en.useCallback)(e=>{o&&c(!1),(0,A.Y)(e)},[o,c]);return(0,s.jsx)(k.Uj,{asChild:!0,heightClassName:k.Zr,onClick:i,children:(0,s.jsxs)(R.N_,{className:(0,D.cn)("group/task-item pl-2 pr-1 py-1 text-sm","w-full flex  gap-2 text-primary"),route:{page:"chat",conversationId:null!=(t=n.conversationId)?t:null,temporary:!1},onClick:d,children:[(0,s.jsx)(g.x,{variant:"sm"}),(0,s.jsx)("span",{className:(0,D.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block"),style:{maskImage:z.zU,WebkitMaskImage:z.zU},children:null!=(a=n.title)?a:l("New task result","New task result")})]})})}function ed(e){let{conversation:t,showActions:a=!0}=e,{t:l}=(0,el.Bd)("base"),{client:r}=(0,U.useStatsigClient)(),{handlePinConversation:i}=(0,I.c)(),c=(0,L.K)(),u=(0,en.useMemo)(()=>{if(t.title)return t.title;if(t.createTime){let e=t.createTime;return"Chat on ".concat(new Date(e).toLocaleDateString())}return"Untitled Chat"},[t.createTime,t.title]),[h,p]=(0,en.useState)(u),f=o(e=>e.currentAction),g=(null==f?void 0:f.type)==="edit-conversation"&&f.conversationId===t.conversationId,j=(0,en.useCallback)(()=>{let{setCurrentAction:e}=o.getState();e(void 0)},[]),C=(0,en.useCallback)((e,t,a)=>{let{fetchUpdateConversation:s}=P.w.getState();s(e,{title:t,starred:a}).catch(e=>{c("app-sidebar:handleUpdateConversation",e)})},[c]),{route:y,push:w}=(0,R.wK)(),S=(0,n.aP)(es.A("conversationId")),E="chat"===y.page&&S===t.conversationId,M=(0,en.useCallback)(()=>{let{fetchSoftDeleteConversation:e}=P.w.getState();e(t.conversationId).catch(e=>{c("app-sidebar:handleDeleteConversation",e)}),E&&w({page:"main"})},[t.conversationId,c,E,w]),_=(0,en.useCallback)(()=>{let{setCurrentAction:e}=o.getState();e({type:"edit-conversation",conversationId:t.conversationId})},[t.conversationId]),T=(0,en.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),("click"===e.type||e instanceof KeyboardEvent&&"Enter"===e.key)&&C(t.conversationId,h.trim(),t.starred);let{setCurrentAction:a}=o.getState();a(void 0),r.logEvent("update_conversation_name",t.conversationId,{location:"app-sidebar"})},[C,t.conversationId,h,t.starred,r]),B=(0,en.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),p(e.target.value)},[]),H=(0,en.useCallback)(e=>{"Enter"===e.key?(C(t.conversationId,h.trim(),t.starred),r.logEvent("update_conversation_name",t.conversationId,{location:"app-sidebar"})):"Escape"===e.key&&j()},[j,C,t.conversationId,h,t.starred,r]),W=(0,en.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),j()},[j]),X=(0,en.useCallback)(()=>{i(t.conversationId,!t.starred,"app-sidebar")},[t.conversationId,t.starred,i]),[O,G]=(0,en.useState)(!1),F=(0,N.Di)(),{setOpen:K}=(0,k.cL)(),Z=(0,en.useCallback)(e=>{F&&K(!1),(0,A.Y)(e)},[F,K]);return(0,s.jsx)(et.N,{children:(0,s.jsx)(ea.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:(0,s.jsx)(k.Uj,{asChild:!0,highlighted:E,allowActive:!g,heightClassName:k.Zr,children:(0,s.jsxs)(R.N_,{className:(0,D.cn)("group/conversation-item pl-3 pr-1 py-1 text-sm","w-full flex flex-row gap-2 text-primary"),route:{page:"chat",conversationId:t.conversationId,temporary:t.temporary},onClick:Z,tooltip:u,children:[g?(0,s.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:h,onKeyDown:H,onChange:B,onClick:A.Y,autoFocus:!0}):(0,s.jsx)("span",{className:(0,D.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block"),style:{maskImage:z.zU,WebkitMaskImage:z.zU},children:u}),a&&(g?(0,s.jsxs)("div",{className:(0,D.cn)("flex","items-center justify-end gap-0.5"),children:[(0,s.jsx)(v.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:W,tooltipContent:l("Cancel","Cancel"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(d.uv,{size:16,className:"text-fg-primary"})}),(0,s.jsx)(v.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:T,tooltipContent:l("Save","Save"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(Q.A,{size:16,className:"text-fg-primary"})})]}):(0,s.jsxs)(b.rI,{onOpenChange:G,children:[(0,s.jsx)(b.ty,{asChild:!0,children:(0,s.jsx)(v.$n,{variant:"ghost",size:"iconXs",className:(0,D.cn)("hidden group-hover/conversation-item:flex",O&&"flex"),rounded:!0,children:(0,s.jsx)(J.A,{size:14})})}),(0,s.jsxs)(b.SQ,{side:"right",align:"start",sideOffset:6,className:"min-w-36 space-y-0.5",onClick:A.Y,children:[(0,s.jsxs)(b._2,{className:(0,D.cn)("text-fg-secondary"),onClick:_,children:[(0,s.jsx)(d.rZ,{size:14,className:"me-2"}),l("Rename","Rename")]}),(0,s.jsxs)(b._2,{className:(0,D.cn)("text-fg-secondary"),onClick:X,children:[t.starred?(0,s.jsx)(x.A,{size:16,className:"me-2"}):(0,s.jsx)(m,{size:16,className:"me-2"}),t.starred?l("Unpin","Unpin"):l("Pin","Pin")]}),(0,s.jsxs)(b._2,{className:(0,D.cn)("text-fg-secondary"),onClick:M,children:[(0,s.jsx)(d.uc,{size:14,className:"me-2"}),l("Delete","Delete")]})]})]}))]})})},t.conversationId)})}function eu(e){var t;let{workspaceId:a,showActions:n=!0}=e,{route:l,push:r}=(0,R.wK)(),{t:i}=(0,el.Bd)("base"),{client:c}=(0,U.useStatsigClient)(),u=(0,L.K)();(0,H.M)(e=>e.promiseById[a]);let h=(0,H.M)(e=>e.fetchGetWorkspace),m=(0,E.v)(h(a)),[x,p]=(0,en.useState)((null==m||null==(t=m.data)?void 0:t.name)||"");(0,en.useEffect)(()=>{(null==m?void 0:m.data)&&p(m.data.name||"")},[null==m?void 0:m.data]);let f=null==m?void 0:m.data,g=o(e=>e.currentAction),j=(null==g?void 0:g.type)==="edit-workspace"&&g.workspaceId===a,C="workspace"===l.page&&l.workspaceId===a,w=(0,W.jE)(),S=(0,en.useCallback)(()=>{let{setCurrentAction:e}=o.getState();e(void 0);let t=x.trim();if(""===t)return;c.logEvent("update_workspace_name",a,{location:"app-sidebar"});let{fetchUpdateWorkspace:s}=H.M.getState();s({workspaceId:a,body:{name:t}}).then(()=>{w.invalidateQueries({queryKey:["workspaces"]})}).catch(e=>{u("app-sidebar:handleEditSave",e)})},[u,x,c,a,w]),I=(0,en.useCallback)(()=>{let{setCurrentAction:e}=o.getState();e(void 0)},[]),M=(0,en.useCallback)(()=>{let{setCurrentAction:e}=o.getState();e({type:"edit-workspace",workspaceId:a})},[a]),T=(0,en.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),("click"===e.type||e instanceof KeyboardEvent&&"Enter"===e.key)&&S()},[S]),P=(0,en.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),p(e.target.value)},[]),B=(0,en.useCallback)(e=>{"Enter"===e.key?S():"Escape"===e.key&&I()},[I,S]),X=(0,en.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),I()},[I]),O=(0,en.useCallback)(e=>{let{fetchUpdateWorkspace:t}=H.M.getState();t({workspaceId:a,body:{icon:e}}).catch(e=>{u("app-sidebar:handleIconChange",e)})},[u,a]),G=(0,en.useCallback)(()=>{let{fetchDeleteWorkspace:e}=H.M.getState();a&&(e(a).then(()=>w.invalidateQueries({queryKey:["workspaces"]})).catch((0,_.HX)("app-sidebar:handleDeleteClick")),"workspace"===l.page&&l.workspaceId===a&&r({page:"workspaces"}))},[w,a,l,r]),[F,K]=(0,en.useState)(!1),Z=(0,N.Di)(),{setOpen:V}=(0,k.cL)(),$=(0,en.useCallback)(e=>{Z&&V(!1),(0,A.Y)(e)},[Z,V]);return(0,s.jsx)(k.Uj,{asChild:!0,highlighted:C,allowActive:!j,heightClassName:k.Zr,children:(0,s.jsxs)(R.N_,{className:(0,D.cn)("group/conversation-item pl-2 pr-1 py-1 text-sm","w-full flex flex-row gap-2 text-primary"),route:{page:"workspace",workspaceId:a,tab:"conversations"},onClick:$,children:[(0,s.jsx)("div",{onClick:n?A.Y:void 0,children:(0,s.jsx)(y.n,{icon:null==f?void 0:f.icon,sizeClass:"size-4",onChange:O,rounded:!0,buttonSize:"iconXs",disabled:!n})}),j?(0,s.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:x,onKeyDown:B,onChange:P,onClick:A.Y,autoFocus:!0}):(0,s.jsx)("span",{className:(0,D.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block"),style:{maskImage:z.zU,WebkitMaskImage:z.zU},children:x}),n&&(j?(0,s.jsxs)("div",{className:(0,D.cn)("flex","items-center justify-end gap-0.5"),children:[(0,s.jsx)(v.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:X,tooltipContent:i("Cancel","Cancel"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(d.uv,{size:16,className:"text-fg-primary"})}),(0,s.jsx)(v.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:T,tooltipContent:i("Save","Save"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(Q.A,{size:16,className:"text-fg-primary"})})]}):(0,s.jsxs)(b.rI,{onOpenChange:K,children:[(0,s.jsx)(b.ty,{asChild:!0,children:(0,s.jsx)(v.$n,{variant:"ghost",size:"iconXs",rounded:!0,"aria-label":i("sidebar-workspace-menu-open.label","Show workspace menu"),className:(0,D.cn)("hidden group-hover/conversation-item:flex",F&&"flex"),children:(0,s.jsx)(J.A,{size:14})})}),(0,s.jsxs)(b.SQ,{side:"right",align:"start",sideOffset:6,className:"min-w-36 space-y-0.5",onClick:A.Y,children:[(0,s.jsxs)(b._2,{className:(0,D.cn)("text-fg-secondary"),onClick:M,children:[(0,s.jsx)(d.rZ,{size:14,className:"me-2"}),i("Rename","Rename")]}),(0,s.jsxs)(b._2,{className:(0,D.cn)("text-fg-secondary"),onClick:G,children:[(0,s.jsx)(d.uc,{size:14,className:"me-2"}),i("Delete","Delete")]})]})]}))]})})}function eh(e){let{content:t,ctaText:a,onClickCta:n}=e;return(0,s.jsxs)("div",{className:(0,D.cn)("h-[140px] flex flex-col gap-2 items-center justify-center","-mt-8"),children:[(0,s.jsx)("span",{className:"text-xs text-secondary",children:t}),a&&n&&(0,s.jsx)(v.$n,{variant:"outline",size:"sm",className:"rounded-xl",onClick:n,children:a})]})}function em(e){let{icon:t,text:a,tooltip:n,route:l,onClick:r,children:i,action:o,canPopover:c}=e,{open:d,setOpen:u}=(0,k.cL)(),h=(0,N.Di)(),m=(0,en.useCallback)(e=>{e.stopPropagation(),null==r||r(e),l&&h&&u(!1)},[r,h,u,l]),x=l?(0,s.jsxs)(R.N_,{className:(0,D.cn)("w-full flex flex-row gap-2",k.jy,"text-sm text-secondary"),route:l,onClick:m,children:[(0,s.jsx)(k.CP,{children:t}),d&&a,i]}):(0,s.jsxs)("button",{"aria-label":a,className:(0,D.cn)("w-full flex flex-row gap-2 bg-background text-secondary text-sm rounded-xl",k.jy),onClick:r,children:[(0,s.jsx)(k.CP,{children:t}),d&&a,i]}),p=!d&&c?(0,s.jsx)(j.Wv,{asChild:!0,hoverOpen:!0,tabIndex:-1,children:x}):x;return(0,s.jsxs)(k.FX,{className:"relative",children:[(0,s.jsx)(k.Uj,{tooltip:n,asChild:!0,children:p}),d&&o&&(0,s.jsx)("span",{className:"absolute top-1/2 right-2 -translate-y-1/2",children:o})]})}let ex=(0,en.createContext)({collapsed:!1,setCollapsed:e=>{}}),ep=()=>(0,en.useContext)(ex);function ef(e){let{trigger:t,content:a,hasContent:n,onClick:l,collapsible:r}=e,{open:i}=(0,k.cL)(),[o,c]=(0,en.useState)(!1);(0,en.useEffect)(()=>{c(!1)},[n]);let d=en.cloneElement(t,{onClick:e=>{l&&l(),r&&(i?c(!o):c(!1)),e.stopPropagation()}}),u=(0,en.useCallback)(()=>{c(!0)},[]);return(0,s.jsxs)(ex.Provider,{value:{collapsed:o,setCollapsed:c},children:[!i&&(0,s.jsxs)(j.AM,{children:[d,(0,s.jsx)(j.hl,{className:"p-2 rounded-3xl flex flex-col gap-0.5 w-[250px] z-[50]",side:"right",align:"start",hoverOpen:!0,sideOffset:3,closeOnClick:!0,onClick:A.Y,children:a})]}),i&&d,(0,s.jsx)(et.N,{children:i&&!o&&n&&(0,s.jsx)(ea.P.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.2,ease:"easeInOut"},style:{overflow:"hidden"},children:(0,s.jsx)(k.G,{onClickIndent:u,children:a})},"drawer-content")})]})}function eg(e){let{Icon:t}=e,{open:a}=(0,k.cL)(),{collapsed:n}=ep();return a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t,{className:"group-hover/menu-item:hidden",size:16}),(0,s.jsx)(ee.A,{className:(0,D.cn)("hidden group-hover/menu-item:block transition-[transform] duration-200",n&&"rotate-180"),size:16})]}):(0,s.jsx)(t,{size:16})}},88733:(e,t,a)=>{a.d(t,{H:()=>z});var s=a(79342),n=a(39489),l=a(77334),r=a(10084),i=a(56691),o=a(80226),c=a(75500),d=a(41320),u=a(4878),h=a(12220),m=a(17703),x=a(6063),p=a(61312),f=a(31643),g=a(49694),v=a(73239),b=a(28984),j=a(71205),k=a(16506),C=a(88382),y=a(65146),w=a(14486),N=a(93192),S=a(1451),I=a(17438);function E(e){let{assetUrl:t,fileMetadata:a}=e,n=(0,c.h)(),{t:l}=(0,y.Bd)("chat"),{isLoading:r,error:i,data:o}=(0,f.IT)({queryKey:["asset",t],queryFn:async()=>{if(!t)throw Error("Asset URL is required");let e=await fetch(t,{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch: ".concat(e.statusText));return e.arrayBuffer()},enabled:!!t});return r?(0,s.jsx)("div",{className:"p-4",children:l("Loading text…","Loading text…")}):i?(0,s.jsx)("div",{className:"p-4",children:l("errorMessage","Error: {{error}}",{error:i.message})}):o?(0,s.jsx)(I.bs,{initialState:{name:a.fileName||"Workbook"},content:o,readOnly:!n.ENABLE_XLSX_EDITING,children:(0,s.jsx)(S.y,{readOnly:!n.ENABLE_XLSX_EDITING,className:"rounded-lg border border-border-l2 overflow-hidden h-full"})},t):(0,s.jsx)("div",{className:"p-4",children:l("No content available.","No content available.")})}var L=a(73508);function z(e){let{fileMetadata:t,onClose:a,useRawFileURI:l,hideEdit:r,className:i}=e,o=(0,c.h)(),{ASSET_SERVER_URL:d}=(0,n.v)(),h=l?t.fileUri:(0,u.sU)(d,t.fileUri);if(o.ENABLE_CSV_RENDERING&&x.Ig.includes(t.fileMimeType)){let e=(0,p.cn)("flex flex-col items-center justify-center size-full mx-auto",i);return(0,s.jsx)("div",{className:e,children:(0,s.jsx)(N.fE,{assetUrl:h,fileMetadata:t})})}if(o.ENABLE_XLSX_RENDERING&&x.f9.includes(t.fileMimeType)){let e=(0,p.cn)("flex flex-col items-center justify-center size-full mx-auto",i);return(0,s.jsx)("div",{className:e,children:(0,s.jsx)(E,{assetUrl:h,fileMetadata:t})})}if(t.fileMimeType.startsWith("text/"))return(0,s.jsx)(A,{assetUrl:h,fileMetadata:t,className:i});switch(t.fileMimeType){case"image/jpeg":case"image/png":case"image/webp":return(0,s.jsx)(M,{assetUrl:h,fileMetadata:t,onClose:a,hideEdit:r});case"application/json":case"application/csv":case"application/x-yaml":case"application/xml":case"application/toml":case"":return(0,s.jsx)(A,{className:i,assetUrl:h,fileMetadata:t});case"image/heic":case"image/heif":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return(0,s.jsx)(_,{assetUrl:h,fileMetadata:t});default:return(0,s.jsx)(R,{assetUrl:h,fileMetadata:t})}}function M(e){let{assetUrl:t,fileMetadata:a,showControls:n=!1,onClose:c,hideEdit:d}=e,[u,x]=(0,C.useState)(!0),{t:p}=(0,y.Bd)("chat");(0,C.useEffect)(()=>{if(!t)return void x(!1);let e=new Image;return e.src=t,e.onload=()=>x(!1),e.onerror=()=>x(!1),()=>{e.onload=null,e.onerror=null}},[t]);let f=(0,C.useCallback)(()=>{t&&(0,h.G)(t,a.fileName).catch((0,m.HX)("chat-asset-viewer:handleDownloadImage"))},[t,a]);return n?(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full max-w-4xl mx-auto","data-vaul-no-drag":!0,children:(0,s.jsx)("div",{className:"relative w-full max-w-4xl mx-auto",children:(0,s.jsx)(w.GT,{initialScale:1,initialPositionX:0,initialPositionY:0,children:e=>{let{zoomIn:n,zoomOut:l,resetTransform:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"absolute end-4 bottom-4 z-10 flex space-x-1 rounded-full bg-background p-1 opacity-80",children:[(0,s.jsx)(i.$n,{onClick:()=>n(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Zoom In",children:(0,s.jsx)(g.A,{className:"h-4 w-4"})}),(0,s.jsx)(i.$n,{onClick:()=>l(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Zoom Out",children:(0,s.jsx)(v.A,{className:"h-4 w-4"})}),(0,s.jsx)(i.$n,{onClick:()=>r(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Reset Zoom",children:(0,s.jsx)(b.A,{className:"h-4 w-4"})}),(0,s.jsx)(i.$n,{onClick:f,variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Reset Zoom",children:(0,s.jsx)(j.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(w.WZ,{wrapperClass:"!w-full bg-primary/50 rounded-lg",children:(0,s.jsx)("img",{src:t,alt:a.fileName,className:"w-full h-auto shadow-md",onLoad:()=>l(),style:{maxHeight:"70vh"}})}),u&&(0,s.jsx)(o.E,{className:"w-full h-[70vh] rounded-lg"})]})}})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:t,alt:a.fileName,className:"w-[94vw] max-h-[calc(100vh-10rem)] max-w-5xl xl:max-w-6xl shadow cursor-pointer rounded-xl lg:w-fit object-contain"}),t&&!d&&(0,s.jsx)("div",{className:"w-full flex justify-center absolute bottom-3 p-3",children:(0,s.jsxs)(r.R,{className:"px-4 py-3 h-auto",buttonProps:{variant:"card",size:"pill"},editingImage:{url:t,metadata:a},location:"chat-asset-viewer",onClick:e=>{e.stopPropagation(),c()},children:[(0,s.jsx)(l.mg,{className:"size-5 text-secondary"}),p("Edit Image","Edit Image")]})})]})}let A=C.memo(function(e){let{assetUrl:t,fileMetadata:a,className:n}=e,{t:l}=(0,y.Bd)("chat"),{resolvedTheme:r}=(0,k.D)(),{isLoading:i,error:o,data:c}=(0,f.IT)({queryKey:["text-asset",t],queryFn:async()=>{if(!t)throw Error("Asset URL is required");let e=await fetch(t,{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch: ".concat(e.statusText));return await e.text()},enabled:!!t});if(i)return(0,s.jsx)("div",{className:"p-4",children:l("Loading text…","Loading text…")});if(o)return(0,s.jsx)("div",{className:"p-4",children:l("errorMessage","Error: {{error}}",{error:o.message})});if(!c)return(0,s.jsx)("div",{className:"p-4 w-full h-full flex items-center justify-center text-secondary",children:l("Content is empty","Content is empty")});let d=c.length>16384,u=x.rU.includes(a.fileMimeType),h=d||u?(0,s.jsx)("pre",{className:(0,p.cn)("w-full p-4 rounded-lg shadow-md text-sm font-mono overflow-auto max-h-[50dvh] sm:max-h-[calc(100dvh-6rem)] mb-4 bg-foreground",n),children:c}):(0,s.jsx)("div",{className:(0,p.cn)("w-full rounded-lg shadow-md text-sm font-mono overflow-auto max-h-[50dvh] sm:max-h-[calc(100dvh-6rem)] mb-4",n),children:(0,s.jsx)(L.r,{customStyle:{background:"dark"===r?"#121314":"var(--foreground)",fontFamily:"var(--font-ibm-plex-mono)"},children:c})});return(0,s.jsx)("div",{className:(0,p.cn)("flex flex-col items-center justify-center w-full max-w-4xl mx-auto",n),children:h})});function _(e){let{assetUrl:t,fileMetadata:a}=e,{t:n}=(0,y.Bd)("chat"),l=(0,d.Di)();return t?l?(0,s.jsx)("div",{className:"flex flex-col items-center justify-center rounded-2xl mb-4 gap-4 p-4",children:(0,s.jsx)("a",{href:t,download:a.fileName||"download",children:(0,s.jsx)(i.$n,{variant:"filledSecondary",rounded:!0,children:n("Download Asset","Download Asset")})})}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-2xl mb-4 gap-4 bg-background p-4",children:[a.fileName,(0,s.jsx)("a",{href:t,download:a.fileName||"download",children:(0,s.jsx)(i.$n,{variant:"filledSecondary",rounded:!0,children:n("Download Asset","Download Asset")})})]}):null}function R(e){let{assetUrl:t,fileMetadata:a}=e,n=(0,C.useRef)(null);return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center rounded-lg w-full h-full",children:(0,s.jsx)("iframe",{ref:n,src:t,title:a.fileName,className:"rounded-lg shadow-md h-full w-full"})})}A.displayName="MemoizedTextAssetViewer"},91915:(e,t,a)=>{a.d(t,{X:()=>E});var s=a(79342),n=a(52371),l=a(61312),r=a(88382),i=a(51182),o=a(56691),c=a(76545),d=a(65146),u=a(17438);function h(e){let{t}=(0,d.Bd)("base"),{sheets:a,setSpreadsheetState:n,calcEngine:l}=(0,u.Tm)((0,i.k)(e=>({sheets:e.sheets,setSpreadsheetState:e.setSpreadsheetState,calcEngine:e.calcEngine}))),h=r.useCallback(async()=>{if(!l)return;let{sheetName:e}=await l.createSheet();n(t=>({...t,sheets:[...a,{name:e,rowCount:256,colCount:26}],activeSheet:a.length}))},[a,n,l]);return(0,s.jsxs)(o.gx,{variant:"ghost",size:"iconSm",tooltipContent:"Add sheet","aria-label":"Add sheet",onClick:h,className:e.className,children:[(0,s.jsx)(c.c11,{size:16}),(0,s.jsx)("span",{className:"sr-only",children:t("add-sheet","Add sheet")})]})}var m=a(7130),x=a(38394);let p=e=>{let{ctx:t,theme:a,rect:{x:s,y:n,width:l,height:r},column:i,isSelected:o}=e,c=o?a.textHeaderSelected:a.textHeader,d=(0,x.G5)(i.title,t).width;t.fillStyle=c;let u=n+r/2+(0,x.iV)(t,"".concat(a.headerFontStyle," ").concat(a.fontFamily));return t.fillText(i.title,s+(l-d)/2+.5,u),!0};var f=a(48521),g=a(12625),v=a(80057),b=a.n(v),j=a(2681),k=a.n(j);function C(e){let t="";for(;e>=0;)t=String.fromCharCode(e%26+97)+t,e=Math.floor(e/26)-1;return t.toUpperCase()}var y=a(28513),w=a(64332),N=a(16506);let S=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:26;return k()(e,t).map(e=>Array.from({length:a},(t,a)=>({value:"",serialized:"",format:"",col:a,row:e})))},I=r.memo(function(e){let{sheet:t,sheetId:a,readOnly:n=!1,editable:o=!n,allowOverlay:c=o,displayFormulas:d=!0,onCellsChange:h,className:x,minRows:v=256,minCols:j=26}=e,{resolvedTheme:I}=(0,N.D)(),E="dark"===I,L=(0,l.cn)("size-full",x),{highlightedRegions:z,setSpreadsheetState:M,calcEngine:A}=(0,u.Tm)((0,i.k)(e=>({highlightedRegions:e.highlightedRegions,setSpreadsheetState:e.setSpreadsheetState,calcEngine:e.calcEngine}))),[{formulaEditorProvider:_}]=(0,y._)("data-grid-editor"),R=r.useRef(null),D=r.useCallback(e=>{R.current=e,M(t=>({...t,dataGridRefs:{...t.dataGridRefs,[a]:e}}))},[a,M]),T=r.useMemo(()=>E?f.R6:f.b,[E]),P=r.useMemo(()=>E?f.__:f.mX,[E]),[B,H]=r.useState(Array.from({length:Math.max(t.colCount,j)},(e,t)=>({id:C(t),title:C(t),width:128,grow:1}))),U=r.useCallback((e,t)=>{H(a=>a.map(a=>e===a?{...a,width:t}:a))},[]);r.useEffect(function(){M(e=>({...e,sheets:e.sheets.map(e=>e.name===t.name?{...e,rowCount:t.rowCount,colCount:t.colCount}:e)}))},[t.name,M,t.rowCount,t.colCount]);let W=r.useCallback(e=>{let[t,s]=e;M(e=>({...e,editingCell:{sheet:a,col:t,row:s}}))},[a,M]),X=r.useCallback(async function(e){let[t,s]=e;return A?A.getCellsInRange(a,t,s-1,0,26):S(t,s)},[a,A]),{dataRef:O,loadingRef:G,refresh:F,...K}=function(e,t,a,s,n,l){e=Math.max(e,1);let i=r.useRef([]),o=r.useRef(g.I1.empty()),[c,d]=r.useState({x:0,y:0,width:0,height:0}),u=r.useRef(c);u.current=c;let h=r.useCallback(e=>{d(t=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height?t:e)},[]),m=r.useCallback(e=>{let[t,a]=e,n=i.current[a];return void 0!==n?s(n,t):{kind:g.dd.Loading,allowOverlay:!1}},[s]),x=r.useCallback(async t=>{var s;o.current=o.current.add(t);let l=t*e,r=await a([l,(t+1)*e]),c=u.current,d=[],h=i.current;for(let e=0;e<r.length;e++){h[e+l]=r[e];for(let t=c.x;t<=c.x+c.width;t++)d.push({cell:[t,e+l]})}null==(s=n.current)||s.updateCells(d)},[a,n,e]),p=r.useCallback(t=>async()=>{let a=Math.max(0,Math.floor(t.y/e)),s=Math.floor((t.y+t.height)/e);for(let e of b()(k()(a,s+1).filter(e=>!o.current.hasIndex(e)),4))await Promise.all(e.map(x));let n=[];for(let e=t.y;e<t.y+t.height;e++){let a=[];for(let s=t.x;s<t.x+t.width;s++)a.push(m([s,e]));n.push(a)}return n},[m,x,4,e]);return r.useEffect(()=>{let t=Math.max(0,Math.floor((c.y-e/2)/e)),a=Math.floor((c.y+c.height+e/2)/e);for(let e of k()(t,a+1))o.current.hasIndex(e)||x(e)},[x,e,c]),{getCellContent:m,onVisibleRegionChanged:h,onCellsEdited:r.useCallback(e=>null==l?void 0:l(e,i),[l]),getCellsForSelection:p,dataRef:i,loadingRef:o,refresh:r.useCallback(function(){let t=Math.max(0,Math.floor((c.y-e/2)/e)),a=Math.floor((c.y+c.height+e/2)/e);for(let e of k()(t,a+1))x(e)},[x,e,c])}}(32,4,X,r.useCallback((e,t)=>({kind:g.dd.Text,data:d?e[t].serialized:e[t].value,allowOverlay:c,displayData:e[t].value,readonly:n}),[d,c,n]),R,r.useCallback((e,t)=>{if(!o||!h)return!1;for(let{location:[a,s],value:n}of e){if(n.kind!==g.dd.Text)continue;let e=t.current[s];e&&void 0!==e[a]&&(e[a]={...e[a],value:n.data,serialized:n.data})}return null==A||A.setCellValues(a,e.map(e=>{var t;let{location:[a,s],value:n}=e;return{row:s,col:a,value:null!=(t=n.data)?t:""}})).then(e=>{let{result:t}=e;h(t.map(e=>{let{serialized:t,...a}=e;return{...a,formula:t}}))}).catch(e=>{console.error(e)}),!0},[o,A,h,a]));return r.useEffect(function(){F()},[a,A,F]),r.useEffect(function(){let e,t;if(A)return A.onCells(w.BX(e=>{e.map(e=>({cell:[e.col,e.row]})).length>0&&F()})).then(t=>{e=t}).catch(e=>{console.error("spreadsheet-workbench: onCellsChange",e)}),A.onDiffs(w.BX(e=>{let t=[];for(let a of e)"setCellValue"===a.type&&t.push({cell:[a.column,a.row]});t.length>0&&F()})).then(e=>{t=e}).catch(e=>{console.error("spreadsheet-workbench: onDiffsChange",e)}),()=>{null==e||e(),null==t||t()}},[A,F]),(0,s.jsx)("div",{className:L,"data-sheet-id":a,children:(0,s.jsx)(m.H,{ref:D,width:"100%",height:"100%",columns:B,rows:Math.max(t.rowCount,v),onColumnResize:U,theme:T,verticalBorder:!0,provideEditor:_,rowMarkers:{kind:"clickable-number",theme:P},drawHeader:p,highlightRegions:z,keybindings:{activateCell:"|Enter|shift+Enter|F2",delete:"Backspace|Delete"},onCellActivated:W,getCellsForSelection:!0,rangeSelectionBlending:"mixed",columnSelectionBlending:"mixed",rowSelectionBlending:"mixed",...K})})});function E(e){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{}),children:(0,s.jsx)(L,{...e})})}function L(e){let{readOnly:t=!1,editable:a=!t,onCellsChange:r,className:o}=e,c=(0,l.cn)("size-full grow flex flex-col",o),{activeSheet:d,setActiveSheet:m,sheets:x}=(0,u.Tm)((0,i.k)(e=>({activeSheet:e.activeSheet,setActiveSheet:e.setActiveSheet,sheets:e.sheets})));return(0,s.jsx)("div",{className:c,children:(0,s.jsxs)(n.tU,{defaultValue:"0",value:d+"",className:"flex flex-col grow",onValueChange:e=>m(parseInt(e)),children:[(0,s.jsx)("div",{className:"grow",children:x.map((e,l)=>(0,s.jsx)(n.av,{value:String(l),className:"mt-0 size-full grow overflow-hidden",children:(0,s.jsx)(I,{sheet:e,sheetId:l,readOnly:t,editable:a,onCellsChange:r,className:"",allowOverlay:!0})},l))}),(0,s.jsxs)("div",{className:"flex justify-start items-center p-1 border-t border-border-l1 gap-1 bg-surface-base box-content",children:[a&&(0,s.jsx)(h,{className:"shrink-0"}),(0,s.jsx)(n.j7,{className:"grow flex justify-start rounded-none border-none gap-1 p-0 overflow-x-auto",loop:!1,children:x.map((e,t)=>(0,s.jsx)(n.Xi,{className:"text-sm font-semibold h-8 data-[state=active]:shadow-none border border-border-l1 focus-visible:ring-0 focus-visible:border-ring transition-colors",value:String(t),"aria-label":e.name,"data-sheet-name":e.name,children:e.name},t))})]})]})})}}}]);