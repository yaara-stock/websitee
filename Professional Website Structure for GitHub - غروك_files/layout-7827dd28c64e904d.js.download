!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cdd6000e-991a-4084-ab7e-3680cb88b1a1",e._sentryDebugIdIdentifier="sentry-dbid-cdd6000e-991a-4084-ab7e-3680cb88b1a1")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{17924:(e,t,s)=>{"use strict";s.d(t,{Loadout:()=>s8});var a=s(79342);s(93649);var n=s(28245),l=s(56691),r=s(75500),i=s(61312),o=s(20517),c=s(73484),d=s(40938),u=s(42283),m=s(88382),h=s(59625),x=s(6132);function f(){let e=(0,r.h)(),t=(0,m.useMemo)(()=>{let t=p.safeParse(e.BANNER.value);if(t.success)return t.data},[e.BANNER.value]),[s,n]=(0,h.A)("banner-".concat(null==t?void 0:t.sentAt),!1),x=(0,m.useMemo)(()=>{if(t)switch(t.type){case"log":return(0,a.jsx)(o.A,{className:"mr-0.5 flex-shrink-0",size:18});case"warn":return(0,a.jsx)(c.A,{className:"mr-0.5 flex-shrink-0",size:18});case"error":return(0,a.jsx)(d.A,{className:"mr-0.5 flex-shrink-0",size:18})}},[null==t?void 0:t.type]),f=(0,m.useCallback)(()=>{n(!0)},[]);if(!s&&t&&t.message)return(0,a.jsxs)("div",{className:(0,i.cn)("absolute top-4 right-1/2 translate-x-1/2 z-50","flex flex-row items-center gap-3","bg-popover rounded-2xl ring-1 ring-inset ring-toggle-border","mx-4 py-3 pl-4 pr-3 min-w-[300px] max-w-full lg:max-w-3/5 w-fit"),children:[x,t.message,(0,a.jsx)(l.$n,{className:"ml-auto",variant:"ghostSecondary",size:"iconSm",onClick:f,children:(0,a.jsx)(u.A,{size:18})})]})}let p=x.z.object({sentAt:x.z.string().catch(new Date().toISOString()),type:x.z.union([x.z.literal("log"),x.z.literal("warn"),x.z.literal("error")]).catch("error"),message:x.z.string().catch("")}).catch({sentAt:new Date().toISOString(),type:"log",message:""});var g=s(80095),v=s(17423),b=s(17703),j=s(65146),y=s(14908);let k=()=>{let{t:e}=(0,j.Bd)("base"),[t,s]=(0,h.A)(v.Jt),[a,n]=(0,h.A)(v.X$),{user:l,anonUser:r,refreshAnonUser:i}=(0,g.useSession)(),o=(0,m.useCallback)(async()=>{let e=await (0,v.L5)();if(!e)throw Error("Failed to generate new anon user");let{anonUserId:t,privateKey:a}=e;s(t),n(a),await i(t,a)},[n,s,i]);return(0,m.useEffect)(()=>{let s=async()=>{t&&a?await i(t,a).catch(()=>o()):await o()};l||t&&a&&r||s().catch(t=>{y.oR.error(e("session-store-init.failed-to-initialize-session","Failed to initialize session")),(0,b.vV)("session-store-init",t)})},[t,a]),null};var w=s(7912);let C=w.bL;w.l9;let N=w.ZL,S=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(w.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-overlay data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n,ref:t})});S.displayName=w.hJ.displayName;let _=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(S,{}),(0,a.jsx)(w.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 ring-1 ring-inset ring-popover-border bg-popover p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-3xl",s),...n})]})});_.displayName=w.UC.displayName;let A=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};A.displayName="AlertDialogHeader";let E=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};E.displayName="AlertDialogFooter";let I=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(w.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold",s),...n})});I.displayName=w.hE.displayName;let M=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(w.VY,{ref:t,className:(0,i.cn)("text-sm text-secondary",s),...n})});M.displayName=w.VY.displayName;let T=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(w.rc,{ref:t,className:(0,i.cn)((0,l.ru)({variant:"primary"}),s),...n})});T.displayName=w.rc.displayName;let O=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(w.ZD,{ref:t,className:(0,i.cn)((0,l.ru)({variant:"ghost"}),"mt-2 sm:mt-0",s),...n})});O.displayName=w.ZD.displayName;var P=s(34500),D=s(41320);function R(e){let{startTimeMs:t,onComplete:s}=e,n=(0,m.useRef)(null),l=(0,m.useRef)(void 0);return(0,m.useEffect)(()=>{if(!n.current)return;let e=e=>{n.current&&(n.current.textContent=(e/1e3).toString())};e(t);let a=t,r=setInterval(()=>{if((a-=1e3)<0){clearInterval(r),null==s||s();return}e(a)},1e3);return l.current=()=>clearInterval(r),()=>{var e;return null==(e=l.current)?void 0:e.call(l)}},[t,s]),(0,a.jsx)("span",{ref:n})}function z(){let{t:e}=(0,j.Bd)("base"),t={title:e("session-reset.title","Are you still there?"),reset:e("session-reset.reset","Reset my chats"),confirm:e("session-reset.confirm","I'm still here")},[s,n]=function(e){let{timeToWarningMs:t,gracePeriodMs:s}=e,[a,n]=(0,m.useState)("active"),[l,r]=(0,m.useState)(!0),i=(0,m.useCallback)(()=>{n("active"),r(!0)},[]);return(0,m.useEffect)(()=>{let e,a,o=()=>{l&&(clearTimeout(e),clearTimeout(a),i(),e=setTimeout(()=>{n("warning"),r(!1)},t))},c=["mousedown","mousemove","keypress","scroll","touchstart"];return l?(c.forEach(e=>{document.addEventListener(e,o,!0)}),e=setTimeout(()=>{n("warning"),r(!1)},t)):a=setTimeout(()=>{n("inactive")},s),()=>{l?(c.forEach(e=>{document.removeEventListener(e,o,!0)}),clearTimeout(e)):clearTimeout(a)}},[t,s,i,l]),[a,i]}({timeToWarningMs:3e5,gracePeriodMs:6e4}),r=(0,g.useSession)(),i=(0,m.useCallback)(()=>{r.clearUser(),window.location.reload(),localStorage.clear(),function(){for(let e of document.cookie.split(";")){let t=e.indexOf("="),s=t>-1?e.substr(0,t):e;document.cookie=s+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}}()},[r]);(0,m.useEffect)(()=>{"inactive"===s&&i()},[s]);let o=(0,m.useCallback)(()=>{n()},[]),c=(0,D.Di)();if("active"===s)return null;let d=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.x6,{ns:"base",i18nKey:"Your chats will be deleted after",defaults:"Your chats will be deleted after {{minutes}} minutes of inactivity. You have <timer/> seconds remaining.",components:{timer:(0,a.jsx)("span",{className:"text-sunset",children:(0,a.jsx)(R,{startTimeMs:6e4})})},values:{minutes:Math.ceil(5)}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)(j.x6,{ns:"base",i18nKey:"To permanently save",children:["To permanently save your chats you must ",(0,a.jsx)("b",{children:"sign in"}),"."]})]});return c?(0,a.jsx)(P._s,{dismissible:!1,open:"warning"===s,children:(0,a.jsxs)(P.zj,{children:[(0,a.jsx)(P.BE,{children:(0,a.jsx)(P.gk,{children:t.title})}),(0,a.jsx)("div",{className:"p-4 text-primary",children:d()}),(0,a.jsxs)(P.tb,{children:[(0,a.jsx)(l.$n,{variant:"ghost",onClick:i,children:t.reset}),(0,a.jsx)(l.$n,{onClick:o,variant:"primary",children:t.confirm})]})]})}):(0,a.jsx)(C,{open:"warning"===s,children:(0,a.jsxs)(_,{children:[(0,a.jsxs)(A,{children:[(0,a.jsx)(I,{children:t.title}),(0,a.jsx)(M,{className:"text-primary",children:d()})]}),(0,a.jsxs)(E,{children:[(0,a.jsx)(O,{onClick:i,children:t.reset}),(0,a.jsx)(T,{onClick:o,children:t.confirm})]})]})})}var L=s(61884),F=s(13504),B=s(4295),$=s(98100);let G=()=>{let[e,t]=(0,m.useState)(!0);return(0,m.useEffect)(()=>{let e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),e};var V=s(35021),U=s(38541),W=s.n(U),K=s(49972),H=s(36936),Y=s(29938),J=s(44347),q=(s(58),s(39116)),X=s(74995),Q=s(50460),Z=s(51745),ee=s(33846);let et=e=>{let{children:t,inactivityDelay:s,fadeDuration:n}=e,[l,r]=(0,m.useState)(!1),i=(0,m.useRef)(null);return((0,m.useEffect)(()=>{let e=()=>{i.current&&clearTimeout(i.current),r(!1),i.current=setTimeout(()=>{r(!0)},s)},t=["mousedown","mousemove","keypress","scroll","touchstart","click"];return t.forEach(t=>{document.addEventListener(t,e)}),e(),()=>{i.current&&clearTimeout(i.current),t.forEach(t=>{document.removeEventListener(t,e)})}},[s]),l)?(0,a.jsx)(ee.P.div,{variants:{hidden:{opacity:0,transition:{duration:n/1e3}},visible:{opacity:1,transition:{duration:n/1e3}}},initial:"hidden",animate:"visible",exit:"hidden",children:t},"fade-in-on-inactivity"):null};var es=s(24994),ea=s(91102),en=s(20337),el=s(4890),er=s(17823),ei=s(39489),eo=s(10953);let ec=(0,el.v)()((0,er.Zr)(e=>({isDismissed:!1,setIsDismissed:t=>e({isDismissed:t})}),{name:"open-in-app-dialog"}));function ed(){let{t:e}=(0,j.Bd)("base"),t=(0,r.h)(),{client:s}=(0,en.useStatsigClient)(),n=ec(X.A("isDismissed")),o=ec(X.A("setIsDismissed")),{os:c}=(0,ea.c)(),{APP_STORE_URL:d,GOOGLE_PLAY_URL:u}=(0,ei.v)(),[h,x]=(0,m.useState)(!!t.SHOW_OPEN_IN_APP_DIALOG_EVERY_TIME||!n),f=(0,m.useCallback)(()=>{if(s.logEvent("clicked_open_in_app",c,{location:"open-in-app-dialog"}),!t.SHOW_OPEN_IN_APP_DIALOG_DOWNLOAD_DEFAULT){let e=document.createElement("iframe");e.src=window.location.href,e.style.display="none",e.height="0",e.width="0",document.body.appendChild(e)}setTimeout(function(){document.hasFocus()&&(s.logEvent("redirected_to_store",c,{location:"open-in-app-dialog"}),"ios"===c?window.location.href=d:window.location.href=u)},500)},[s,c,d,u,t]),p=(0,m.useCallback)(e=>{if(e)return x(!0);s.logEvent("clicked_open_in_app_not_now",c,{location:"open-in-app-dialog"}),o(!0),x(!1)},[o,x,s,c]);return(0,a.jsxs)(es.R,{open:h,setOpen:p,contentClassName:(0,i.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-sm","flex flex-col","md:overflow-hidden","px-6 py-6"),children:[(0,a.jsx)("div",{className:"w-full flex justify-center pt-4",children:(0,a.jsx)(eo.kk,{className:"w-32 h-14"})}),(0,a.jsxs)("div",{className:"mb-2 sm:text-center",children:[(0,a.jsx)("div",{className:"sr-only",children:e("open-in-app-dialog.title","Open in App Dialog")}),(0,a.jsx)("div",{className:"mb-1 w-full flex justify-center text-secondary text-sm",children:e("Get the full Grok experience","Get the full Grok experience")})]}),(0,a.jsx)(l.$n,{asChild:!0,variant:"primary",size:"lg",onClick:f,children:(0,a.jsx)("div",{children:t.SHOW_OPEN_IN_APP_DIALOG_DOWNLOAD_DEFAULT?e("Download App","Download App"):e("Open in App","Open in App")})}),(0,a.jsx)(l.$n,{asChild:!0,variant:"secondary",size:"lg",onClick:()=>p(!1),children:(0,a.jsx)("div",{children:e("Not now","Not now")})})]})}var eu=s(61349),em=s(77334),eh=s(42557),ex=s(18538),ef=s(41284),ep=s(58655);let eg=e=>{let{className:t,children:s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("border border-border-l2 h-10 px-3.5 py-2 rounded-full","text-sm text-fg-secondary inline-flex flex-row items-center gap-1","mt-0.5","w-fit",t),children:s})};function ev(e){let{subscriptionType:t}=e,{t:s}=(0,j.Bd)("base");return"PremiumPlus"===t?(0,a.jsx)(eg,{className:"text-[#bb992e] dark:text-[#C4A06B]",children:s("Premium+","Premium+")}):"Premium"===t?(0,a.jsx)(eg,{className:"text-[#426db1] dark:text-[#7F93B0]",children:s("Premium","Premium")}):"Free"===t||""===t?(0,a.jsx)(eg,{children:s("Basic","Basic")}):null}let eb="/link-x-account-error";var ej=s(43213);let ey=function(e){let{isActive:t,initialSpeed:s=800,targetSpeed:a=360,transitionDuration:n=2500}=e,l=(0,m.useRef)(null),r=(0,m.useRef)({current:0,startTime:0,initialSpeed:s,targetSpeed:a,transitionDuration:n});return(0,ej.N)((e,s)=>{if(t&&l.current){let t=r.current;0===t.startTime&&(t.startTime=e);let a=t.targetSpeed,n=e-t.startTime;if(n<t.transitionDuration){let e=1-Math.pow(1-n/t.transitionDuration,3);a=t.initialSpeed-(t.initialSpeed-t.targetSpeed)*e}let i=s/1e3*a;t.current+=i,l.current.style.transform="rotate(".concat(t.current,"deg)")}else 0!==r.current.startTime&&(r.current.startTime=0)}),l};var ek=s(24429),ew=s(53027),eC=s(26067),eN=s(93587),eS=s(31643),e_=s(58020);function eA(e){let{children:t,className:s}=e,n=(0,i.cn)("text-sm font-medium",s);return(0,a.jsx)("div",{className:n,children:t})}function eE(e){let{children:t}=e;return(0,a.jsx)("div",{className:"text-xs text-secondary text-pretty",children:t})}function eI(e){let{children:t,action:s,hidden:n,className:l}=e,r=(0,m.useId)();if(n)return null;let o=(0,m.isValidElement)(s)?(0,m.cloneElement)(s,{"aria-labelledby":r}):s;return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between w-full gap-4 px-3",children:[(0,a.jsx)("div",{className:(0,i.cn)("max-w-sm min-w-0",l),id:r,children:t}),(0,a.jsx)("div",{className:"text-right min-w-24",children:o})]})}function eM(e){var t,s;let{onManage:n}=e,{t:r}=(0,j.Bd)("settings"),i=(0,eh.wV)(),o=null==(t=i.user)?void 0:t.xSubscriptionType,c=(0,q.useRouter)(),d=(0,eS.jE)(),{isSuperGrokUser:u}=(0,ek.Q2)(),h=(0,eS.n_)({mutationFn:async()=>{let e=window.location.host,t="".concat(e.startsWith("localhost")?"http://":"https://").concat(e).concat("/api/link-x-account/"),s=await (0,ex.E)(t,"X");c.push(s||eb)},onError:e=>{(0,b.vV)("settings-account",e),c.push(eb)}}),x=(0,eS.n_)({mutationFn:async()=>eN.Ns.authFrontendRefreshXSubscriptionStatus({body:{}}).then(()=>Promise.all([d.invalidateQueries({queryKey:[ew.Q4]}),i.refreshSession()])),onError:async()=>{(0,b.vV)("settings-account","Failed to refresh X subscription status")}}),f=(0,m.useMemo)(()=>{var e;return!!(null==(e=i.user)?void 0:e.xUserId)},[i.user]),p=ey({isActive:x.isPending});return(0,a.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[i.user&&(0,a.jsx)(eI,{action:(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,className:"group",onClick:n,children:r("settings.account.manage","Manage")}),children:(0,a.jsxs)("div",{className:"flex flex-row items-center w-full gap-2",children:[(0,a.jsx)(ef.e,{className:"w-12 h-12",user:i.user}),(0,a.jsxs)("div",{className:"p-1 min-w-0 text-sm",children:[(0,a.jsx)(eA,{children:"".concat(i.user.givenName," ").concat(i.user.familyName)}),(0,a.jsx)("div",{className:"text-secondary truncate",children:i.user.email})]})]})}),i.user&&f&&(0,a.jsx)(eI,{action:(0,a.jsx)(ev,{subscriptionType:o}),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eA,{children:r("settings.account.x-status","\uD835\uDD4F Status")}),(0,a.jsx)(l.gx,{tooltipContent:r("settings.account.refresh-x-subscription","Refresh \uD835\uDD4F Subscription Status"),tooltipContentProps:{side:"right"},variant:"ghostSecondary","aria-label":"Refresh X subscription status",rounded:!0,size:"iconXs",disabled:x.isPending,onClick:()=>x.mutate(),children:(0,a.jsx)("div",{ref:p,style:{transformOrigin:"center"},children:(0,a.jsx)(em.V$,{className:"size-4"})})})]})}),i.user&&!f&&(0,a.jsx)(eI,{action:(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,disabled:h.isPending,onClick:()=>h.mutate(),children:r("settings.account.connect","Connect")}),children:(0,a.jsx)(eA,{children:r("settings.account.connect-x","Connect your \uD835\uDD4F Account")})}),(0,a.jsx)(eT,{}),(0,a.jsxs)("div",{className:"mt-auto",children:[i.user&&(0,a.jsx)("div",{className:"text-xs flex flex-row gap-1 p-3 text-secondary opacity-30",children:null==(s=i.user)?void 0:s.userId}),!u&&(0,a.jsx)(F._B,{})]})]})}function eT(){let{t:e,i18n:t}=(0,j.Bd)("settings"),s=(0,J.C$)(X.A("selectedLanguage")),[n,r]=(0,m.useState)(!1),i=(0,m.useMemo)(()=>s||t.languages.find(e=>e in eC.IV)||eC.GG,[t.languages,s]),o=(0,m.useCallback)(e=>{t.changeLanguage(e).then(()=>{J.C$.getState().setSelectedLanguage(e),r(!1)}).catch(e=>(0,b.vV)("settings-account",e))},[t]),c=(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,onClick:()=>r(!0),children:e("settings.account.change","Change")});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eI,{action:c,children:(0,a.jsxs)(eA,{className:"flex items-center gap-2",children:[e("settings.account.language","Language"),(0,a.jsx)(e_.A,{size:16,className:"text-secondary"})]})}),(0,a.jsx)(ep.C,{locale:i,open:n,onLocaleChange:o,onOpenChange:r})]})}var eO=s(88119),eP=s(35819);function eD(){let{t:e}=(0,j.Bd)("settings"),t=(0,r.h)(),s=(0,J.C$)(X.A("userSettings")),n=(0,J.C$)(X.A("fetchSetPreference"));return(0,a.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,a.jsx)(eO.M,{}),(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.displayUserMessageMarkdown,onCheckedChange:e=>n("displayUserMessageMarkdown",e)}),children:(0,a.jsx)(eA,{children:e("Display Your Message In Markdown","Display Your Message In Markdown")})}),(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.autoWrapLongLinesCode,onCheckedChange:e=>n("autoWrapLongLinesCode",e)}),children:(0,a.jsx)(eA,{children:e("Wrap Long Lines For Code Blocks By Default","Wrap Long Lines For Code Blocks By Default")})}),(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.showConversationPreviews,onCheckedChange:e=>n("showConversationPreviews",e)}),children:(0,a.jsx)(eA,{children:e("Show Conversation Previews in History","Show Conversation Previews in History")})}),(null==t?void 0:t.ENABLE_CONVERSATION_TABS)&&(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.showActiveTabs,onCheckedChange:e=>n("showActiveTabs",e)}),children:(0,a.jsx)(eA,{children:e("Show Active Conversation Tabs","Show Active Conversation Tabs")})})]})}function eR(){let{t:e}=(0,j.Bd)("settings"),t=(0,r.h)(),s=(0,J.C$)(X.A("userSettings")),n=(0,J.C$)(X.A("fetchSetPreference"));return(0,a.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.autoOpenSearchResults,onCheckedChange:e=>n("autoOpenSearchResults",e)}),children:(0,a.jsx)(eA,{children:e("Automatically Open Search Results","Automatically Open Search Results")})}),(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.disableAutoScroll,onCheckedChange:e=>n("disableAutoScroll",e)}),children:(0,a.jsx)(eA,{children:e("Disable Auto Scroll","Disable Auto Scroll")})}),(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.showFollowUpSuggestions,onCheckedChange:e=>n("showFollowUpSuggestions",e)}),children:(0,a.jsx)(eA,{children:e("Show Follow Up Suggestions","Show Follow Up Suggestions")})}),(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.hideArtifacts,onCheckedChange:e=>n("hideArtifacts",e)}),children:(0,a.jsx)(eA,{children:e("settings-tab.behavior.artifacts.disable","Disable Sidebar Editor For Code And Documents")})}),(null==t?void 0:t.ENABLE_BROWSER_NOTIFICATIONS)&&(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.browserNotificationsEnabled,onCheckedChange:e=>n("browserNotificationsEnabled",e)}),children:(0,a.jsx)(eA,{children:e('Notify When "Think" Or "DeepSearch" Completes','Notify When "Think" Or "DeepSearch" Completes')})}),(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.autoDetectWebpageAttachments,onCheckedChange:e=>n("autoDetectWebpageAttachments",e)}),children:(0,a.jsx)(eA,{children:e("settings.behavior.auto-detect-webpage-attachments",{defaultValue:"Read Webpage Content of Pasted URLs"})})}),(null==t?void 0:t.ENABLE_BRAVE_COMPLETIONS)&&(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:s.preferences.disableTypeahead,onCheckedChange:e=>n("disableTypeahead",e)}),children:(0,a.jsx)(eA,{children:e("settings.behavior.disable-typeahead",{defaultValue:"Disable Typeahead Suggestions"})})})]})}function ez(e){let{className:t}=e,{t:s}=(0,j.Bd)("base");return(0,a.jsx)("span",{className:(0,i.cn)("inline-flex items-center justify-center rounded-full bg-gray-100 px-1.5 py-0.5 text-[9px] font-medium text-gray-800 border border-grey-200",t),children:s("beta","beta")})}var eL=s(68332),eF=s(24734);function eB(e){return!!e&&e$.has(e)}let e$=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","GB"]);var eG=s(32171),eV=s.n(eG);function eU(e){var t,s,n,o;let{onManage:c,onDelete:d,onNavigate:u}=e,{t:h}=(0,j.Bd)("settings"),x=(0,r.h)(),{client:f}=(0,en.useStatsigClient)(),p=(0,eF.K)(),g=(0,eh.wV)(),v=(0,eL.o)(),b=(0,J.C$)(X.A("userSettings")),y=(0,J.C$)(X.A("fetchSetUserSettings")),[k,w]=(0,m.useState)(!1),C=(0,m.useCallback)(()=>{c()},[]),N=(0,m.useCallback)(()=>{d()},[]),S=(0,m.useMemo)(()=>eB(g.countryCode),[g.countryCode]),{data:_}=(0,ek.Q2)(),A=null==_||null==(t=_.subscriptions)?void 0:t.some(e=>!!e.enterprise),E=(null==(n=g.user)||null==(s=n.email)?void 0:s.endsWith("@x.ai"))||!A;return(0,a.jsxs)("div",{className:"flex flex-col w-full gap-6",children:[E&&(0,a.jsxs)(eI,{action:(0,a.jsx)(eP.d,{checked:!b.excludeFromTraining,onCheckedChange:e=>{var t,s;f.logEvent("set_exclude_from_training",String(!e),{userId:null!=(s=null==(t=g.user)?void 0:t.userId)?s:""}),y({...b,excludeFromTraining:!e}).catch(e=>{p("settings-data:set_exclude_from_training",e,h("settings-data.error","Failed to update settings"))})}}),children:[(0,a.jsx)(eA,{children:h("Improve the Model","Improve the Model")}),(0,a.jsx)(eE,{children:h("Improve the Model.description","By allowing your data to be used for training our models, you help enhance your own experience and improve the quality of the model for all users. We take measures to ensure your privacy is protected throughout the process.")})]}),E&&(null==(o=g.user)?void 0:o.xUserId)&&(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:b.allowXPersonalization,onCheckedChange:e=>{var t,s;f.logEvent("set_allow_x_personalization",String(e),{userId:null!=(s=null==(t=g.user)?void 0:t.userId)?s:""}),y({...b,allowXPersonalization:e}).catch(e=>{p("settings-data:set_allow_x_personalization",e,h("settings-data.error","Failed to update settings"))})}}),children:(0,a.jsxs)("div",{children:[(0,a.jsx)(eA,{children:h("Personalize Grok using X","Personalize Grok using \uD835\uDD4F")}),(0,a.jsxs)(eE,{children:[h("Personalize Grok using X.description","Allow your \uD835\uDD4F data to be used for personalizing and enhancing your Grok experience. This data includes:")," ",h("Personalize Grok using X.permissions","\uD835\uDD4F user profile, \uD835\uDD4F account information and location, \uD835\uDD4F settings, \uD835\uDD4F preferences, posts viewable on your \uD835\uDD4F account.")]})]})}),x.ENABLE_MEMORY_TOGGLE&&E&&g.user&&(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{checked:b.enableMemory,onCheckedChange:e=>{var t,s;f.logEvent("set_enable_memory",String(e),{userId:null!=(s=null==(t=g.user)?void 0:t.userId)?s:""}),y({...b,enableMemory:e}).catch(e=>{p("settings-data:set_enable_memory",e,h("settings-data.error","Failed to update settings"))})},disabled:S&&!b.enableMemory}),className:(0,i.cn)(S&&"opacity-50"),children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(eA,{className:"flex flex-row items-center gap-1.5",children:[h("Personalize Grok with your conversation history","Personalize Grok with your conversation history"),(0,a.jsx)(ez,{})]}),(0,a.jsxs)(eE,{children:[h("Personalize Grok with your conversation history.description","Allow Grok to remember details from your previous conversations. You can delete individual conversations to forget the associated details. Temporary chats are never stored."),S&&(0,a.jsxs)("span",{className:"italic",children:[" ",h("Personalize Grok with your conversation history.gdpr","This feature is not available in your region.")]})]})]})}),(0,a.jsx)("div",{className:"h-px w-full bg-border"}),g.user&&(0,a.jsx)(eI,{action:(0,a.jsx)(eV(),{href:"/files",children:(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,onClick:()=>{u()},children:h("settings-data.file-browser.action","Manage")})}),children:(0,a.jsxs)("div",{children:[(0,a.jsx)(eA,{className:"flex flex-row items-center gap-1.5",children:h("settings-data.file-browser.title","See Files and Assets")}),(0,a.jsx)(eE,{children:h("settings-data.file-browser.description","See all the files and assets you have uploaded to Grok. You can also delete them here.")})]})}),g.user&&(0,a.jsx)(eI,{action:(0,a.jsx)(eV(),{href:"/share-links",children:(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,onClick:()=>{u()},children:h("settings-data.share-links.action","Manage")})}),children:(0,a.jsxs)("div",{children:[(0,a.jsx)(eA,{className:"flex flex-row items-center gap-1.5",children:h("settings-data.share-links.title","See Share Links")}),(0,a.jsx)(eE,{children:h("settings-data.share-links.description","See all the share links you have created. You can also delete them and revoke access here.")})]})}),g.user&&(0,a.jsx)(eI,{action:(0,a.jsx)(eV(),{href:"/deleted-conversations",children:(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,onClick:()=>{u()},children:h("settings-data.deleted-conversations.action","Manage")})}),children:(0,a.jsxs)("div",{children:[(0,a.jsx)(eA,{className:"flex flex-row items-center gap-1.5",children:h("settings-data.deleted-conversations.title","See Deleted Conversations")}),(0,a.jsx)(eE,{children:h("settings-data.deleted-conversations.description","View and restore conversations that you have deleted. Deleted conversations are permanently removed after 30 days.")})]})}),(0,a.jsx)(eI,{action:(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,onClick:C,children:h("Export","Export")}),children:(0,a.jsxs)("div",{children:[(0,a.jsx)(eA,{children:h("Export Account Data","Export Account Data")}),(0,a.jsx)(eE,{children:h("Export Account Data.description","You can download all data associated with your account below. This data includes everything stored in all xAI products.")})]})}),(0,a.jsx)("div",{className:"h-px w-full bg-border"}),(0,a.jsxs)(eI,{action:(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,btnColor:k?"danger":"default",onBlur:()=>w(!1),onClick:()=>{k?(K.w.getState().fetchSoftDeleteAllConversations().catch(()=>{console.error(h("Failed to delete conversations","Failed to delete conversations"))}),v.routeToConversation(void 0),w(!1)):w(!0)},children:k?h("Are you sure?","Are you sure?"):h("Delete","Delete")}),children:[(0,a.jsx)(eA,{children:h("Delete All Conversations","Delete All Conversations")}),(0,a.jsx)(eE,{children:h("Delete All Conversations.description","Delete all of your conversation data.")})]}),(0,a.jsxs)(eI,{action:(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,btnColor:"danger",className:"max-w-full",onClick:N,children:(0,a.jsx)("span",{className:"truncate",children:h("Permanently Delete","Delete")})}),children:[(0,a.jsx)(eA,{children:h("Delete Account","Delete Account")}),(0,a.jsx)(eE,{children:h("Delete Account.description","Permanently delete your account and associated data from the xAI platform. Deletions are immediate and cannot be undone.")})]})]})}var eW=s(97325),eK=s(5790),eH=s(91772),eY=s(74933),eJ=s(96499),eq=s(37931),eX=s(69648);let eQ=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});eQ.displayName="Textarea";var eZ=s(80295),e0=s(23556),e1=s(77244);let e2=["web_search","google_web_search","bing_web_search","browse_page_with_js","browse_page_no_js"],e3={"X Tools":["x_search","x_keyword_search","x_semantic_search","get_x_user_handle","get_x_user_timeline","get_x_bookmarks","get_x_liked_posts","get_x_user_profile_pic_description","get_top_us_news_from_x_trends","x_post_lookup"],"Render Tools":["render_x_posts","render_x_users","render_card"]};function e5(){var e,t,s,n,i,o,c,d,u,h;let x,f=(0,r.h)(),[p,g]=(0,e1.A)("open_danger_mode",!1),[v,b]=(0,e0.M)("upsell-small-closed",!1),[j,y]=(0,e0.M)(Z.Sp,!1),k=(0,Z.BT)(),{models:w,defaultProModelId:C}=(0,$.GB)(),N=(0,eW.aP)(e=>e.activeModelId)||C,S=(0,eW.aP)(e=>e.setActiveModelId),_=(0,eK.iV)(e=>e.modelConfigOverrideTab),A=(0,eK.iV)(e=>e.setModelConfigOverrideTab),E=(0,J.C$)(e=>e.modelConfigOverrideByModel)[_||"undefined"],I=null!=(u=(0,J.C$)(e=>e.isToolComposer2))?u:f.DEFAULT_USE_TOOL_COMPOSER2;(0,m.useEffect)(()=>{N&&A(N)},[N,A]);let[M,T]=(0,eZ.s)(null==E||null==(e=E.promptMap)?void 0:e.toolUseFc,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".promptMap.toolUseFc"),e),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[O,P]=(0,eZ.s)(null==E||null==(t=E.promptMap)?void 0:t.noToolUse,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".promptMap.noToolUse"),e),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[D,R]=(0,eZ.s)(null==E||null==(s=E.promptMap)?void 0:s.toolUseSummarizer,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".promptMap.toolUseSummarizer"),e),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[z,L]=(0,eZ.s)(null==E||null==(n=E.modelMap)?void 0:n.noToolUse,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".modelMap.noToolUse"),e),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[F,B]=(0,eZ.s)(null==E||null==(i=E.modelMap)?void 0:i.toolUse,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".modelMap.toolUse"),e),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[G,V]=(0,eZ.s)(null==E||null==(o=E.modelMap)?void 0:o.toolUseSummarizer,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".modelMap.toolUseSummarizer"),e),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[U,K]=(0,eZ.s)(null==E?void 0:E.useSingleModelEverything,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".useSingleModelEverything"),e),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[H,Y]=(0,eZ.s)(null==E||null==(c=E.modelMap)?void 0:c.imageGenModel,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".modelMap.imageGenModel"),e),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[q,X]=(0,eZ.s)(null==E||null==(d=E.modelMap)?void 0:d.imageEditModel,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".modelMap.imageEditModel"),e),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[Q,ee]=(0,eZ.s)(null==E?void 0:E.tools,(0,m.useCallback)(e=>{if(!_)return;let t={...J.C$.getState().modelConfigOverrideByModel};W().set(t,"".concat(_,".tools"),ea(null!=e?e:{})),J.C$.getState().setModelConfigOverrideByModel(t)},[_])),[et,es]=(0,eZ.s)(null!=(h=null==E?void 0:E.useToolOverrides)&&h,(0,m.useCallback)(e=>{var t,s;if(!_)return;let a=J.C$.getState().modelConfigOverrideByModel,n={...a};W().set(n,"".concat(_,".useToolOverrides"),e);let l=ea(null!=(s=null==(t=a[_])?void 0:t.tools)?s:{});W().set(n,"".concat(_,".tools"),l),J.C$.getState().setModelConfigOverrideByModel(n)},[_])),ea=e=>{let t={...e};for(let e of Object.values(J.K2))e in t||(t[e]=!1);return t};return f.SHOW_MODEL_CONFIG_OVERRIDE?(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{id:"tool_composer",checked:I,onCheckedChange:e=>{J.C$.getState().setIsToolComposer2(e)}}),children:(0,a.jsx)(eJ.J,{htmlFor:"tool_composer",children:"Tool Composer"})}),k&&(0,a.jsx)(eI,{action:(0,a.jsx)(eP.d,{id:"debug_menu",checked:!j,onCheckedChange:e=>y(!e)}),children:(0,a.jsx)(eJ.J,{htmlFor:"debug_menu",children:"Debug Menu"})}),p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eX.w,{orientation:"horizontal",className:"my-6"}),(0,a.jsx)(eI,{children:(0,a.jsx)(eA,{className:"font-semibold",children:"Model Config Override"})}),(0,a.jsxs)(eI,{children:[(0,a.jsx)(eJ.J,{htmlFor:"model-select",children:"Active Model"}),(0,a.jsxs)(eq.l6,{value:N,onValueChange:e=>{S(e),A(e)},children:[(0,a.jsx)(eq.bq,{id:"model-select",children:(0,a.jsx)(eq.yv,{placeholder:"Select a model"})}),(0,a.jsx)(eq.gC,{children:w.map(e=>(0,a.jsx)(eq.eb,{value:e.modelId,children:e.name},e.modelId))})]})]}),(0,a.jsx)(eI,{action:(0,a.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,a.jsx)(eP.d,{id:"use_tool_overrides",checked:et,onCheckedChange:es})}),children:(0,a.jsx)(eJ.J,{htmlFor:"use_tool_overrides",children:"Use tool overrides"})}),et&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eI,{className:"ms-4 flex flex-row items-center gap-2",children:[(0,a.jsx)(eJ.J,{htmlFor:"web_search_mode",children:"web_search"}),(0,a.jsxs)(eq.l6,{value:(null==(x=Q)?void 0:x.web_search)?"brave":(null==x?void 0:x.google_web_search)?"google":(null==x?void 0:x.bing_web_search)?"bing":"off",onValueChange:e=>{let t={...Q};t.web_search="brave"===e,t.google_web_search="google"===e,t.bing_web_search="bing"===e,ee(t)},disabled:!et,children:[(0,a.jsx)(eq.bq,{id:"web_search_mode",children:(0,a.jsx)(eq.yv,{placeholder:"Select mode"})}),(0,a.jsxs)(eq.gC,{children:[(0,a.jsx)(eq.eb,{value:"brave",children:"Brave"}),(0,a.jsx)(eq.eb,{value:"google",children:"Google"}),(0,a.jsx)(eq.eb,{value:"bing",children:"Bing"}),(0,a.jsx)(eq.eb,{value:"off",children:"Off"})]})]})]}),Object.values(J.K2).filter(e=>!Object.values(e3).flat().includes(e)&&!e2.includes(e)).map(e=>(0,a.jsx)("div",{className:"ms-8",children:(0,a.jsx)(e4,{groupName:e,toolKeys:[e],toolOverrides:Q,setToolOverrides:ee,disabled:!et},e)},e)),(0,a.jsxs)(eI,{className:"ms-4 flex flex-row items-center gap-2",children:[(0,a.jsx)(eJ.J,{htmlFor:"browse_page_mode",children:"browse_page"}),(0,a.jsxs)(eq.l6,{value:(e=>{let t=null==e?void 0:e.browse_page_no_js;return(null==e?void 0:e.browse_page_with_js)?"with_js":t?"no_js":"off"})(Q),onValueChange:e=>{let t={...Q};"off"===e?(t.browse_page_no_js=!1,t.browse_page_with_js=!1):"no_js"===e?(t.browse_page_no_js=!0,t.browse_page_with_js=!1):"with_js"===e&&(t.browse_page_no_js=!1,t.browse_page_with_js=!0),ee(t)},disabled:!et,children:[(0,a.jsx)(eq.bq,{id:"browse_page_mode",className:"w-[200px]",children:(0,a.jsx)(eq.yv,{placeholder:"Select mode"})}),(0,a.jsxs)(eq.gC,{children:[(0,a.jsx)(eq.eb,{value:"no_js",children:"On (No JS)"}),(0,a.jsx)(eq.eb,{value:"with_js",children:"On (With JS)"}),(0,a.jsx)(eq.eb,{value:"off",children:"Off"})]})]})]}),Object.entries(e3).map(e=>{let[t,s]=e;return(0,a.jsx)("div",{className:"ms-8",children:(0,a.jsx)(e4,{groupName:t,toolKeys:s,toolOverrides:Q,setToolOverrides:ee,disabled:!et})},t)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(eJ.J,{className:"px-3",htmlFor:"tool_use_fc",children:"Tool Use FC Prompt"}),(0,a.jsx)(eQ,{id:"tool_use_fc",className:"bg-surface-l1",value:M||"",onChange:e=>T(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(eJ.J,{className:"px-3",htmlFor:"no_tool_use",children:"No Tool Use Prompt"}),(0,a.jsx)(eQ,{id:"no_tool_use",className:"bg-surface-l1",value:O||"",onChange:e=>P(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(eJ.J,{className:"px-3",htmlFor:"tool_use_summarizer",children:"Tool Use Summarizer Prompt"}),(0,a.jsx)(eQ,{id:"tool_use_summarizer",className:"bg-surface-l1",value:D||"",onChange:e=>R(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(eJ.J,{className:"px-3",htmlFor:"no_tool_use_model",children:"No Tool Use Model"}),(0,a.jsx)(eY.p,{id:"no_tool_use_model",className:"bg-surface-l1",value:z||"",onChange:e=>L(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(eJ.J,{className:"px-3",htmlFor:"tool_use_model",children:"Tool Use Model"}),(0,a.jsx)(eY.p,{id:"tool_use_model",className:"bg-surface-l1",value:F||"",onChange:e=>B(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(eJ.J,{className:"px-3",htmlFor:"tool_use_summarizer_model",children:"Tool Use Summarizer Model"}),(0,a.jsx)(eY.p,{id:"tool_use_summarizer_model",className:"bg-surface-l1",value:G||"",onChange:e=>V(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(eJ.J,{className:"px-3",htmlFor:"image_gen_model",children:"Image Gen Model"}),(0,a.jsx)(eY.p,{id:"image_gen_model",className:"bg-surface-l1",value:H||"",onChange:e=>Y(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(eJ.J,{className:"px-3",htmlFor:"image_edit_model",children:"Image Edit Model"}),(0,a.jsx)(eY.p,{id:"image_edit_model",className:"bg-surface-l1",value:q||"",onChange:e=>X(e.target.value)})]}),(0,a.jsx)(eI,{action:(0,a.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,a.jsx)(eP.d,{id:"use_single_model_everything",checked:U||!1,onCheckedChange:e=>K(e)})}),children:(0,a.jsx)(eJ.J,{htmlFor:"use_single_model_everything",children:"Use Single Model Everything"})}),(0,a.jsx)(eX.w,{orientation:"horizontal",className:"my-6"}),(0,a.jsx)(eI,{children:(0,a.jsx)(eA,{className:"font-semibold",children:"Local Storage"})}),(0,a.jsx)(eI,{action:(0,a.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,a.jsx)(eP.d,{checked:v,onCheckedChange:e=>b(e)})}),children:(0,a.jsx)(eA,{children:"Close SuperGrok Upsells"})}),(0,a.jsx)(eX.w,{orientation:"horizontal",className:"my-6"})]}):(0,a.jsx)(l.$n,{variant:"link",className:"text-red-500",onClick:()=>g(!0),children:"Open Unsafe Settings (All usage will be logged)"})]}):null}let e4=e=>{let{groupName:t,toolKeys:s,toolOverrides:n,setToolOverrides:l,disabled:r}=e;if(1===s.length){var i;let e=s[0];return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eH.S,{checked:null!=(i=null==n?void 0:n[e])&&i,onCheckedChange:t=>{l({...n,[e]:t})},disabled:r,"aria-label":e}),(0,a.jsx)(eJ.J,{children:t})]})}let o=s.every(e=>(null==n?void 0:n[e])===!0),c=s.some(e=>(null==n?void 0:n[e])===!0);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eH.S,{checked:c&&!o?"indeterminate":!!o,onCheckedChange:e=>{let t={...n};s.forEach(s=>{t[s]=e}),l(t)},disabled:r,"aria-label":t}),(0,a.jsx)(eJ.J,{className:"font-semibold",children:t})]}),s.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-center gap-2 ms-4 mt-1",children:[(0,a.jsx)(eH.S,{checked:null!=(t=null==n?void 0:n[e])&&t,onCheckedChange:t=>{l({...n,[e]:t})},disabled:r,"aria-label":e}),(0,a.jsx)(eJ.J,{children:e})]},e)})]})};var e6=s(99667),e8=s(82263);function e7(){let{t:e}=(0,j.Bd)("settings"),{client:t}=(0,en.useStatsigClient)(),s=(0,eF.K)(),n=(0,J.C$)(e=>e.userSettings.preferences.selectedSystemPromptId),l=(0,Y.jN)(e=>n?e.draftPromptById[n]:void 0),r=(0,Y.jN)(e=>n?e.byId[n]:void 0);(0,m.useEffect)(()=>{!l&&n&&Y.jN.getState().upsertDraftPrompt((null==r?void 0:r.prompt)||"",n)},[n]);let c=(0,m.useMemo)(()=>!!(0,Y.Uk)(n)&&(!r&&!!l||!!r&&l!==r.prompt),[l,r]),d=(0,Y.jN)(X.A("list")),u=(0,m.useMemo)(()=>{let e=d.find(e=>!e.isPreset);return e||Y.X4},[d]),h=(0,m.useMemo)(()=>d.filter(e=>e.isPreset),[d]),x=(0,m.useCallback)(e=>{let s=J.C$.getState();s.userSettings.preferences.selectedSystemPromptId===e.personalityId?(t.logEvent("settings-personality-selected","none",{personalityId:"none"}),s.userSettings.preferences.selectedSystemPromptId=void 0,s.fetchSetPreference("selectedSystemPromptId",void 0).catch(e=>{(0,b.vV)("settings-personality:handleSelectPersonality",e)})):(t.logEvent("settings-personality-selected",e.personalityId,{personalityId:e.personalityId}),s.userSettings.preferences.selectedSystemPromptId=e.personalityId,s.fetchSetPreference("selectedSystemPromptId",e.personalityId).catch(e=>{(0,b.vV)("settings-personality:handleSelectPersonality",e)}))},[t]),f=(0,m.useCallback)(t=>{let a=Y.jN.getState(),n=J.C$.getState(),l=n.userSettings.preferences.selectedSystemPromptId;if(!l)return;a.upsertDraftPrompt(t,l);let r=a.byId[l];r?a.fetchUpdatePersonality({personalityId:l,name:r.name,description:r.description,prompt:t,isPreset:!0}).catch(t=>{(0,b.vV)("settings-personality:handleSave",t),s("settings-personality:handleSave",t,e("settings-personality.error","Failed to update settings"))}):a.fetchCreatePersonality({...Y.X4,prompt:t}).then(e=>{n.fetchSetPreference("selectedSystemPromptId",e.personalityId).catch(e=>{(0,b.vV)("settings-personality:handleSelectPersonality",e)})}).catch(t=>{(0,b.vV)("settings-personality:handleSave",t),s("settings-personality:handleSave",t,e("settings-personality.error","Failed to update settings"))})},[n]),p=(0,m.useCallback)(()=>{let e=Y.jN.getState(),t=J.C$.getState().userSettings.preferences.selectedSystemPromptId;t&&e.upsertDraftPrompt((null==r?void 0:r.prompt)||"",t)},[r,n]),g=(0,m.useCallback)(e=>{let t=Y.jN.getState();n&&t.upsertDraftPrompt(e,n)},[n]),v=(0,m.useId)();return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"pl-4 pb-3 text-sm font-semibold",children:e("Customize Grok's Response","Customize Grok's Response")}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 px-1 mb-6",children:[u&&(0,a.jsx)(e9,{personality:u,isSelected:(0,Y.Uk)(n),handleSelectPersonality:x}),h.map(e=>(0,a.jsx)(e9,{personality:e,isSelected:n===e.personalityId,handleSelectPersonality:x},e.personalityId))]}),(0,a.jsxs)("div",{className:(0,i.cn)("flex-col gap-2 px-1",n?"flex":"hidden"),children:[(0,a.jsx)("div",{className:"flex items-center gap-2 pl-3 text-sm texâ€¹t-primary",children:(0,a.jsx)("label",{htmlFor:v,className:(0,i.cn)({"text-secondary":!(0,Y.Uk)(n)}),children:e("Custom Instructions","Custom Instructions")})}),(0,a.jsx)(e6.q,{value:l||"",onChange:g,isDirty:c,placeholder:e("How should Grok behave?","How should Grok behave?"),onSave:f,onReset:p,disabled:!(0,Y.Uk)(n),textareaId:v,autoFocus:!0})]}),(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-row gap-2 h-full px-8  items-center text-sm text-secondary",n?"hidden":"flex"),children:[(0,a.jsx)(o.A,{className:"size-4 shrink-0"}),e("Select an instruction set from above to customize Grok's responses.","Select an instruction set from above to customize Grok's responses.")]})]})}function e9(e){let{personality:t,isSelected:s,handleSelectPersonality:n}=e,r=(0,m.useCallback)(()=>{n(t)},[n,t]);return(0,a.jsxs)(l.$n,{className:(0,i.cn)("flex flex-col items-center justify-start gap-1","text-wrap text-start","w-full rounded-2xl flex-row p-3 group","ring-1 ring-inset ring-toggle-border hover:ring-card-border-focus hover:bg-card-hover text-primary","relative","min-h-16 pr-8",s&&"bg-button-ghost-hover pr-4"),variant:"none",size:"none",onClick:r,children:[(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("p",{className:"text-sm text-primary",children:t.name}),(0,a.jsx)("p",{className:"text-xs text-secondary",children:t.description})]}),s&&(0,a.jsx)(e8.A,{className:"size-4 text-secondary"})]})}var te=s(5663),tt=s(33231),ts=s(35008),ta=s(30590),tn=s(95332),tl=s(54552),tr=s(14267),ti=s(34352),to=s(64619),tc=s(86863),td=s(1005),tu=s(71766),tm=s(43724),th=s(16506),tx=s(92618),tf=s(99566);let tp=(0,tf.createServerReference)("7fd6a4ff92c210be49355085c49f5d43fe3822e8e4",tf.callServer,void 0,tf.findSourceMapURL,"deleteOauthConnector");var tg=s(43086),tv=s(95739),tb=s(81754),tj=s(89482);function ty(e){let{provider:t,connector:s,disconnectErrorMessage:n}=e,{t:r}=(0,j.Bd)("settings"),i=(0,eS.jE)(),{client:o}=(0,en.useStatsigClient)(),c=(0,tj.M4)(t),d=(0,tj.Tr)(t),u=(0,eS.n_)({mutationFn:async()=>{let e=window.location.host,s="SLACK"===t?tv.td:"",a="".concat(e.startsWith("localhost")?"".concat(s,"http://"):"https://").concat(e).concat(tv.WU),n=await (0,ex.E)(a,t);window.open(n||tv.CJ,"_blank","noopener noreferrer")},onError:e=>{(0,b.vV)("settings.connected-apps.connect",e,{provider:t}),window.open(tv.CJ,"_blank","noopener noreferrer")}}),m=(0,eS.n_)({mutationFn:async()=>{let e=null==s?void 0:s.oauthConnectorId;if(!e)return;await tp({oauthConnectorId:e});let t=["oauth-connectors"];await i.cancelQueries({queryKey:t}),i.setQueryData(t,t=>t.filter(t=>t.oauthConnectorId!==e))},onError:e=>{(0,b.vV)("settings.connected-apps.disconnect",e,{provider:t}),y.oR.error(n)}}),h=!!s,x=u.isPending||m.isPending,f=h?r("settings.connected-apps.disconnect","Disconnect"):r("settings.connected-apps.connect","Connect");return(0,a.jsx)(eI,{action:(0,a.jsx)(l.$n,{variant:"outline",rounded:!0,btnColor:h?"danger":"default",onClick:()=>{if(h){o.logEvent("disconnect-oauth-clicked",t,{location:"settings"}),m.mutate();return}o.logEvent("connect-oauth-clicked",t,{location:"settings"}),u.mutate()},disabled:x,children:x?(0,a.jsx)(tg.y,{size:"sm"}):f}),className:"text-md",children:(0,a.jsxs)(eA,{className:"flex flex-row items-center gap-1.5",children:[d&&(0,a.jsx)(d,{size:16}),c]})})}function tk(){let{t:e}=(0,j.Bd)("settings"),t=(0,r.h)(),{data:s}=(0,tb.H)(),n=null==s?void 0:s.find(e=>"GOOGLE_DRIVE"===e.provider),l=null==s?void 0:s.find(e=>"MICROSOFT_ONEDRIVE"===e.provider),i=null==s?void 0:s.find(e=>"SLACK"===e.provider),o=null==s?void 0:s.find(e=>"GOOGLE_CALENDAR"===e.provider);return(0,a.jsxs)("div",{className:"flex flex-col w-full h-full gap-6",children:[t.ENABLE_GCAL_INTEGRATION&&(0,a.jsx)(ty,{provider:"GOOGLE_CALENDAR",connector:o,disconnectErrorMessage:e("settings.connected-apps.failed-to-disconnect-google-calendar","Failed to disconnect Google Calendar")}),t.ENABLE_GOOGLE_DRIVE&&(0,a.jsx)(ty,{provider:"GOOGLE_DRIVE",connector:n,disconnectErrorMessage:e("settings.connected-apps.failed-to-disconnect-google-drive","Failed to disconnect Google Drive")}),t.ENABLE_MICROSOFT_ONEDRIVE&&(0,a.jsx)(ty,{provider:"MICROSOFT_ONEDRIVE",connector:l,disconnectErrorMessage:e("settings.connected-apps.failed-to-disconnect-microsoft-onedrive","Failed to disconnect Microsoft OneDrive")}),t.ENABLE_SLACK_INTEGRATION&&(0,a.jsx)(ty,{provider:"SLACK",connector:i,disconnectErrorMessage:e("settings.connected-apps.failed-to-disconnect-slack","Failed to disconnect Slack")})]})}var tw=s(70907);function tC(e){let{icon:t,text:s,tab:n}=e,r=(0,D.Di)(),o=(0,eK.iV)(X.A("tab")),c=(0,eK.iV)(X.A("setTab")),d="account"===n?o===n||!r&&"home"===o:o===n,u=(0,m.useCallback)(()=>{c(n)},[n]);return(0,a.jsxs)(l.$n,{variant:"ghost",size:"md",className:(0,i.cn)("group gap-3 px-4 justify-start h-10 hover:bg-card-hover min-w-40",r&&"text-lg h-10 flex",d&&"hover:text-primary text-primary [&>svg]:text-primary bg-button-ghost-hover"),onClick:u,children:[(0,a.jsx)(t,{size:18,className:(0,i.cn)("text-secondary group-hover:text-primary",{"text-primary":d})})," ",s,r&&(0,a.jsx)(tw.A,{className:"text-secondary !ml-auto",size:18})]})}function tN(e){let{tab:t}=e,{t:s}=(0,j.Bd)("settings");switch((0,D.Di)()?t:"home"){case"account":return s("settings-tab.account","Account");case"appearance":return s("settings-tab.appearance","Appearance");case"chat":return s("settings-tab.chat","Chat");case"personality":return s("settings-tab.personality","Personality");case"data":return s("settings-tab.data","Data Controls");case"billing":return s("settings-tab.billing","Billing");case"dev":return s("settings-tab.dev","Dev");case"behavior":return s("settings-tab.behavior","Behavior");case"connected-apps":return s("settings-tab.connected-apps","Connected Apps");default:return s("settings-tab.home","Settings")}}let tS=()=>{let{t:e}=(0,j.Bd)("settings"),t=(0,D.Di)(),s=(0,eK.iV)(X.A("tab")),n=(0,eK.iV)(X.A("setTab")),{resolvedTheme:o}=(0,th.D)(),c=(0,eK.iV)(X.A("open")),d=(0,eK.iV)(X.A("setOpen")),u=(0,r.h)(),h=(0,eh.wV)(),{ACCOUNT_URL:x}=(0,ei.v)(),f=(0,m.useCallback)(()=>{window.open(x+"/account?redirect=grok-com&theme=".concat(o),"_blank")},[o,x]),p=(0,m.useCallback)(()=>{window.location.assign(x+"/account?redirect=grok-com&theme=".concat(o))},[o,x]),g=(0,m.useCallback)(()=>{d(!1)},[d]),{client:v}=(0,en.useStatsigClient)();(0,tt.v)(te.cZ,e=>{e.preventDefault(),e.stopPropagation(),v.logEvent("pressed_cmd_,"),d(!c)},[c,d,v]);let{isSuperGrokUser:b}=(0,ek.Q2)(),y=(0,eK.iV)(X.A("expanded")),k=(0,m.useCallback)(()=>{let{toggleExpanded:e}=eK.iV.getState();e()},[]);return(0,a.jsx)(es.R,{open:c,setOpen:d,contentClassName:(0,i.cn)("focus:outline-0 focus-within:outline-0 gap-2 bg-background rounded-3xl",y?"h-[90%] w-[80%]":"md:w-[calc(100%-2rem)] max-w-3xl md:min-h-[420px] h-[calc(100dvh-64px)] md:h-3/5","flex flex-col md:overflow-hidden"),headerClassName:"relative flex-shrink-0 px-6 pt-5 pb-2 min-h-10",titleClassName:(0,i.cn)("text-xl text-left","flex flex-row items-center",t&&"home"!==s,t?"justify-center":"justify-between"),title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tN,{tab:s}),!t&&(0,a.jsx)(l.$n,{className:"-mt-2 -mr-2",variant:"ghost",title:e("Close","Close"),size:"iconMd",onClick:()=>{d(!1),n("home")},tabIndex:-1,children:(0,a.jsx)(em.uv,{size:18,className:"text-secondary"})}),t&&"home"!==s&&(0,a.jsx)(l.$n,{className:"absolute left-3.5 -bottom-1",variant:"ghost",size:"icon",onClick:()=>n("home"),children:(0,a.jsx)(ts.A,{size:18,className:"text-secondary"})})]}),children:(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-col w-full sm:flex-row focus:outline-none h-0 flex-grow",t&&"pb-8 pt-4"),children:[(!t||"home"===s)&&(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-col gap-1.5",t?"gap-3 px-2 w-full":"pl-3 pb-3"),children:[(0,a.jsx)(tC,{icon:ta.A,text:e("account","Account"),tab:"account"}),(0,a.jsx)(tC,{icon:tn.A,text:e("appearance","Appearance"),tab:"appearance"}),(0,a.jsx)(tC,{icon:tl.A,text:e("settings.behavior",{defaultValue:"Behavior"}),tab:"behavior"}),(0,a.jsx)(tC,{icon:tr.A,text:e("Customize","Customize"),tab:"personality"}),h.user&&(0,a.jsx)(tC,{icon:ti.A,text:e("Data Controls","Data Controls"),tab:"data"}),b&&(0,a.jsx)(tC,{icon:to.A,text:e("setting-tab.billing","Billing"),tab:"billing"}),h.user&&(0,a.jsx)(tC,{icon:tc.A,text:e("settings.connected-apps","Connected Apps"),tab:"connected-apps"}),h.user&&u.SHOW_MODEL_CONFIG_OVERRIDE&&(0,a.jsx)(tC,{icon:td.A,text:e("settings.dev-tools","Dev Tools"),tab:"dev"}),u.SHOW_MODEL_CONFIG_OVERRIDE&&(0,a.jsx)(l.gx,{"aria-label":e("settings.toggle-settings-size","Toggle Settings Size"),tooltipContent:(0,a.jsx)("div",{className:"flex items-center gap-2",children:e("settings.toggle-settings-size","Toggle Settings Size")}),tooltipContentProps:{side:"bottom"},tooltipProps:{delayDuration:300},variant:"ghost",size:"iconSm",rounded:!0,className:(0,i.cn)("transition-colors text-secondary hover:text-primary","mt-auto"),onClick:k,children:y?(0,a.jsx)(tu.A,{size:16}):(0,a.jsx)(tm.A,{size:16})})]}),("account"===s||!t&&"home"===s)&&(0,a.jsx)(t_,{children:(0,a.jsx)(eM,{onManage:f})}),"appearance"===s&&(0,a.jsx)(t_,{children:(0,a.jsx)(eD,{})}),"behavior"===s&&(0,a.jsx)(t_,{children:(0,a.jsx)(eR,{})}),"personality"===s&&(0,a.jsx)(t_,{children:(0,a.jsx)(e7,{})}),"data"===s&&h.user&&(0,a.jsx)(t_,{children:(0,a.jsx)(eU,{onManage:f,onDelete:p,onNavigate:g})}),"billing"===s&&h.user&&(0,a.jsx)(t_,{children:(0,a.jsx)(tx.A,{})}),"connected-apps"===s&&h.user&&(0,a.jsx)(t_,{children:(0,a.jsx)(tk,{})}),"dev"===s&&h.user&&u.SHOW_MODEL_CONFIG_OVERRIDE&&(0,a.jsx)(t_,{children:(0,a.jsx)(e5,{})})]})})};function t_(e){let{children:t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex-1 w-full h-full","pl-4 pr-4 pb-10 md:pr-4","overflow-scroll focus:outline-none"),children:t})}let tA=()=>{let e=(0,m.useRef)(null),t=(0,m.useRef)(null);return(0,m.useEffect)(()=>{let s=e.current,a=t.current;if(!s||!a)return;let n=s.getContext("2d");if(!n)return;let l=[],r=[],i=0,o=()=>{let e=a.getBoundingClientRect();s.width=e.width,s.height=e.height,c(800,!0)},c=(e,t)=>{for(let a=0;a<e;a++){let e=Math.random()*Math.PI*2,a=Math.random()*Math.max(s.width,s.height)*2+500;l.push({x:0,y:0,radius:Math.random()+.3,opacity:t?.5*Math.random()+.5:0,twinkleSpeed:.005+.01*Math.random(),angle:e,distance:a})}};o();let d=new ResizeObserver(o);d.observe(a);let u=()=>{n.clearRect(0,0,s.width,s.height),l.length<3e3&&c(1,!1),i+=3e-4;let e=s.width+.1*s.height,t=s.height+.5*s.height;l.forEach(s=>{let a=s.angle+i;s.x=e+Math.cos(a)*s.distance,s.y=t+Math.sin(a)*s.distance,s.opacity+=s.twinkleSpeed,(s.opacity>1||s.opacity<.6)&&(s.twinkleSpeed=-s.twinkleSpeed);let l=n.createRadialGradient(s.x,s.y,0,s.x,s.y,2*s.radius);l.addColorStop(0,"rgba(255, 255, 255, ".concat(s.opacity,")")),l.addColorStop(.5,"rgba(255, 255, 255, ".concat(.5*s.opacity,")")),l.addColorStop(1,"rgba(255, 255, 255, 0)"),n.beginPath(),n.arc(s.x,s.y,2*s.radius,0,2*Math.PI),n.fillStyle=l,n.fill()}),.001>Math.random()&&r.length<3&&r.push({x:Math.random()*s.width,y:-50,length:120+120*Math.random(),speed:3+ +Math.random(),opacity:.9}),r=r.filter(e=>{e.x-=e.speed,e.y+=e.speed,e.opacity-=.01;let t=n.createLinearGradient(e.x,e.y,e.x+.707*e.length,e.y-.707*e.length);t.addColorStop(0,"rgba(255, 255, 255, ".concat(e.opacity,")")),t.addColorStop(.5,"rgba(255, 255, 255, ".concat(.5*e.opacity,")")),t.addColorStop(1,"rgba(255, 255, 255, 0)"),n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(e.x+.707*e.length,e.y-.707*e.length),n.strokeStyle=t,n.lineWidth=2,n.stroke();let a=n.createRadialGradient(e.x,e.y,0,e.x,e.y,4);return a.addColorStop(0,"rgba(255, 255, 255, ".concat(e.opacity,")")),a.addColorStop(1,"rgba(255, 255, 255, 0)"),n.beginPath(),n.arc(e.x,e.y,4,0,2*Math.PI),n.fillStyle=a,n.fill(),e.y<s.height+50&&e.opacity>0}),requestAnimationFrame(u)};return u(),()=>{d.disconnect()}},[]),(0,a.jsx)("div",{ref:t,className:"absolute top-0 left-0 w-full h-full",children:(0,a.jsx)("canvas",{ref:e,className:"w-full h-full"})})};s(28513),new WeakSet,s(18753);let tE=(0,m.memo)(function(){return null});var tI=s(88714),tM=s(91526),tT=s(25030),tO=s(77311);let tP=(0,m.createContext)(null),tD={accept:[tT.FILE],collect:()=>void 0};function tR(e){let{children:t}=e,s=(0,m.useRef)(null);return(0,a.jsx)("div",{ref:s,className:"flex w-full h-full","data-testid":"drop-container",children:(0,a.jsx)(tI.Q,{backend:tO.t2,options:{rootElement:s.current},children:(0,a.jsx)(tz,{children:t})})})}function tz(e){var t,s;let{children:n}=e,l=(0,m.useRef)(null),[r,i]=(0,m.useState)(null),o=null!=(t=null==r?void 0:r.options)?t:tD,[c,d]=(0,tM.H)(o);d(l);let u=null!=(s=null==r?void 0:r.hookId)?s:null,h=(0,m.useMemo)(()=>({collectedProps:c,hookId:u,subscribe:i}),[c,i,u]);return(0,a.jsx)("div",{ref:l,className:"flex w-full h-full","data-testid":"drop-ui",children:(0,a.jsx)(tP.Provider,{value:h,children:n})})}var tL=s(84499),tF=s(56096),tB=s(73304),t$=s(49);let tG=null,tV=null,tU=()=>{(0,m.useEffect)(()=>{function e(){!t$.d.isLocked()&&document.hidden&&tG&&Date.now()-tG>=36e5&&location.reload()}function t(){document.hidden?(tG=Date.now(),tV=setTimeout(e,36e5)):(tG=null,tV&&(clearTimeout(tV),tV=null))}return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}},[])};var tW=s(70697),tK=s(42423),tH=s(88844),tY=s(13103),tJ=s(6063),tq=s(53592),tX=s(24405),tQ=s(88733),tZ=s(1729),t0=s(29658),t1=s(52371);let t2=(0,el.v)(e=>({previewMode:"desktop",setPreviewMode:t=>e({previewMode:t}),isRefreshing:!1,refresh:()=>{e({isRefreshing:!0}),setTimeout(()=>e({isRefreshing:!1}),100)}}));var t3=s(57577),t5=s(36662),t4=s(49881),t6=s(47199);function t8(){let{t:e}=(0,j.Bd)("chat"),{previewMode:t,setPreviewMode:s}=t2();return(0,a.jsx)(t1.tU,{className:"flex-1 flex-row justify-center flex",defaultValue:"desktop",value:t,onValueChange:e=>s(e),children:(0,a.jsxs)(t1.j7,{children:[(0,a.jsxs)(t1.Xi,{className:"gap-1",value:"desktop",children:[(0,a.jsx)(t3.A,{className:"size-4"}),(0,a.jsx)("span",{className:"hidden md:inline",children:e("Wide","Wide")})]}),(0,a.jsxs)(t1.Xi,{className:"gap-1",value:"mobile",children:[(0,a.jsx)(t5.A,{className:"size-4"}),(0,a.jsx)("span",{className:"hidden md:inline",children:e("Mobile","Mobile")})]})]})})}function t7(){let{refresh:e}=t2(),{t}=(0,j.Bd)("chat");return(0,a.jsx)("div",{className:"flex gap-2 items-center",children:(0,a.jsxs)(L.m_,{delayDuration:300,children:[(0,a.jsx)(L.k$,{asChild:!0,children:(0,a.jsx)(l.$n,{variant:"outline",size:"icon",onClick:e,children:(0,a.jsx)(t4.A,{size:16})})}),(0,a.jsx)(L.ZI,{children:(0,a.jsx)("p",{children:t("Refresh","Refresh")})})]})})}function t9(e){let{html:t}=e,{previewMode:s,isRefreshing:n}=t2();return(0,a.jsx)("div",{className:"h-full bg-foreground dark:bg-background",children:(0,a.jsx)("div",{className:"w-full h-full flex flex-col",children:(0,a.jsx)("div",{className:(0,i.cn)("bg-surface-base flex-1 flex flex-col"),children:(0,a.jsx)("div",{className:(0,i.cn)("flex-1 bg-foreground","mobile"===s&&"max-w-lg mx-auto"),children:n?null:(0,a.jsx)(t6.Z,{srcDoc:t,autofocus:!0})})})})})}var se=s(43893),st=s(36460);let ss=[],sa=e=>{let{responseId:t}=e,[s,n]=(0,m.useState)(""),l=(0,se.A3)(e=>e.byId[t]);return(0,m.useEffect)(()=>{let e=setInterval(()=>{var e;n((null==(e=l.steps)?void 0:e.map(e=>{var t,s,a;if(!(null==(t=e.tags)?void 0:t.includes("assistant")))return"";let n=null==(s=e.tags)?void 0:s.indexOf("assistant");return(null==(a=e.text)?void 0:a[n])||""}).join(" "))||"")},100);return()=>clearInterval(e)},[l.steps]),(0,a.jsx)("div",{className:"px-2",children:(0,a.jsx)(st.Cn,{sender:"assistant",webSearchResults:ss,xposts:ss,shouldRenderHtml:!0,children:s})})};function sn(){var e;let{t}=(0,j.Bd)("chat"),s=(0,r.h)(),n=(0,eW.aP)(X.A("sidePanelContent")),o=(0,eW.aP)(X.A("setSidePanelContent")),[c,d]=(0,m.useState)(void 0),h=["htmlPreview","artifact"].includes(null!=(e=null==n?void 0:n.type)?e:""),x=n&&"asset"===n.type&&tJ.Ig.includes(n.data.fileMimeType),f=h||s.ENABLE_CSV_RENDERING&&x,p=(0,D.Di)(h?900:void 0),g=(null==n?void 0:n.type)==="thinkingTrace"?740:.8*document.body.clientWidth,v=(0,m.useCallback)(()=>{o(void 0)},[o]),b=()=>{var e,r,m,h;let x,f,g,b;if(!n)return null;let{type:j,data:y}=n,k=null,w=null;switch(j){case"asset":x=(0,a.jsx)(tX.A,{className:"!size-5"}),f=y.fileName.length>0?y.fileName:"File",b=(0,a.jsx)("div",{className:"flex flex-col items-center gap-2 px-4 pb-2 h-full",children:(0,a.jsx)(tQ.H,{fileMetadata:y,onClose:v,hideEdit:n.hideEdit})});break;case"rawAsset":x=(0,a.jsx)(tX.A,{className:"!size-5"}),f=y.fileName.length>0?y.fileName:"File",b=(0,a.jsx)("div",{className:"flex flex-col items-center gap-2 px-4 pb-2 h-full",children:(0,a.jsx)(tQ.H,{fileMetadata:y,onClose:v,useRawFileURI:!0})});break;case"webSearchResults":f=t("Search Results","Search Results"),b=(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 px-4 pb-2 h-full",children:[y.webSearchResults.map(e=>(0,a.jsx)("div",{className:"w-full py-1 text-base text-primary",children:(0,a.jsx)(tW.O9,{webSearchResult:e})},e.url)),!!(null==(e=y.browsedUrls)?void 0:e.length)&&(null==(r=y.browsedUrls)?void 0:r.length)>0&&(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"text-base font-medium pb-2",children:t("Deep Search: Browsed URLs","Deep Search: Browsed URLs")}),null==(m=y.browsedUrls)?void 0:m.map(e=>(0,a.jsx)("div",{className:"w-full py-1 text-base text-primary",children:(0,a.jsx)(tW.O9,{webSearchResult:{url:e,title:e,preview:"",searchEngineText:"",description:"",siteName:"",metadataTitle:"",creator:"",image:"",favicon:"",citationId:""}})},e))]})]});break;case"xPosts":f=t("\uD835\uDD4F Posts","\uD835\uDD4F Posts"),b=(0,a.jsx)("div",{className:"flex flex-col items-center px-4 pb-2",children:y.map(e=>(0,a.jsx)("div",{className:"w-full py-1 text-base text-primary",children:(0,a.jsx)(tW.N3,{xPost:e})},e.postId))});break;case"memoryReferences":f=(0,a.jsxs)("div",{className:"flex flex-row items-center gap-1.5",children:[t("response-action.referenced-conversations","Referenced Conversations"),(0,a.jsx)(ez,{})]}),g=t("Forgetting conversations wonâ€™t delete them from history","Forgetting conversations wonâ€™t delete them from history"),b=(0,a.jsx)(tK.a,{responseId:y.responseId,memoryReferences:y.memoryReferences});break;case"thinkingTrace":f=t("Thoughts","Thoughts"),b=(0,a.jsx)(ee.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.15},className:"[&>*:first-child]:mt-0 h-fit overflow-x-auto w-full focus:outline-none focus-within:outline-none px-3 prose dark:prose-invert",children:(0,a.jsx)(sa,{responseId:y.responseId})});break;case"artifact":f=null,b=(0,a.jsx)(tZ.C,{artifact:y.artifact,onSetMenu:s.ENABLE_ARTIFACTS_EDITING?d:void 0,readOnly:y.readOnly}),w=null,k=(0,a.jsx)(t0.x,{artifact:y.artifact,contentButtons:c,readOnly:y.readOnly});break;case"htmlPreview":k=(0,a.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,a.jsx)(t8,{}),(0,a.jsx)(t7,{})]}),b=(0,a.jsx)(t9,{html:y});break;default:throw Error("Unknown side panel content type")}let C=["asset","webSearchResults","xPosts","memoryReferences"].includes(null!=(h=null==n?void 0:n.type)?h:"");return(0,a.jsxs)("aside",{className:"max-h-[97dvh] h-[97dvh] lg:max-h-none lg:h-full flex flex-col w-full overflow-y-auto overflow-x-hidden bg-surface-l1 dark:bg-surface-inset",children:[(0,a.jsxs)("div",{className:(0,i.cn)("flex z-10 flex-row items-center justify-between flex-shrink-0 w-full px-2 md:px-5 sticky top-0 bg-gradient-to-b from-surface-l1 via-surface-l1 dark:from-surface-inset dark:via-surface-inset to-transparent",g?"h-[4.5rem] via-90%":"h-12 md:h-16 via-80%"),children:[k||(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center max-w-[80%]",children:[x&&(0,a.jsx)("div",{className:"flex-shrink-0",children:x}),(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-col items-start w-full",p&&"gap-1",C&&"ps-2 md:ps-3"),children:[(0,a.jsx)("div",{className:"truncate text-base font-semibold w-full",children:p?(0,a.jsx)("div",{children:f}):f}),g&&(0,a.jsx)("div",{className:(0,i.cn)("text-xs text-secondary w-full",!p&&"truncate"),children:p?(0,a.jsx)("div",{children:g}):g})]})]}),w,(0,a.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[null,(0,a.jsxs)(L.m_,{delayDuration:300,children:[(0,a.jsx)(L.k$,{asChild:!0,children:(0,a.jsx)(l.$n,{variant:"ghost",size:"icon",onClick:()=>o(void 0),className:"flex-shrink-0 rounded-full","aria-label":t("Close","Close"),children:(0,a.jsx)(u.A,{size:20,strokeWidth:2})})}),(0,a.jsx)(L.ZI,{children:(0,a.jsx)("p",{children:t("Close","Close")})})]})]})]}),(0,a.jsx)("div",{className:(0,i.cn)("flex-grow w-full h-full overflow-y-visible",(null==n?void 0:n.type)==="artifact"&&"overflow-y-auto min-h-0 flex-1 p-0"),children:b})]})};return p?(0,a.jsx)(P._s,{open:!!n,onOpenChange:e=>o(e?n:void 0),children:(0,a.jsx)(P.zj,{className:"focus:outline-none bg-surface-l1 pt-1",disableDrag:!("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),children:b()})}):n&&"asset"===n.type&&n.data.fileMimeType.startsWith("image/")?(0,a.jsx)(tq.lG,{open:!!n,onOpenChange:e=>{o(e?n:void 0)},children:(0,a.jsx)(tY.ZJ,{children:(0,a.jsx)(tY.Cf,{className:(0,i.cn)("bg-transparent h-full w-full","!scale-100 !-translate-x-1/2 !-translate-y-1/2"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full",onClick:()=>o(void 0),children:[(0,a.jsx)(tQ.H,{fileMetadata:n.data,onClose:v,hideEdit:n.hideEdit}),(0,a.jsx)("div",{className:"absolute flex-col justify-between hidden lg:flex end-3 inset-y-3 dark",children:(0,a.jsx)(l.$n,{variant:"ghost",size:"iconXl",onClick:e=>{e.stopPropagation(),o(void 0)},children:(0,a.jsx)(u.A,{className:"size-5"})})})]})})})}):(0,a.jsx)(tH.w,{isVisible:!!n,minWidth:h&&!p?550:288,maxWidth:g,initialWidth:f?.6*document.body.clientWidth:480,className:"max-w-[66%] xl:max-w-none",children:b()})}var sl=s(73772),sr=s(2968),si=s(93436),so=s(67811);function sc(){let{client:e}=(0,en.useStatsigClient)(),[t,s]=(0,m.useState)(""),{t:n}=(0,j.Bd)("data.report-issue"),r=(0,eW.aP)(X.A("conversationId")),{isChatPage:o}=(0,eL.o)(),c=(0,eh.wV)(),[d,h]=(0,m.useState)(null),x=(0,eF.K)(),f=(0,si.P)(X.A("reportDialogIsOpen")),p=(0,si.P)(X.A("setReportDialogIsOpen")),g=(0,eW.aP)(X.A("lastMessageId")),v=(0,se.A3)(X.A("byId")),k=(0,m.useMemo)(()=>({general_feedback:{label:n("report-type.general-feedback-label","General feedback"),type:sr.CN.GeneralFeedback},issue_report:{label:n("report-type.issue-report-label","Report issue / bug"),type:sr.CN.IssueReport},child_safety:{label:n("report-type.child-safety-label","Child safety concern"),type:sr.CN.ChildSafety}}),[n]),w=(0,m.useCallback)(()=>{p(!1),s(""),h(null)},[p]),C=(0,m.useCallback)(e=>!e&&w(),[w]),N=(0,m.useCallback)(e=>s(e.target.value),[]),S=(0,m.useCallback)(async()=>{var s,a;e.logEvent("report-issue-submitted",g,{location:"report-issue",responseId:null!=g?g:"no-response-id",selectedReportType:d?null==(s=k[d])?void 0:s.type:"no-report-type"});let l=o?(0,Z.Zv)(g,v):void 0,i={body:{reportWithDumpJSONString:JSON.stringify({conversationId:r,debug_url:"go/debug/".concat(r),user:c.user,country_code:c.countryCode,user_reported_from:window.location.href,report:t,dump:l}).slice(0,5e5),report:t,feedbackType:d?null==(a=k[d])?void 0:a.type:void 0}};eN.aK.settingsUserIssueReport(i).then(()=>y.oR.success(n("report-dialog.send-success",{defaultValue:"Successfully sent error report! Our team has been notified"}))).catch(e=>{(0,b.vV)("report-dialog",e),x("report-dialog",e,n("report-dialog.send-fail",{defaultValue:"Failed to sent error report"}))}),w()},[e,g,d,o,v,c.user,c.countryCode,r,t,w,n,k,x]);return(0,a.jsx)(tY.lG,{open:f,onOpenChange:C,children:(0,a.jsxs)(tY.Cf,{className:"max-w-[480px] w-full p-4 rounded-3xl border border-border-l1 flex flex-col gap-6",children:[(0,a.jsx)(tY.c7,{children:(0,a.jsx)(tY.L3,{children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)("h1",{className:"font-semibold text-lg",children:n("report-dialog.title",{defaultValue:"Report an issue"})}),(0,a.jsx)(l.$n,{variant:"ghost",size:"iconMd",onClick:w,children:(0,a.jsx)(u.A,{size:16})})]})})}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:n("feedback.report-type-label",{defaultValue:"Feedback type"})}),(0,a.jsxs)(sl.rI,{children:[(0,a.jsx)(sl.ty,{asChild:!0,children:(0,a.jsxs)(l.$n,{variant:"outline",className:"w-full",children:[(0,a.jsx)("div",{className:"w-full flex justify-between items-center",children:d?k[d].label:n("report-dialog.select-report-label","Select report type")}),(0,a.jsx)(so.A,{size:16})]})}),(0,a.jsx)(sl.SQ,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5 z-[101]",children:Object.keys(k).map((e,t)=>(0,a.jsx)(sl._2,{className:(0,i.cn)("flex items-center gap",{"bg-button-ghost-active":d===e}),onClick:()=>h(t=>t===e?null:e),children:k[e].label},t))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:n("feedback.area-label",{defaultValue:"Your feedback"})}),(0,a.jsx)(eQ,{className:"rounded-3xl p-4 border border-border-l1",rows:8,placeholder:n("report-dialog.textarea-placeholder",{defaultValue:"Please describe any issues or feedback you have for Grok."}),value:t,onChange:N})]}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)(l.$n,{variant:"outline",onClick:w,children:n("reportDialog.cancel",{defaultValue:"Cancel"})}),(0,a.jsx)(l.$n,{onClick:S,variant:"primary",disabled:0===t.length||!d,children:n("reportDialog.send",{defaultValue:"Send"})})]})]})})}var sd=s(54665),su=s(47416),sm=s(44987);let sh=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(sm.bL,{ref:t,className:(0,i.cn)("border rounded-xl p-1 flex",s),...n})}),sx=m.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(sm.q7,{ref:t,className:(0,i.cn)("grow shrink",s),...n})});var sf=s(1826);let sp=e=>{let{trackClassName:t,progressClassName:s,size:n,thickness:l,progressPercentage:r,offsetDegrees:i=0}=e,o=100/n*l,c=50-o/2,d=2*Math.PI*c,u=1-r/100,m=d*u,h=l/2;m+=h*(1-u*u);let x=-90+h/d*180+i;return(0,a.jsx)("svg",{width:n,height:n,viewBox:"0 0 100 100",children:(0,a.jsxs)("g",{transform:"rotate("+x+" 50 50)",children:[(0,a.jsx)("circle",{cx:"50",cy:"50",r:c,strokeWidth:o,fill:"none",className:t}),r>=100?(0,a.jsx)("circle",{cx:"50",cy:"50",r:c,strokeWidth:o,fill:"none",className:s}):r>0?(0,a.jsx)("circle",{opacity:function(e,t,s){return Math.min(Math.max((s-0)/(1.5-e),0),1)}(0,1.5,r),cx:"50",cy:"50",r:c,strokeWidth:o,fill:"none",className:s,strokeDasharray:"".concat(d," ").concat(d),strokeDashoffset:m,strokeLinecap:"round"}):null]})})};var sg=s(7211),sv=s(7287);let sb=(0,s(17338).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}});m.forwardRef((e,t)=>{let{className:s,variant:n,size:l,asChild:r=!1,...o}=e,c=r?sv.DX:"button";return(0,a.jsx)(c,{className:(0,i.cn)(sb({variant:n,size:l,className:s})),ref:t,...o})}).displayName="Button";var sj=s(52970);function sy(e){let{className:t,classNames:s,showOutsideDays:n=!0,...l}=e;return(0,a.jsx)(sg.hv,{showOutsideDays:n,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)(sb({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:(0,i.cn)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md","range"===l.mode?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:(0,i.cn)(sb({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{className:t}=e;return(0,a.jsx)(sj.YJP,{className:(0,i.cn)("h-4 w-4",t)})},IconRight:e=>{let{className:t}=e;return(0,a.jsx)(sj.vKP,{className:(0,i.cn)("h-4 w-4",t)})}},...l})}sy.displayName="Calendar";var sk=s(32006),sw=s(80882),sC=s(58711),sN=s(16677),sS=s.n(sN),s_=s(40075),sA=s(44511),sE=s(9702),sI=s(51268),sM=s(83076),sT=s(35589),sO=s(84969);let sP=e=>{let{radius:t=128,currentHour:s=12,currentMinute:n=0,onSelect:r=()=>{}}=e,o=s>=12?"PM":"AM",c=s%12||12,{t:d}=(0,j.Bd)(),[u,h]=m.useState(c),[x,f]=m.useState(n),[p,g]=m.useState(o),[v,b]=m.useState("hour"),[y,k]=m.useState(!1),w=m.useRef(null),C=m.useRef({x:0,y:0}),N=m.useRef(0),[,S]=m.useState("");m.useEffect(()=>{S("")},[v]);let _=2*t,A=.8*t,E=.938*t,I=.8*t,M=m.useCallback(()=>{if(r){let e=u;"AM"===p&&12===u?e=0:"PM"===p&&u<12&&(e+=12),r(e,x)}},[u,x,p,r]),T=m.useCallback(()=>{h(c),f(n),g(o),b("hour")},[h,f,g,b,c,n,o]);m.useEffect(()=>{let e=e=>{if(e.key>="0"&&e.key<="9"&&S(t=>{let s=t+e.key;if("hour"===v){if(1===s.length)return parseInt(s)>=2?(h(parseInt(s)),b("minute"),""):(h(parseInt(s)),s);if(2===s.length){let e=parseInt(s[0]),t=parseInt(s[1]),a=parseInt(s);if(0===e&&t>=1&&t<=9||1===e&&t>=0&&t<=2)return h(parseInt(a<10?"0".concat(a):s)),b("minute"),"";b("minute")}}else if("minute"===v){if(1===s.length)return parseInt(s)>=6?(f(parseInt(s)),b("ampm"),""):(f(parseInt(s)),s);if(2===s.length){let e=parseInt(s);if(e>=0&&e<=59)return f(parseInt(s)),b("ampm"),""}}return t}),"ArrowRight"===e.key||"Tab"===e.key)switch(v){case"hour":b("minute");break;case"minute":b("ampm")}else if("ArrowLeft"===e.key)switch(v){case"ampm":b("minute");break;case"minute":b("hour")}else"ArrowUp"===e.key&&"hour"===v?(S(""),h(e=>{let t=(e+1)%12||12;return t<0?12:t})):"ArrowDown"===e.key&&"hour"===v?(S(""),h(e=>{let t=(e-1)%12||12;return t<0?12:t})):"ArrowDown"===e.key&&"minute"===v?(S(""),f(e=>{let t=(e-1)%60;return t<0?59:t})):"ArrowUp"===e.key&&"minute"===v?(S(""),f(e=>(e+1)%60)):"ArrowDown"===e.key&&"ampm"===v?g(e=>"AM"===e?"PM":"AM"):"ArrowUp"===e.key&&"ampm"===v?g(e=>"AM"===e?"PM":"AM"):"Enter"===e.key?"hour"===v?b("minute"):"minute"===v?b("ampm"):"ampm"===v&&M():"Backspace"===e.key&&T()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[v,M,T]);let O=m.useCallback(()=>{if(w.current){let e=w.current.getBoundingClientRect();C.current={x:e.left+e.width/2,y:e.top+e.height/2}}},[]);m.useEffect(()=>(O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)),[O]);let P=m.useCallback((e,t)=>{let s=e-C.current.x,a=Math.atan2(t-C.current.y,s)+Math.PI/2;return a<0&&(a+=2*Math.PI),a},[]),D=m.useCallback(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||k(!0);let s=Date.now();if(s-N.current<16)return;N.current=s;let a=P(e.clientX,e.clientY);if("hour"===v){let e=Math.round(a/(2*Math.PI)*12)%12;h(0===e?12:e)}else f(Math.round(a/(2*Math.PI)*60)%60)},[v,P,k]),R=m.useCallback(e=>{var t,s,a;k(!1),null==(t=w.current)||t.releasePointerCapture(e.pointerId),null==(s=w.current)||s.removeEventListener("pointermove",D),null==(a=w.current)||a.removeEventListener("pointerup",R),"hour"===v&&setTimeout(()=>{b("minute")},300)},[w,D,b,v,k]),z=m.useCallback(e=>{var t,s,a;e.preventDefault(),O(),h(e=>e),D(e,!0),null==(t=w.current)||t.setPointerCapture(e.pointerId),null==(s=w.current)||s.addEventListener("pointermove",D),null==(a=w.current)||a.addEventListener("pointerup",R)},[D,O,R]),L=m.useCallback(()=>{g("AM"===p?"PM":"AM"),b("ampm")},[p,g,b]),F="hour"===v?u%12*30:6*x,B=u.toString().padStart(2,"0"),$=x.toString().padStart(2,"0");return(0,a.jsx)("div",{className:"z-0 bg-surface-base rounded-lg shadow-md border border-surface-d pb-3 overflow-hidden",style:{width:"".concat(2.5*t,"px")},children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"opacity-90 w-full bg-button-secondary-selected border-b border-input-border overflow-hidden h-10 mb-4 shadow-lg",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-primary flex w-full relative cursor-default",children:[(0,a.jsxs)("span",{className:"absolute left-1/2 -translate-x-1/2 w-full h-full text-center pt-1",children:[(0,a.jsx)("span",{className:"inline-block w-10 text-right tracking-tighter ".concat("hour"===v?"underline":""),onClick:()=>b("hour"),role:"button",tabIndex:0,"aria-label":d("radial-time-picker.select-hour","Select hour: {{hour}}",{hour:u}),children:"".concat(B)}),(0,a.jsx)("span",{className:"inline-block pl-1 pr-0.5 text-xl font-black relative bottom-0.5",children:":"}),(0,a.jsx)("span",{className:"inline-block w-10 text-left tracking-tighter ".concat("minute"===v?"underline":""),onClick:()=>b("minute"),role:"button",tabIndex:0,"aria-label":d("radial-time-picker.select-minute","Select minute: {{minute}}",{minute:x}),children:"".concat($," ")})]}),(0,a.jsx)("span",{onClick:L,role:"button",tabIndex:0,"aria-label":d("radial-time-picker.toggle-ampm","Toggle to {{ampm}}",{ampm:"AM"===p?"PM":"AM"}),className:"w-14 ".concat("ampm"===v?"underline":""," text-2xl text-center tracking-tighter absolute right-0 cursor-pointer px-2 py-1 ").concat("AM"===p?"bg-teal-500 text-white":"bg-blue-500 text-white"," hover:brightness-110 transition"),children:p})]}),(0,a.jsx)("div",{className:"opacity-90 w-full",children:(0,a.jsx)("div",{"aria-live":"polite",className:"sr-only",children:d("radial-time-picker.time-set","Time set to {{hour}}:{{minute}} {{ampm}}",{hour:u,minute:x,ampm:p})})})]}),(0,a.jsxs)("div",{ref:w,className:"relative bg-surface-base rounded-full shadow-lg border border-input-border-focus cursor-grab active:cursor-grabbing",style:{width:"".concat(_,"px"),height:"".concat(_,"px")},onPointerDown:z,role:"slider","aria-label":"hour"===v?"Select hour":"Select minute","aria-valuemin":+("hour"===v),"aria-valuemax":"hour"===v?12:59,"aria-valuenow":"hour"===v?u:x,"aria-valuetext":"".concat("hour"===v?u:x," ").concat(v),tabIndex:0,children:["hour"===v&&(0,a.jsxs)(a.Fragment,{children:[Array.from({length:12},(e,s)=>{let n=(30*s-90)*Math.PI/180,l=t+E*Math.cos(n),r=t+E*Math.sin(n);return(0,a.jsx)("div",{"aria-hidden":"true",className:(0,i.cn)("absolute w-1 h-1 bg-input-border-focus rounded-full opacity-50",s===u%12&&" bg-primary"),style:{left:"".concat(l,"px"),top:"".concat(r,"px"),transform:"translate(-50%, -50%)"}},s)}),Array.from({length:12},(e,s)=>{let n=0===s?12:s,l=(30*s-90)*Math.PI/180,r=t+A*Math.cos(l),i=t+A*Math.sin(l);return(0,a.jsx)("div",{"aria-hidden":"true",className:"absolute text-center text-secondary font-black w-6 h-6",style:{left:"".concat(r,"px"),top:"".concat(i,"px"),transform:"translate(-50%, -50%)"},children:n},s)})]}),"hour"!==v&&(0,a.jsxs)(a.Fragment,{children:[Array.from({length:60},(e,s)=>{let n=(6*s-90)*Math.PI/180,l=t+E*Math.cos(n),r=t+E*Math.sin(n);return(0,a.jsx)("div",{"aria-hidden":"true",className:(0,i.cn)("absolute w-1 h-1 bg-input-border-focus rounded-full opacity-50",s===x&&"bg-primary opacity-70"),style:{left:"".concat(l,"px"),top:"".concat(r,"px"),transform:"translate(-50%, -50%)"}},s)}),Array.from({length:12},(e,s)=>{let n=5*s,l=(30*s-90)*Math.PI/180,r=t+I*Math.cos(l),i=t+1.01*I*Math.sin(l)+1;return(0,a.jsx)("div",{"aria-hidden":"true",onClick:()=>{f(n)},className:"absolute text-center text-secondary font-black w-6 h-6 text-sm",style:{left:"".concat(r,"px"),top:"".concat(i,"px"),transform:"translate(-50%, -50%)"},children:n},s)})]}),(0,a.jsx)("div",{"aria-hidden":"true",className:"absolute w-1 bg-surface-invert rounded-t-full",style:{height:"hour"===v?"".concat(.625*t,"px"):"".concat(.703*t,"px"),left:"".concat(t-2,"px"),bottom:"".concat(t-2,"px"),transform:"rotate(".concat(F,"deg)"),transition:y?"none":"transform 0.275s ease-out",transformOrigin:"center bottom"}}),(0,a.jsx)("div",{"aria-hidden":"true",className:"absolute w-10 h-10 rounded-full bg-[radial-gradient(circle_at_center,var(--surface-base)_10%,transparent_40%)]",style:{left:"".concat(t,"px"),top:"".concat(t,"px"),transform:"translate(-50%, -50%)"}}),(0,a.jsx)("div",{"aria-hidden":"true",className:"absolute w-4 h-4 bg-surface-invert rounded-full",style:{left:"".concat(t,"px"),top:"".concat(t,"px"),transform:"translate(-50%, -50%)"}})]}),(0,a.jsxs)("div",{className:" flex justify-between w-full px-3 mt-3",children:[(0,a.jsx)(l.$n,{onClick:T,variant:"secondary",size:"sm",className:"font-semibold min-w-16 rounded-sm",children:d("radial-time-picker.reset","Reset")}),(0,a.jsx)(l.$n,{onClick:M,variant:"primary",size:"sm",className:"rounded-sm font-semibold min-w-16",children:d("radial-time-picker.ok","OK")})]})]})})},sD=[{label:(0,a.jsx)(j.x6,{ns:"tasks",i18nKey:"Sunday",defaults:"Sunday"}),value:0},{label:(0,a.jsx)(j.x6,{ns:"tasks",i18nKey:"Monday",defaults:"Monday"}),value:1},{label:(0,a.jsx)(j.x6,{ns:"tasks",i18nKey:"Tuesday",defaults:"Tuesday"}),value:2},{label:(0,a.jsx)(j.x6,{ns:"tasks",i18nKey:"Wednesday",defaults:"Wednesday"}),value:3},{label:(0,a.jsx)(j.x6,{ns:"tasks",i18nKey:"Thursday",defaults:"Thursday"}),value:4},{label:(0,a.jsx)(j.x6,{ns:"tasks",i18nKey:"Friday",defaults:"Friday"}),value:5},{label:(0,a.jsx)(j.x6,{ns:"tasks",i18nKey:"Saturday",defaults:"Saturday"}),value:6}];function sR(e){if(!e)return{remainingFrequent:0,remainingOccasional:0,frequentLimit:0,occasionalLimit:0,frequentUsage:0,occasionalUsage:0};let t=e.frequentUsage||0,s=e.frequentLimit||0,a=e.occasionalUsage||0,n=e.occasionalLimit||0;return{remainingFrequent:s-t,remainingOccasional:n-a,frequentLimit:s,occasionalLimit:n,frequentUsage:t,occasionalUsage:a}}function sz(e){var t,s;let{onClose:n,taskToEdit:o}=e,{t:c}=(0,j.Bd)("tasks"),d=(0,r.h)().ENABLE_GROK_TASK_DECIDER_UI,h=(0,sC.e)(X.A("setIsUpselling")),x=null==(s=(0,eh.wV)().user)||null==(t=s.email)?void 0:t.toLocaleLowerCase().endsWith("@x.ai"),{isSuperGrokUser:f}=(0,ek.Q2)(),p=f||x,{createTask:g,updateTask:v,getUserTasksQuery:b}=(0,sk.ek)(),{getTaskCadenceToReadableLabel:k}=(0,sk.Ik)(),{data:w}=b,C=(0,D.Di)(),{client:N}=(0,en.useStatsigClient)(),S=(0,m.useCallback)(()=>{n(),h(!0)},[h,n]),_=(0,m.useMemo)(()=>{var e;return function(e){if(!e)return 0;let t=e.frequentUsage||0;return(e.frequentLimit||0)-t}(null==w?void 0:w.taskUsage)>0||(null==o?void 0:o.taskId)&&(null==(e=(0,sk.O$)(o))?void 0:e.cadence)===sw.G7.TaskCadenceOnceDaily},[null==w?void 0:w.taskUsage,o]),[A,E]=(0,m.useState)(""),[I,M]=(0,m.useState)(""),[T,O]=(0,m.useState)(!1),[P,R]=(0,m.useState)(_?sw.G7.TaskCadenceOnceDaily:sw.G7.TaskCadenceOnceWeekly),z=new Date,[L,F]=(0,m.useState)(z.getMinutes()>50?z.getHours()+1:z.getHours()),[B,$]=(0,m.useState)(10*Math.ceil(z.getMinutes()/10)%60),[G,V]=(0,m.useState)(sD[z.getDay()]),[U,W]=(0,m.useState)(z.getDate().toString()),[K,H]=(0,m.useState)(sT.c9.now()),[Y,J]=(0,m.useState)("DEFAULT"),[q,Q]=(0,m.useState)(sw.Cg.Base),[Z,ee]=(0,m.useState)(!1),[et,es]=(0,m.useState)(!1),[ea,el]=(0,m.useState)(""),er=(0,m.useCallback)(()=>{es(e=>!e)},[es]),ei=(0,m.useCallback)(()=>{Q(e=>e===sw.Cg.Base?sw.Cg.Deepsearch:sw.Cg.Base)},[]),eo=(0,m.useMemo)(()=>(0,sk.O$)(o),[o]),ec=!!o&&o.taskId&&eo&&eo.scheduleId;(0,m.useEffect)(()=>{N.logEvent("create_custom_task_dialog_open",void 0,{location:window.location.href})},[N]),(0,m.useEffect)(()=>{if(o&&eo){var e,t,s,a,n;E(o.name),M(o.prompt),R(eo.cadence);let l=function(e){let[t,s]=e.split(":").map(Number);return{hours:t,minutes:s}}(eo.timeOfDay);F(l.hours),$(l.minutes),W(null==(e=eo.localDayOfMonth)?void 0:e.toString()),V(sS()(eo.localDayOfWeek)?sD[eo.localDayOfWeek]:void 0),J(null!=(t=o.notificationMethod)?t:"DEFAULT"),el(null!=(s=o.notificationsDecider)?s:""),es(null!=(a=o.notificationsDeciderEnabled)&&a),Q(null!=(n=o.modelMode)?n:sw.Cg.Base),H(eo.localDayOfYear?eo.localDayOfYear:void 0)}},[o,eo]),(0,m.useEffect)(()=>{P===sw.G7.TaskCadenceOnceWeekday&&((null==G?void 0:G.value)===0||(null==G?void 0:G.value)===6)&&V(void 0)},[null==G?void 0:G.value,P]);let ed=(0,m.useCallback)(e=>O(e),[]),eu=()=>{var e,t;let s;if(N.logEvent("create_task_button_clicked_in_task_dialog",void 0,{location:window.location.href,cadence:P,notificationMethod:Y}),A.length>=80)return void y.oR.error(c("create-tasks-dialog.error-name-length","Task name is too long"));if(0===I.length)return void y.oR.error(c("create-tasks-dialog.error-prompt-required","Prompt cannot be empty"));if(I.length>=2e3)return void y.oR.error(c("create-tasks-dialog.error-prompt-length","Prompt is too long"));if(void 0===L||L<0||L>23)return void y.oR.error(c("create-tasks-dialog.error-invalid-hour","Hour value for scheduled time is incorrect"));if(void 0===B||B<0||B>59)return void y.oR.error(c("create-tasks-dialog.error-invalid-minute","Minute value for scheduled time is incorrect"));let a=Intl.DateTimeFormat().resolvedOptions().timeZone;switch(P){case sw.G7.TaskCadenceOnce:case sw.G7.TaskCadenceOnceAnnually:if(!K)return;s={cadence:P,localDayOfYear:K};break;case sw.G7.TaskCadenceOnceDaily:s={cadence:P};break;case sw.G7.TaskCadenceOnceWeekday:case sw.G7.TaskCadenceOnceWeekly:if(!G)return;s={cadence:P,localDayOfWeek:G.value};break;case sw.G7.TaskCadenceOnceMonthly:if(!U)return;s={cadence:P,localDayOfMonth:parseInt(U)};break;default:return}let l={name:A,prompt:I,notificationMethod:Y,modelMode:q,notificationsDecider:ea,notificationsDeciderEnabled:et,schedule:[{timeOfDay:(e=L,t=B,"".concat(String(null!=e?e:0).padStart(2,"0"),":").concat(String(null!=t?t:0).padStart(2,"0"))),isEnabled:!0,ianaTimezone:a,...s}]};ec&&o.taskId&&eo.scheduleId?v({task:l,taskId:o.taskId,scheduleId:eo.scheduleId}):g(l),n()},em=(0,m.useMemo)(()=>{if(ec)return!0;let e=sR(null==w?void 0:w.taskUsage);return P===sw.G7.TaskCadenceOnceDaily?e.remainingFrequent>0:e.remainingOccasional>0},[ec,null==w?void 0:w.taskUsage,P]),ex=[sw.G7.TaskCadenceOnce,sw.G7.TaskCadenceOnceAnnually].includes(P),ef=[sw.G7.TaskCadenceOnceWeekday,sw.G7.TaskCadenceOnceWeekly].includes(P),ep=[sw.G7.TaskCadenceOnceMonthly].includes(P);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tY.c7,{className:"pt-1",children:(0,a.jsx)(tY.L3,{children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)("input",{placeholder:c("create-custom-task-dialog.title",{defaultValue:"Name of task"}),type:"text",value:A,onChange:e=>E(e.target.value),className:"p-1 w-full focus-visible:outline-none bg-transparent rounded-xl",autoFocus:!0}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)(l.$n,{variant:"ghost",size:"iconMd",onClick:n,"aria-label":c("create-tasks-dialog.close","close create tasks dialog"),children:(0,a.jsx)(u.A,{size:16})})})]})})}),(0,a.jsxs)("div",{className:"-mt-4 gap-3 flex flex-col pl-1 pr-1",children:[(0,a.jsx)("h1",{className:"text-xs text-fg-secondary font-semibold",children:c("create-custom-task-dialog.schedule",{defaultValue:"Schedule"})}),(0,a.jsxs)(sh,{type:"single",value:P,onValueChange:e=>{e&&R(e)},"aria-label":"Text alignment",className:(0,i.cn)("flex gap-1",{"gap-0":C}),children:[(0,a.jsx)(sx,{value:sw.G7.TaskCadenceOnce,asChild:!0,children:(0,a.jsx)(l.$n,{size:"sm",variant:P===sw.G7.TaskCadenceOnce?"filledSecondary":"ghost",children:(0,a.jsx)("span",{className:"font-semibold",children:k(sw.G7.TaskCadenceOnce)})})}),(0,a.jsx)(sx,{value:sw.G7.TaskCadenceOnceDaily,asChild:!0,children:(0,a.jsx)(l.$n,{size:"sm",variant:P===sw.G7.TaskCadenceOnceDaily?"filledSecondary":"ghost",children:(0,a.jsx)("span",{className:"font-semibold",children:k(sw.G7.TaskCadenceOnceDaily)})})}),(0,a.jsx)(sx,{value:sw.G7.TaskCadenceOnceWeekly,asChild:!0,children:(0,a.jsx)(l.$n,{size:"sm",variant:P===sw.G7.TaskCadenceOnceWeekly?"filledSecondary":"ghost",children:(0,a.jsx)("span",{className:"font-semibold",children:k(sw.G7.TaskCadenceOnceWeekly)})})}),(0,a.jsx)(sx,{value:sw.G7.TaskCadenceOnceMonthly,asChild:!0,children:(0,a.jsx)(l.$n,{size:"sm",variant:P===sw.G7.TaskCadenceOnceMonthly?"filledSecondary":"ghost",children:(0,a.jsx)("span",{className:"font-semibold",children:k(sw.G7.TaskCadenceOnceMonthly)})})}),(0,a.jsx)(sx,{value:sw.G7.TaskCadenceOnceAnnually,asChild:!0,children:(0,a.jsx)(l.$n,{size:"sm",variant:P===sw.G7.TaskCadenceOnceAnnually?"filledSecondary":"ghost",children:(0,a.jsx)("span",{className:"font-semibold",children:k(sw.G7.TaskCadenceOnceAnnually)})})})]}),(0,a.jsx)(sO.N,{children:(0,a.jsxs)("div",{className:"flex gap-3 h-12",children:[(0,a.jsxs)("div",{className:"border rounded-xl flex items-center pl-3 pr-1 grow justify-between stretch",children:[!C&&(0,a.jsx)("h1",{className:"text-sm text-fg-secondary font-medium",children:c("create-custom-task-dialog.time-label",{defaultValue:"Time"})}),Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"z-[149] absolute top-0 left-0 w-full h-full bg-surface-inset opacity-50 rounded-2xl",onClick:()=>{ee(!1)}}),(0,a.jsx)("div",{className:"z-[150] relative top-1 right-0 h-full w-52",children:(0,a.jsx)(sP,{radius:100,currentHour:L,currentMinute:B,onSelect:(e,t)=>{F(e),$(t),ee(!1)}})})]}):(0,a.jsx)(l.$n,{"aria-label":c("create-custom-task-dialog.time-aria-label",{defaultValue:"Choose time task will run at"}),type:"button",variant:"ghost",className:"rounded-lg",onClick:()=>ee(!0),children:function(e,t){let s=e%12||12;return"".concat(String(null!=s?s:0).padStart(2,"0"),":").concat(String(null!=t?t:0).padStart(2,"0")," ").concat(e>=12?"PM":"AM")}(L,B)})]}),ef&&(0,a.jsx)(sG,{value:G,onValueChange:e=>{if(e){let t=0===e.value?7:e.value;H(sT.c9.now().set({weekday:t}))}V(e)},weekdaysOnly:P===sw.G7.TaskCadenceOnceWeekday},"dayOfWeek-".concat(P)),ep&&(0,a.jsx)(s$,{value:U,onValueChange:e=>W(e.target.value),isMobileSize:C}),ex&&(0,a.jsxs)("div",{className:"border rounded-xl flex items-center px-3 grow justify-between min-h-11",children:[(0,a.jsx)("h1",{className:"text-sm text-fg-secondary font-medium",children:K?K.toLocaleString(sT.c9.DATE_FULL):c("create-custom-task-dialog.date-label",{defaultValue:"Choose date"})}),(0,a.jsxs)(sf.AM,{open:T,onOpenChange:ed,children:[(0,a.jsx)(sf.Wv,{asChild:!0,children:(0,a.jsx)(l.$n,{variant:"ghost","aria-label":c("create-custom-task-dialog.calendar",{defaultValue:"open/close calendar"}),size:"sm",children:(0,a.jsx)(s_.A,{size:16})})}),(0,a.jsx)(sf.hl,{onInteractOutside:()=>ed(!1),className:"z-[150]",children:(0,a.jsx)(sy,{mode:"single",selected:null==K?void 0:K.toJSDate(),onSelect:e=>{if(!e)return O(!1);H(e?sT.c9.fromJSDate(e):void 0)},disabled:{before:new Date}})})]})]})]})}),(0,a.jsx)(eQ,{className:"rounded-xl p-4 border border-surface-l5",rows:et?5:8,placeholder:c("create-custom-task-dialog.enter-prompt",{defaultValue:"Enter prompt here."}),value:I,onChange:e=>M(e.target.value),maxLength:8e3}),et&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 justify-between",children:(0,a.jsx)("p",{className:"text-xs text-fg-secondary font-semibold",children:c("create-custom-task-dialog.notifications-filter-label",{defaultValue:"Notification filter rules"})})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eQ,{disabled:!p,className:"rounded-xl p-4 border border-surface-l5 disabled:bg-surface-inset",rows:p?2:1,placeholder:c("create-custom-task-dialog.notifications-filter-placeholder",{defaultValue:"Always send notifications"}),value:ea,onChange:e=>el(e.target.value),maxLength:1e3}),!p&&(0,a.jsx)("div",{className:"flex items-center gap-2 absolute right-4 top-1/2 -translate-y-1/2  ",children:(0,a.jsx)(l.$n,{variant:"filledSecondary",size:"sm",onClick:S,children:(0,a.jsx)("span",{className:"text-sm font-semibold text-fg-primary",children:c("create-custom-task-dialog.upgrade-for-filtering","Upgrade for filtering rules")})})})]})]}),(0,a.jsx)(sL,{taskUsage:null==w?void 0:w.taskUsage,cadence:P,onClose:n}),C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sF,{value:q,toggleDeepsearch:ei}),(0,a.jsx)("div",{className:"flex justify-between mt-2 w-full",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(sB,{value:Y,setValue:J}),d&&(0,a.jsx)(l.gx,{tooltipContent:c("create-custom-task-dialog.filter","Filter notifications"),variant:"outline",onClick:er,className:(0,i.cn)("text-fg-secondary",{"bg-button-ghost-hover":et}),"aria-label":c("create-custom-task-dialog.filter","Filter notifications"),children:et?(0,a.jsx)(sA.A,{className:"text-fg-primary ",size:16}):(0,a.jsx)(sE.A,{size:16})}),(0,a.jsx)(l.$n,{variant:"filled",onClick:eu,disabled:!em,children:(0,a.jsx)("span",{className:"font-semibold",children:ec?c("create-custom-task-dialog.update","Update Task"):c("create-custom-task-dialog.create","Create Task")})})]})})]}):(0,a.jsxs)("div",{className:"flex justify-between mt-2 w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(sB,{value:Y,setValue:J}),d&&(0,a.jsxs)(l.gx,{tooltipContent:c("create-custom-task-dialog.filter","Filter notifications"),variant:"outline",onClick:er,className:(0,i.cn)("text-fg-secondary",{"bg-button-ghost-hover":et}),"aria-label":c("create-custom-task-dialog.filter","Filter notifications"),children:[et?(0,a.jsx)(sA.A,{className:"text-fg-primary ",size:16}):(0,a.jsx)(sE.A,{size:16})," "]}),(0,a.jsx)(sF,{value:q,toggleDeepsearch:ei})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(l.$n,{variant:"filled",onClick:eu,disabled:!em,children:(0,a.jsx)("span",{className:"font-semibold",children:ec?c("create-custom-task-dialog.update","Update Task"):c("create-custom-task-dialog.create","Create Task")})})})]})]})]})}function sL(e){let t,s,n,{taskUsage:r,cadence:i,onClose:o}=e,c=(0,sC.e)(X.A("setIsUpselling")),{isSuperGrokUser:d}=(0,ek.Q2)(),{t:u}=(0,j.Bd)("tasks"),h=(0,m.useCallback)(()=>{o(),c(!0)},[c,o]);if(!r)return null;let{frequentLimit:x,frequentUsage:f,occasionalLimit:p,occasionalUsage:g,remainingFrequent:v,remainingOccasional:b}=sR(r);return i===sw.G7.TaskCadenceOnceDaily?(t=u("create-custom-task-dialog.daily.remaining",{count:v,defaultValue:"{{count}} daily tasks remaining"}),s=u("create-custom-task-dialog.daily.current",{usage:f,limit:x,defaultValue:"Current: {{usage}}/{{limit}} daily tasks active"}),n=f/(x||1)*100,0===v&&(t=u("create-custom-task-dialog.daily.limit_reached",{usage:f,limit:x,defaultValue:"Reached daily tasks limit ({{usage}}/{{limit}})"}),s=d?"":u("create-custom-task-dialog.upgrade-for-more","Upgrade for more"))):(t=u("create-custom-task-dialog.occasional.remaining",{count:b,defaultValue:"{{count}} occasional tasks remaining"}),s=u("create-custom-task-dialog.occasional.current",{usage:g,limit:p,defaultValue:"Current: {{usage}}/{{limit}} occasional tasks active"}),n=g/(p||1)*100,0===b&&(t=u("create-custom-task-dialog.occasional.limit_reached",{usage:g,limit:p,defaultValue:"Reached occasional tasks limit ({{usage}}/{{limit}})"}),s=d?"":u("create-custom-task-dialog.upgrade-for-more","Upgrade for more"))),(0,a.jsxs)("div",{className:"flex items-center gap-4 rounded-xl border px-3 py-3 bg-surface-l1 justify-between mt-3 ",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(sp,{trackClassName:"stroke-border-l1",progressClassName:"stroke-blue-300",size:32,thickness:5,progressPercentage:n}),(0,a.jsxs)("div",{className:"flex flex-col gap-0 -my-0.5",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-fg-primary -mb-[2px]",children:t}),(0,a.jsx)("p",{className:"text-xs font-medium text-fg-secondary -mt-[2px]",children:s})]})]}),!d&&n>66&&(0,a.jsx)(l.$n,{variant:"outline",size:"sm",onClick:h,children:(0,a.jsx)("span",{className:"text-sm font-semibold text-fg-primary",children:u("create-custom-task-dialog.upgrade","Upgrade")})})]})}function sF(e){let{value:t,toggleDeepsearch:s}=e,{t:n}=(0,j.Bd)("tasks"),r=t===sw.Cg.Deepsearch;return(0,a.jsxs)(l.$n,{onClick:s,variant:"outline",className:(0,i.cn)({"bg-button-ghost-hover":r}),children:[(0,a.jsx)(em.A,{size:18,className:(0,i.cn)("text-fg-secondary transform transition duration-150 ease-in-out",r&&"text-fg-primary rotate-45 ")}),n("DeepSearch","DeepSearch")]})}function sB(e){let{value:t,setValue:s}=e,{t:n}=(0,j.Bd)("tasks"),r={DEFAULT:n("tasks.notification-method.enabled","Email + App"),EMAIL_ONLY:n("tasks.notification-method.email-only","Email Only"),APP_ONLY:n("tasks.notification-method.app-only","App Only"),OFF:n("tasks.notification-method.none","Off")},i=null!=t?t:"DEFAULT";return(0,a.jsxs)(sl.rI,{children:[(0,a.jsx)(sl.ty,{asChild:!0,children:(0,a.jsxs)(l.$n,{variant:"outline",className:"flex gap-3 font-medium",children:["OFF"===i?(0,a.jsx)(sI.A,{size:16}):(0,a.jsx)(sM.A,{size:16}),r[i]]})}),(0,a.jsx)(sl.SQ,{side:"top",align:"start",className:"min-w-36 space-y-0.5 z-[150]",children:Object.entries(r).map(e=>{let[t,n]=e;return(0,a.jsx)(sl._2,{onClick:()=>s(t),children:(0,a.jsx)("span",{className:"font-medium",children:n})},t)})})]})}function s$(e){let{value:t,onValueChange:s,isMobileSize:n}=e,{t:l}=(0,j.Bd)("tasks");return(0,a.jsxs)("div",{className:"flex items-center gap-3 font-medium",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-sm",children:l("tasks-day-in-month-label","Day in month to run:")}),!n&&(0,a.jsx)("label",{className:"text-xs text-fg-secondary",children:l("tasks-day-in-month-disclaimer-label","Will run on closest day")})]}),(0,a.jsx)("input",{className:"grow py-1 px-4 text-xs rounded-xl bg-transparent border stretch h-full",value:null!=t?t:"1",onChange:s,type:"number",min:0,max:31,"aria-label":l("tasks-day-in-month-label","Day in month to run:")})]})}function sG(e){let{weekdaysOnly:t,value:s,onValueChange:n}=e,{t:r}=(0,j.Bd)("tasks"),i=[...sD];return t&&(i.shift(),i.pop()),(0,a.jsxs)(sl.rI,{children:[(0,a.jsx)(sl.ty,{asChild:!0,children:(0,a.jsx)(l.$n,{className:"flex items-center justify-center h-full w-32 border",variant:"outline","aria-label":r("selected-day.label","Selected day"),children:s?s.label:"Select a day"})}),(0,a.jsx)(sl.SQ,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5 z-[150]",children:i.map(e=>(0,a.jsx)(sl._2,{onClick:()=>{n(e)},className:"flex items-center gap-2",children:e.label},e.value))})]})}function sV(){let[e,t]=(0,m.useState)(!0),{t:s}=(0,j.Bd)("tasks"),n=(0,tB.d)(X.A("createDialogIsOpen")),r=(0,tB.d)(X.A("handleSetCreateDialog")),i=(0,tB.d)(X.A("taskToEdit")),{client:o}=(0,en.useStatsigClient)(),c=(0,m.useCallback)(e=>r(e),[r]),d=(0,m.useCallback)(()=>{o.logEvent("close_task_button_clicked",void 0,{location:window.location.href}),r(!1)},[r,o]),u=(0,m.useCallback)(()=>t(!0),[]);return(0,m.useEffect)(()=>{i&&t(!0)},[i]),(0,a.jsx)(tY.lG,{open:n,onOpenChange:c,children:(0,a.jsx)(tY.Cf,{className:"max-w-[560px] w-full px-4 pt-2 pb-4 rounded-3xl border border-border-l1 flex flex-col gap-6",children:e?(0,a.jsx)(sz,{onClose:d,taskToEdit:i}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tY.c7,{children:(0,a.jsx)(tY.L3,{children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)("h1",{className:"font-semibold text-lg",children:s("create-task-dialog.title",{defaultValue:"Add task"})}),(0,a.jsx)(l.$n,{variant:"ghost",size:"iconMd",onClick:d,"aria-label":s("create-tasks-dialog.close","close create tasks dialog"),children:(0,a.jsx)(sd.A,{size:16})})]})})}),(0,a.jsxs)("div",{className:"gap-3 flex flex-col",children:[(0,a.jsxs)(l.$n,{variant:"outline",className:"w-full h-16",onClick:u,children:[(0,a.jsx)(su.A,{size:16}),s("tasks.create","Add new")]}),(0,a.jsx)("h1",{className:"text-xs font-normal text-fg-secondary",children:s("tasks.create","Suggested Templates")})]})]})})})}var sU=s(35692),sW=s(2280),sK=s(32093),sH=s(30616),sY=s(94202),sJ=s(31905),sq=s(2010),sX=s(25124),sQ=s(33105),sZ=s(11875),s0=s(65026),s1=s(35795);let s2=Math.ceil(240)+1;function s3(){var e,t,s,n,o,c,d;let{t:u}=(0,j.Bd)("tasks"),{isMobileSize:h,isTouchDevice:x}=(0,D.Iu)(),f=(0,tB.d)(X.A("selectedTaskForSidePanel")),p=(0,tB.d)(X.A("createDialogIsOpen")),{push:g}=(0,tL.wK)(),{getScheduleLabel:v,getNextRunLabel:b}=(0,sk.Ik)(),{getUserTasksQuery:k,onSetSelectedTask:w}=(0,sk.ek)(),C=(0,r.h)(),[N,S]=(0,m.useState)(!1),{client:_}=(0,en.useStatsigClient)(),[A,E]=(0,m.useState)(!1),[I,M]=(0,m.useState)(0),T=(0,m.useCallback)(()=>{S(!1),M(0),E(!1)},[]);(0,m.useEffect)(()=>{_.logEvent("tasks_side_panel_open",void 0,{})},[_]),(0,m.useEffect)(()=>{I>=s2&&T()},[T,I]);let{data:O}=k,R=(null==f||null==(e=f.task)?void 0:e.taskId)?["task-results",null==f||null==(t=f.task)?void 0:t.taskId]:[],{isLoading:z,data:L,refetch:F}=(0,eS.IT)({queryKey:R,queryFn:async()=>{var e,t;if(!(null==f||null==(e=f.task)?void 0:e.taskId))throw Error("TaskId is required");return eN.Cs.grokTasksGetTaskResults({taskId:null==f||null==(t=f.task)?void 0:t.taskId}).then(async e=>{var t;let s=(0,eu.SX)();return M(e=>e+1),await s.invalidateQueries({queryKey:["user-tasks"]}),await s.invalidateQueries({queryKey:["latest-task-result",null==(t=f.task)?void 0:t.taskId]}),e})},enabled:C.ENABLE_GROK_TASKS&&!!(null==f||null==(s=f.task)?void 0:s.taskId),refetchInterval:N,refetchOnMount:"always",staleTime:0}),B=(0,m.useMemo)(()=>(null==L?void 0:L.results)?L.results.filter(e=>e.status!==sw.cn.TaskResultPending):[],[L]),$=(0,m.useMemo)(()=>(null==f?void 0:f.schedules)!==void 0&&!!f.schedules.find(e=>e.taskCadence===sw.G7.TaskCadenceOnceInstant&&!1===e.isCompleted),[f]),G=(0,m.useMemo)(()=>{var e;return null==L||null==(e=L.results)?void 0:e.find(e=>e.status===sw.cn.TaskResultPending)},[null==L?void 0:L.results]),V=(0,m.useMemo)(()=>{var e;return G?null!=(e=null==L?void 0:L.results)?e:[]:B},[B,G,null==L?void 0:L.results]);(0,m.useEffect)(()=>{(async()=>{G&&E(!1),$||G?S(5e3):T();let e=(0,eu.SX)();await e.invalidateQueries({queryKey:["user-tasks"]})})()},[T,$,G,L]);let U=.4*document.body.clientWidth,W=!!f,K=null==f||null==(n=f.schedules)?void 0:n.at(0),H=(0,m.useCallback)(()=>{_.logEvent("close_side_panel_clicked",void 0,{}),w(void 0)},[w,_]),Y=(0,m.useMemo)(()=>{if(null==K?void 0:K.nextRun)return b(K.nextRun,K.isCompleted)},[b,K]),J=(0,m.useCallback)(()=>{_.logEvent("refresh_task_results_clicked",void 0,{}),F().then(()=>{(0,eu.SX)().invalidateQueries({queryKey:["user-tasks"]})}).catch(e=>y.oR.error(e))},[F,_]),{mutate:q}=(0,eS.n_)({mutationFn:async e=>{let{taskResultIds:t,value:s}=e;return await eN.Cs.grokTasksBatchSetIsReadForTaskResult({value:s,taskResultIds:t})},onSuccess:()=>J(),onError:e=>{console.error(e)}}),Q=(0,m.useCallback)(()=>{var e,t;_.logEvent("mark_all_is_read_clicked",void 0,{}),q({value:!0,taskResultIds:null!=(t=null==L||null==(e=L.results)?void 0:e.map(e=>e.taskResultId).filter(e=>!!e))?t:[]})},[q,null==L?void 0:L.results,_]),Z=(0,m.useMemo)(()=>{var e,t;let s=null==O||null==(e=O.unreadCounts)?void 0:e.find(e=>{var t;return e.taskId&&(null==f||null==(t=f.task)?void 0:t.taskId)&&e.taskId===f.task.taskId});return null!=(t=null==s?void 0:s.unreadCount)?t:0},[f,O]),et=!(null==f||null==(o=f.task)?void 0:o.isActive),es=!!(f&&(null==(c=f.task)?void 0:c.isActive)&&(null==K?void 0:K.isEnabled)),ea=(0,tB.d)(X.A("handleSetTaskToEdit")),{setIsEnabledForTaskSchedule:el,addInstantScheduleForTask:er}=(0,sk.ek)(),ei=(0,m.useCallback)(()=>{if(_.logEvent("edit_task_clicked",void 0,{}),!f)return null;ea((0,sk.Yc)(f))},[ea,f,_]),eo=(0,m.useCallback)(()=>{if(_.logEvent("pause_task_clicked",void 0,{}),!K)return null;el({enabled:!1,scheduleId:null==K?void 0:K.scheduleId})},[K,el,_]),ec=(0,m.useCallback)(()=>{if(_.logEvent("resume_task_clicked",void 0,{}),!K)return null;el({enabled:!0,scheduleId:null==K?void 0:K.scheduleId})},[K,el,_]),ed=(0,m.useCallback)(()=>{var e;return _.logEvent("clicked_task_result",void 0,{location:"tasks-side-panel"}),er({taskId:null==f||null==(e=f.task)?void 0:e.taskId}),E(!0),S(5e3),null},[er,null==f||null==(d=f.task)?void 0:d.taskId,_]),em=(0,m.useRef)(null),[eh,ex]=(0,m.useState)(!0),[ef,ep]=(0,m.useState)(!1);(0,m.useEffect)(()=>{let e=()=>{if(em.current){let{scrollTop:e,scrollHeight:t,clientHeight:s}=em.current;0===e?ex(!0):ex(!1),e+s>=t-5?ep(!0):ep(!1)}},t=em.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}},[em,V,A]);let eg=()=>{var e,t;return f&&K&&f.task?(0,a.jsxs)("div",{className:(0,i.cn)("max-h-[100vh] overflow-hidden w-full p-4 flex flex-col gap-4",{"max-h-[90vh] overflow-scroll":h()}),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 h-full",children:[h()?(0,a.jsx)("div",{className:"text-xl font-semibold",children:null==(e=f.task)?void 0:e.name}):(0,a.jsx)("h1",{className:"text-xl font-semibold",children:null==(t=f.task)?void 0:t.name}),(0,a.jsxs)("div",{className:"flex gap-1 items-center",children:[!et&&(0,a.jsx)(s6,{}),(0,a.jsx)(l.$n,{variant:"ghost",size:"iconMd",onClick:H,"aria-label":u("task-results.close","close task results"),children:(0,a.jsx)(sd.A,{size:16})})]})]}),(0,a.jsx)("div",{className:"flex gap-4",children:(0,a.jsxs)("div",{className:"grow flex flex-col p-3 rounded-2xl border bg-surface-l1 gap-1",children:[(0,a.jsx)("h1",{className:"text-sm font-medium text-fg-secondary flex items-center gap-1",children:u("tasks-results.schedule","Schedule")}),(0,a.jsxs)("h1",{className:"text-sm font-semibold text-fg-primary flex items-center gap-1",children:[K.taskCadence===sw.G7.TaskCadenceOnce||K.taskCadence===sw.G7.TaskCadenceOnceInstant?(0,a.jsx)(sH.A,{size:14}):(0,a.jsx)(sY.A,{size:14}),K.timeOfDay&&K.taskCadence&&K.timezone&&(0,a.jsx)("p",{className:"flex items-center gap-1 text-sm font-medium",children:v(K.taskCadence,K.timeOfDay,K.timezone,K.dayOfWeek,K.dayOfMonth,K.dayOfYear)})]}),et?(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm font-medium text-fg-secondary",children:[(0,a.jsx)(sJ.A,{size:14})," ",u("tasks-results.next-run","Archived")]}):es?(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm font-medium text-fg-secondary",children:[u("tasks-results.next-run","Next run"),": ",Y]}):(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm font-medium text-yellow-200",children:[(0,a.jsx)(sq.A,{size:14})," ",u("tasks-results.next-run","Paused")]})]})}),(0,a.jsxs)("div",{className:"w-full flex flex-col p-3 rounded-2xl border bg-surface-l1 gap-1",children:[(0,a.jsx)("h1",{className:"text-sm font-medium text-fg-secondary",children:u("tasks-results.instruction","Instruction")}),(0,a.jsx)("p",{className:"flex items-center gap-1 text-sm font-medium",children:f.task.prompt}),(0,a.jsx)("p",{className:"text-sm font-medium text-fg-secondary",children:"Grok 3 \xb7 ".concat(f.task.modelMode===sK.Cge.Deepsearch?"DeepSearch":"Auto")})]}),(0,a.jsxs)("div",{className:"w-full flex flex-row gap-2 justify-between",children:[(0,a.jsxs)(l.$n,{variant:"outline",size:"iconMd",className:"w-full",onClick:ei,children:[(0,a.jsx)(sX.A,{size:12}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:u("tasks-result.edit-label","Edit")})]}),es||et?(0,a.jsxs)(l.$n,{variant:"outline",size:"iconMd",className:"w-full",onClick:eo,disabled:A||et,children:[(0,a.jsx)(sQ.A,{size:13}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:u("tasks-result.pause-label","Pause")})]}):(0,a.jsxs)(l.$n,{variant:"outline",size:"iconMd",className:"w-full",onClick:ec,disabled:et,children:[(0,a.jsx)(sZ.A,{size:13}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:u("tasks-result.resume-label","Resume")})]}),(0,a.jsxs)(l.$n,{variant:"outline",size:"iconMd",className:"w-full",onClick:ed,disabled:$||et,children:[(0,a.jsx)(s0.A,{size:13}),(0,a.jsx)("p",{className:"font-semibold text-sm",children:u("tasks-result.test-label","Test")})]})]}),(0,a.jsxs)("div",{className:"flex justify-between w-full items-center pt-4 px-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 h-8",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold",children:u("tasks-results.history-label","History")}),Z>0&&(0,a.jsx)(l.$n,{size:"sm",variant:"outline",onClick:Q,children:u("task-results.mark-all-read","Mark all as read")})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(null==L?void 0:L.results)&&(0,a.jsx)("p",{className:"text-xs text-fg-secondary",children:L.results.length>0?u("task-result.records",{count:L.results.length,defaultValue_one:"{{count}} record",defaultValue_other:"{{count}} records"}):null})})]}),z?(0,a.jsx)("div",{className:"items-center flex justify-center self-stretch",children:(0,a.jsx)(tg.y,{size:"sm","aria-label":u("task-results.loading","task results loading")})}):V.length>0||A?(0,a.jsxs)("div",{className:(0,i.cn)("h-full w-full flex flex-col pb-4",{"relative no-scrollbar overflow-auto":!h()}),ref:em,style:eh?{maskImage:sW.pA,WebkitMaskImage:sW.pA}:ef?{maskImage:sW.l1,WebkitMaskImage:sW.l1}:{maskImage:"".concat(sW.l1,", ").concat(sW.pA),WebkitMaskImage:"".concat(sW.l1,", ").concat(sW.pA),maskComposite:"intersect"},children:[A&&(0,a.jsxs)(l.$n,{className:"w-full flex justify-between rounded-xl relative py-7 pl-3 pr-5",variant:"ghost",disabled:!0,children:[(0,a.jsx)("div",{className:"w-[30px] h-[30px] m-0 p-0",children:(0,a.jsx)("div",{className:"relative flex w-[30px] h-[30px] bg-surface-l1 border border-surface-l2 rounded-full pl-[1px] m-0 items-center justify-center",children:s4(sw.cn.TaskResultPending)})}),(0,a.jsxs)("div",{className:"flex flex-col w-full items-start",children:[(0,a.jsx)("p",{className:"text-sm text-fg-primary font-medium",children:u("task-result-default-label","Task result")}),(0,a.jsx)("p",{className:"text-xs text-fg-secondary font-medium",children:u("task-result.running","Task running...")})]})]}),V.map((e,t)=>{let s=!e.isRead&&e.status===sw.cn.TaskResultSuccess&&!et;return(0,a.jsx)(ee.P.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{type:"ease",ease:"easeInOut",duration:.2,delay:.1*(t+1)},className:"relative no-scrollbar",children:(0,a.jsx)(s5,{taskResult:e,handleResultClick:()=>{if(_.logEvent("task_result_clicked",void 0,{}),!e.conversationId)return null;g({page:"chat",conversationId:e.conversationId,temporary:!1})},showNotificationBlip:s})},e.taskResultId)})]}):(0,a.jsx)("div",{className:"items-center flex justify-center self-stretch",children:0===V.length&&(0,a.jsx)(ee.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{type:"ease",ease:"easeInOut",duration:.2},children:(0,a.jsx)("h1",{className:"text-fg-secondary font-semibold text-lg",children:u("task-results.no-records","No records yet")})})})]}):null};return h()?(0,a.jsx)(P._s,{open:W,modal:!p,children:(0,a.jsx)(P.zj,{className:"focus:outline-none",disableDrag:!x(),children:eg()})}):(0,a.jsx)(tH.w,{isVisible:W,minWidth:550,maxWidth:U,initialWidth:U,className:"max-w-[40%] xl:max-w-none",children:eg()})}function s5(e){var t;let{taskResult:s,handleResultClick:n,showNotificationBlip:r}=e,{t:i}=(0,j.Bd)("tasks");return(0,a.jsxs)(l.$n,{className:"w-full flex justify-between rounded-xl relative py-7 pl-3 pr-5",variant:"ghost",disabled:!s.conversationId,onClick:n,children:[(0,a.jsx)("div",{className:"w-[30px] h-[30px] m-0 p-0",children:(0,a.jsx)("div",{className:"relative flex w-[30px] h-[30px] bg-surface-l1 rounded-full pl-[1px] m-0 items-center justify-center border-border-l1 border",children:s4(s.status)})}),(0,a.jsxs)("div",{className:"flex flex-col w-full items-start text-wrap text-start",children:[(0,a.jsx)("p",{className:"text-sm text-fg-primary font-medium",children:s.title&&0!==s.title.length?s.title:i("task-result-default-label","Task result")}),(0,a.jsxs)("p",{className:"text-xs text-fg-secondary font-medium",children:[(t=s.createTime)?new Date(t).toDateString():null," \xb7 ",s.status===sw.cn.TaskResultPending&&i("task-result.running","Task running..."),s.status!==sw.cn.TaskResultPending&&function(e,t,s){if(!e||!t)return null;let a=new Date(e),n=new Date(t),l=void 0!=s&&s>-1?s:n.getTime()-a.getTime(),r=sT.dw.fromMillis(l);if(60>r.as("seconds"))return"Ran for ".concat(r.as("seconds").toFixed(2)," s");{let e=Math.floor(r.as("minutes")),t=Math.floor(r.as("seconds")%60);return"Ran for ".concat(e,"m ").concat(t,"s")}}(s.createTime,s.updateTime,s.execTime)]})]}),r&&(0,a.jsx)(sU.x,{})]})}function s4(e){switch(e){case sw.cn.TaskResultPending:return(0,a.jsx)(tg.y,{size:"xs"});case sw.cn.TaskResultSuccess:return(0,a.jsx)(s1.A,{size:14});case sw.cn.TaskResultError:return(0,a.jsx)(d.A,{size:14,className:"text-red-300"});default:return(0,a.jsx)(e8.A,{size:14})}}function s6(){let e=(0,tB.d)(X.A("selectedTaskForSidePanel")),{onSetSelectedTask:t}=(0,sk.ek)(),{t:s}=(0,j.Bd)("tasks"),{setIsActiveForTask:n}=(0,sk.ek)(),{client:r}=(0,en.useStatsigClient)(),[i,o]=(0,m.useState)(!1),c=(0,m.useCallback)(()=>{o(!0)},[]),d=(0,m.useCallback)(()=>{o(!1)},[]),u=(0,m.useCallback)(()=>{var s;if(r.logEvent("archive_task_clicked",void 0,{location:"archive-button"}),d(),!e)return null;setTimeout(()=>t(void 0),250),n({enabled:!1,taskId:null==(s=e.task)?void 0:s.taskId})},[d,t,e,n,r]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tq.lG,{open:i,onOpenChange:o,children:(0,a.jsxs)(tY.Cf,{className:"w-full max-w-[350px] p-4 rounded-2xl border border-border-l1 flex flex-col gap-6",children:[(0,a.jsx)(tY.c7,{children:(0,a.jsx)(tq.L3,{children:(0,a.jsx)("h3",{className:"font-semibold text-sm",children:s("are you sure","Are you sure you want to archive your task?")})})}),(0,a.jsx)("p",{className:"text-sm text-fg-secondary",children:s("archive-description","This cannot be undone. (You will still have access to all current task results and chat conversations)")}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[(0,a.jsx)(l.$n,{variant:"outline",size:"md",onClick:d,children:s("archive-cancel","Cancel")}),(0,a.jsx)(l.$n,{variant:"destructive",size:"md",onClick:u,children:s("archive-confirm","Confirm")})]})]})}),(0,a.jsx)(l.gx,{onClick:c,variant:"ghost",size:"iconMd","aria-label":s("task-archive-label","Archive"),tooltipContent:s("task-archive-label","Archive"),children:(0,a.jsx)(sJ.A,{size:14})})]})}function s8(e){let{children:t}=e,s=(0,r.h)(),l=(0,r.y)(s),{client:i}=(0,en.useStatsigClient)(),o=(0,K.w)(X.A("list")),c=(0,B.c)(),{os:d}=(0,ea.c)(),u=(0,g.useSession)(),x=(0,q.usePathname)(),p=!(null==x?void 0:x.startsWith("/coming-soon")),v=(0,J.C$)(X.A("showAgeVerification")),y=(0,J.C$)(X.A("ageVerificationCallback")),w=(0,tB.d)(X.A("createDialogIsOpen")),C=(0,eu.SX)();(function(e){var t;let[s,a]=(0,h.A)("hasPreviouslyInitUserSettings",!1),{data:n}=(0,ek.Q2)(),l=null==n||null==(t=n.subscriptions)?void 0:t.some(e=>!!e.enterprise),{client:r}=(0,en.useStatsigClient)();(0,m.useEffect)(()=>{var t,n;if(e.user){if(null==(n=e.user)||null==(t=n.email)?void 0:t.endsWith("@x.ai"));else if(eB(e.countryCode)){if(r.logEvent("initialize_gdpr_user_settings",e.countryCode,{location:"loadout",countryCode:e.countryCode||"",hasPreviouslyInitUserSettings:String(s)}),!s)return void J.C$.getState().initializeGdprUserSettings().then(()=>a(!0)).catch(()=>(0,b.vV)("loadout","Failed to initialize GDPR user settings"))}else if(l)return void J.C$.getState().initializeEnterpriseUserSettings().catch(()=>(0,b.vV)("loadout","Failed to initialize enterprise user settings"));J.C$.getState().fetchGetUserSettings().catch(()=>(0,b.vV)("loadout","Failed to load user settings"))}},[e.user])})(u),function(e){let{personalityPresets:t}=function(){let e=(0,r.h)(),{t}=(0,j.Bd)("base"),s={concise:t("personality.concise.name","Concise"),formal:t("personality.formal.name","Formal"),socratic:t("personality.socratic.name","Socratic")},a={concise:t("personality.concise.description","Responds briefly and directly."),formal:t("personality.formal.description","Responds using a formal tone."),socratic:t("personality.socratic.description","Responds in a way to help you learn.")},n=(0,m.useMemo)(()=>{let t=(e.PERSONALITY_PRESETS.value.personalityPresets&&Array.isArray(e.PERSONALITY_PRESETS.value.personalityPresets)?e.PERSONALITY_PRESETS.value.personalityPresets:[]).map(e=>Y.yo.safeParse(e)).filter(e=>e.success).map(e=>{var t,n;let{data:l}=e;return{...l,isPreset:!0,name:null!=(t=s[l.personalityId])?t:l.name,description:null!=(n=a[l.personalityId])?n:l.description}});return W().keyBy(t,e=>e.personalityId)},[e.PERSONALITY_PRESETS.value]);return{personalityPresets:(0,m.useMemo)(()=>Object.values(n),[n]),personalityPresetById:n}}();(0,m.useEffect)(()=>{Y.jN.getState().appendPersonalities(t)},[t]),(0,m.useEffect)(()=>{e.user&&Y.jN.getState().fetchListPersonalities().catch(e=>(0,b.vV)("loadout:fetchList","Failed to load custom personalities: ".concat(e)))},[e.user])}(u),function(e){let t=(0,ek.Q2)();(0,m.useEffect)(()=>{if((e.user||e.anonUser)&&!t.isPending){var s,a,n;tF.x.setState({hasSubscriptions:null==(s=t.data)?void 0:s.hasSubscriptions,subscriptions:null==(a=t.data)?void 0:a.subscriptions,bestSubscription:null==(n=t.data)?void 0:n.bestSubscription})}},[t.data,e.user,e.anonUser,t.isPending])}(u),function(e){let t=(0,$.GB)();(0,m.useEffect)(()=>{(e.user||e.anonUser)&&(t.isPending||H.V.setState(t))},[t,e.user,e.anonUser])}(u),(0,m.useEffect)(()=>{!function(){let e=!1,t=0,s=0,a=null;function n(){"visible"===document.visibilityState&&(e||(e=!0,t=performance.now()),null!==a&&clearTimeout(a),a=setTimeout(l,1e4))}function l(){if(e){e=!1;let a=performance.now()-t;s+=a,(0,V.$s)("session_active_time",a,{sessionActiveTimeMs:a.toString(),totalActiveTimeMs:s.toString()})}}document.addEventListener("mousemove",W().throttle(n,500)),document.addEventListener("keydown",W().throttle(n,500)),document.addEventListener("click",W().throttle(n,500)),document.addEventListener("scroll",W().throttle(n,500)),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&e&&l(),"visible"!==document.visibilityState||e||n()}),window.addEventListener("beforeunload",()=>{e&&l()})}()},[]),(0,m.useEffect)(()=>{console.info("\nâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“\nâ–‘                                        â–‘\nâ–‘                                        â–‘\nâ–‘                                 â–‘â–’â–‘    â–‘\nâ–‘                â–‘â–‘â–’â–’â–’â–’â–’â–‘â–‘â–‘     â–‘â–ˆâ–‘      â–‘\nâ–‘            â–‘â–’â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–‘ â–’â–ˆâ–ˆâ–‘       â–‘\nâ–‘          â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–“â–‘         â–‘â–“â–ˆâ–ˆâ–ˆâ–‘        â–‘\nâ–‘         â–‘â–ˆâ–ˆâ–ˆâ–’          â–‘â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘        â–‘\nâ–‘         â–ˆâ–ˆâ–ˆâ–‘         â–‘â–ˆâ–ˆâ–’  â–“â–ˆâ–ˆâ–ˆâ–‘       â–‘\nâ–‘        â–‘â–ˆâ–ˆâ–ˆâ–‘       â–’â–ˆâ–’      â–ˆâ–ˆâ–ˆâ–‘       â–‘\nâ–‘         â–ˆâ–ˆâ–ˆâ–‘     â–’â–‘â–‘       â–’â–ˆâ–ˆâ–ˆâ–‘       â–‘\nâ–‘         â–’â–ˆâ–ˆâ–ˆâ–‘             â–‘â–ˆâ–ˆâ–ˆâ–‘        â–‘\nâ–‘         â–‘â–ˆâ–ˆâ–ˆâ–“â–‘         â–‘â–’â–ˆâ–ˆâ–ˆâ–ˆâ–‘         â–‘\nâ–‘         â–“â–ˆâ–‘ â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘           â–‘\nâ–‘       â–’â–’â–‘     â–‘â–‘â–’â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–‘â–‘              â–‘\nâ–‘     â–’â–‘                                 â–‘\nâ–‘                                        â–‘\nâ–‘                                        â–‘\nâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–“\n\nCurious? Join us at https://x.ai/careers")},[]),tU(),(0,m.useEffect)(()=>{if(!l)return void i.logEvent("loadout_not_success",String(l),{location:"loadout"});i.logEvent("loadout_success",String(l),{location:"loadout"})},[i,l]);let{route:N}=(0,tL.wK)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sc,{},"report-dialog"),s.ENABLE_GROK_TASKS&&u.user&&(0,a.jsx)(sV,{},"".concat(w,"-task-dialog")),(0,a.jsx)(tS,{}),(0,a.jsx)(Z.Xs,{}),(0,a.jsxs)(L.Bc,{delayDuration:100,skipDelayDuration:0,disableHoverableContent:!0,children:[!u.user&&!c&&!!o.length&&(0,a.jsx)(z,{}),(0,a.jsx)(f,{}),s.SHOW_STARRY_IDLE&&"main"===N.page&&(0,a.jsx)(et,{inactivityDelay:1e4,fadeDuration:1e4,children:(0,a.jsx)(tA,{})}),s.USE_APP_SIDEBAR_V2&&(0,a.jsx)(Q.q,{}),(0,a.jsxs)("div",{className:"flex w-full h-full overflow-hidden @container/mainview",children:[s.SHOW_OPEN_IN_APP_DIALOG&&"ios"===d&&(0,a.jsx)(ed,{}),v&&!u.user&&(0,a.jsx)(n.TL,{onPass:y}),p&&(0,a.jsx)(k,{}),(0,a.jsx)(tR,{children:t})]}),(0,a.jsx)(sn,{}),(0,a.jsx)(s3,{}),(0,a.jsx)(F.KC,{}),(0,a.jsx)(s7,{})]}),C&&!1,(0,a.jsx)(tE,{})]})}function s7(){let{t:e}=(0,j.Bd)("base"),t=G(),s=(0,m.useRef)(null);return(0,m.useEffect)(()=>{t||s.current?s.current&&(y.oR.dismiss(s.current),s.current=null):s.current=y.oR.error(e("You are offline","You are offline"),{duration:1/0})},[t]),null}},29658:(e,t,s)=>{"use strict";s.d(t,{x:()=>Y});var a=s(79342),n=s(1729),l=s(77334),r=s(56691),i=s(61884),o=s(8800),c=s(75500),d=s(24734),u=s(17703),m=s(93587),h=s(83612),x=s(20337),f=s(31643),p=s(84139),g=s(87164),v=s(23468),b=s(88382),j=s(65146),y=s(14908),k=s(69458),w=s(80640),C=s(21492),N=s(43086),S=s(52371),_=s(10636),A=s(11875);function E(e){let{artifact:t}=e,{mode:s,setMode:n}=(0,h.D4)(),{t:l}=(0,j.Bd)("chat"),r=(0,c.h)(),i=(0,k.j$)(t,r),o=(0,k.s3)(t)&&r.ENABLE_REPORT_LOADING_SCREEN,d=(0,k.rv)(t);return(0,b.useEffect)(()=>{n(!t.incomplete&&i||o?"preview":"code")},[t.id,t.incomplete,i,o,n]),(0,a.jsx)(S.tU,{className:"flex-1 flex-row justify-center flex",defaultValue:"code",value:s,onValueChange:e=>n(e),children:(0,a.jsxs)(S.j7,{children:[(0,a.jsxs)(S.Xi,{className:"gap-1",value:"code","aria-label":l("Code","Code"),children:[(0,a.jsx)(_.A,{className:"size-4"}),(0,a.jsx)("span",{className:"hidden md:inline",children:l("Code","Code")})]}),(0,a.jsxs)(S.Xi,{className:"gap-1",value:"preview","aria-label":l("Preview","Preview"),disabled:t.incomplete&&!o,children:[t.incomplete?(0,a.jsx)(N.y,{size:"xxs"}):(0,a.jsx)(A.A,{className:"size-3"}),(0,a.jsx)("span",{className:"hidden md:inline",children:o?l("artifact.preview.document","Document"):l("Preview","Preview")+(d?" (Beta)":"")})]})]})})}var I=s(42419),M=s(44566),T=s(94215),O=s(70526),P=s(55680),D=s(93038);function R(e){var t;let s=e.contentType||"plain/text",a=null==(t=e.title)?void 0:t.replace(/\.[^/.]+$/,""),n=D.extension(s)||L[s]||z,l=a||e.id||"".concat(Date.now().toString());return"".concat(l,".").concat(n)}let z="txt",L={"text/python":"py","text/go":"go","text/rust":"rs","text/javascript":"js","text/typescript":"ts","text/jsx":"js","text/tsx":"ts","text/cpp":"cpp","text/java":"java","text/latex":"tex"},F=(0,b.memo)(e=>{var t;let{t:s}=(0,j.Bd)("chat"),{artifact:n,iconProps:l}=e,{SHOW_ARTIFACT_TO_WORKSPACE_BUTTON:o}=(0,c.h)(),{content:u}=(0,w.S)({artifact:n}),m=!!(o&&u),{data:h,error:x,isPending:f}=(0,T.$1)(n.conversationId,m);(0,d.Y)("save-to-workspace-button",x);let p=null==h?void 0:h[0],g=null!=(t=null==p?void 0:p.workspaceId)?t:"",{data:v,isPending:b}=(0,T.UL)(g),k=(0,M.x)(g),{mutate:C}=(0,T.Iv)(g);if(!m||!p)return null;let S=p.name,_=s("artifact-save-to-workspace-button.label",'Save to workspace "{{workspaceName}}"',{workspaceName:S});return(0,a.jsxs)(i.m_,{delayDuration:300,children:[(0,a.jsx)(i.k$,{asChild:!0,children:(0,a.jsx)(r.$n,{variant:"ghost",size:"icon",className:"rounded-full hidden sm:flex",onClick:()=>{var e,t;if((null!=(t=null==v||null==(e=v.assets)?void 0:e.length)?t:0)>=O.aD)return void k();C(function(e,t){let s=e.contentType||"plain/text";return new File([null!=t?t:""],R(e),{type:s})}(n,u),{onSuccess(){y.oR.success(s("artifact-save-to-workspace.success",'File added to workspace "{{workspaceName}}"',{workspaceName:S}))}})},"aria-label":_,children:f||b?(0,a.jsx)(N.y,{size:"xs","aria-busy":"true"}):(0,a.jsx)(P.A,{...l})})}),(0,a.jsx)(i.ZI,{children:(0,a.jsx)("p",{children:_})})]})});var B=s(97325),$=s(73772),G=s(93649),V=s(61312),U=s(83123),W=s(81743),K=s(87992);let H=e=>{let{artifact:t,readOnly:s}=e,{setSidePanelContent:n,sidePanelContent:l}=(0,B.aP)(),{client:i}=(0,x.useStatsigClient)(),{versions:o,isLoading:c}=(0,w.S)({artifact:t}),{t:d}=(0,j.Bd)("chat"),u=(0,b.useMemo)(()=>[...null!=o?o:[]].reverse().filter(e=>"string"==typeof e.fullArtifact).map(e=>({...e,artifact:(0,K.t)(e.fullArtifact)})),[o]),m=(0,b.useCallback)(e=>{if(e){var s;i.logEvent("artifact_versions_open",void 0,{contentType:null!=(s=t.contentType)?s:"undefined"})}},[t.contentType,i]),h=c||!o||o.length<2;return(0,a.jsxs)($.rI,{onOpenChange:m,children:[(0,a.jsx)($.ty,{asChild:!0,disabled:h,children:(0,a.jsx)(r.gx,{variant:"ghost",size:"iconMd",rounded:!0,disabled:h,tooltipContent:(0,a.jsx)("p",{children:d("Version History","Version History")}),"aria-label":d("Version History","Version History"),tooltipProps:{delayDuration:300},children:c?(0,a.jsx)(N.y,{size:"xs"}):(0,a.jsx)(W.A,{strokeWidth:2,size:18})})}),(0,a.jsx)($.SQ,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:u.map((e,t)=>{var r,i;let o;if(e.createTime){let t=Date.parse(e.createTime);o=(0,U.a)(t,Date.now(),{locale:G.A.language})}let c=(null==l?void 0:l.type)==="artifact"&&e.artifact.id===(null==l||null==(r=l.data)?void 0:r.artifact.id)&&e.artifact.versionId===(null==l||null==(i=l.data)?void 0:i.artifact.versionId);return(0,a.jsxs)($._2,{onClick:()=>{n({type:"artifact",data:{artifact:e.artifact,readOnly:s}});let t=document.getElementById("artifact_card_".concat(e.artifact.versionId));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},className:(0,V.cn)("flex flex-col items-start px-3 py-2",c?"bg-toggle-hover":void 0),children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:d("artifact.version.number","Version {{version_number}}",{version_number:u.length-t})}),o?(0,a.jsx)("div",{className:"text-xs text-secondary",children:o}):void 0]},"version_".concat(t))})})]})};function Y(e){var t,s,N;let{artifact:S,contentButtons:_,readOnly:A,standalone:M}=e,{t:T}=(0,j.Bd)("chat"),{client:O}=(0,x.useStatsigClient)(),{content:P}=(0,w.S)({artifact:S}),{refresh:D,mode:z}=(0,h.D4)(),L=(0,c.h)(),B=(0,d.K)(),[$,G]=(0,b.useState)(!1),[V,U]=(0,b.useState)(!1),W=(0,b.useRef)(void 0),{mutate:K}=(0,f.n_)({mutationKey:["share-artifact",S.conversationId,S.responseId],mutationFn:()=>m.chatApi.chatShareArtifact({conversationId:S.conversationId,body:{responseId:S.responseId}})}),Y=(0,b.useCallback)(e=>{e instanceof Error&&((0,u.vV)("artifact-controls:handlePublish",e),B("artifact-controls:handlePublish",e,T("artifact-controls.error.share-artifact","Failed to share artifact")))},[T,B]),q=(0,b.useCallback)(async()=>{var e;O.logEvent("artifact_publish_click",void 0,{contentType:null!=(e=S.contentType)?e:"undefined"});let t=async()=>new Promise((e,t)=>{K(void 0,{onSuccess:s=>{if(!s.sharedArtifactId)return Y(Error("Could't find sharedArtifactId")),t();e("".concat(window.location.origin,"/artifact/").concat(s.sharedArtifactId))},onError:e=>{Y(e),t()}})});try{let e=await t(),s=new ClipboardItem({"text/plain":new Blob([e],{type:"text/plain"})});navigator.clipboard.write([s]).then(()=>{y.oR.success(T("Copied public artifact link to clipboard.","Copied public artifact link to clipboard.")),U(!0),setTimeout(()=>U(!1),1e3)}).catch(e=>y.oR.error(e.message))}catch(e){Y(e)}},[]),X=(0,n.I5)(S.contentType),{result:Q,codeExecutionAvailable:Z}=(0,o.P)(P,null!=(s=S.language)?s:X),ee="preview"===z&&(0,k.rv)(S)&&Object.values(null!=(N=null==Q?void 0:Q.outputFiles)?N:{}).find(e=>e.endsWith(".pdf")||e.includes(".pdf?")),et=!L.DISABLE_PYTHON_ARTIFACTS,es=(null==(t=S.contentType)?void 0:t.includes("text/html"))||et&&(0,k.gq)(S)||Z(),ea=(0,b.useCallback)(async()=>{var e;O.logEvent("artifact_copy_click",void 0,{contentType:null!=(e=S.contentType)?e:"undefined"}),P&&("text/markdown"===S.contentType?await (0,I.L)(P):await navigator.clipboard.writeText(P),G(!0),W.current&&(clearTimeout(W.current),W.current=void 0),W.current=setTimeout(()=>G(!1),2e3))},[P,S.contentType,O]),en=(0,C.v)(S,null!=P?P:""),el=(0,b.useCallback)(()=>{var e;if(O.logEvent("artifact_download_click",void 0,{contentType:null!=(e=S.contentType)?e:"undefined"}),ee){let e=document.createElement("a");e.href=ee,e.target="_blank",e.download=R(S).replace(".tex",".pdf").replace(".txt",".pdf"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}else if(P){let e=S.contentType||"plain/text",t=new Blob([(e.includes("text/html")?en.script:"")+P],{type:e}),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=R(S),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s)}},[O,S,P,ee,en.script]);return S.id?(0,a.jsxs)("div",{className:"flex w-full justify-between items-center mr-2",children:[null!=_?_:null,es?(0,a.jsx)("div",{className:"pr-4",children:(0,a.jsx)(E,{artifact:S})}):null,(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[es&&"preview"===z?(0,a.jsxs)(i.m_,{delayDuration:300,children:[(0,a.jsx)(i.k$,{asChild:!0,children:(0,a.jsx)(r.$n,{variant:"ghost",size:"iconMd",rounded:!0,onClick:D,"aria-label":T("Refresh","Refresh"),children:(0,a.jsx)(l.V$,{...J})})}),(0,a.jsx)(i.ZI,{children:(0,a.jsx)("p",{children:T("Refresh","Refresh")})})]}):null,(0,a.jsx)(H,{artifact:S,readOnly:A}),(0,a.jsxs)(i.m_,{delayDuration:300,children:[(0,a.jsx)(i.k$,{asChild:!0,children:(0,a.jsx)(r.$n,{variant:"ghost",size:"iconMd",rounded:!0,onClick:ea,"aria-label":T("Copy Contents","Copy Contents"),children:$?(0,a.jsx)(p.A,{...J}):(0,a.jsx)(g.A,{...J,size:16})})}),(0,a.jsx)(i.ZI,{children:(0,a.jsx)("p",{children:T("Copy Contents","Copy Contents")})})]}),(0,a.jsxs)(i.m_,{delayDuration:300,children:[(0,a.jsx)(i.k$,{asChild:!0,children:(0,a.jsx)(r.$n,{variant:"ghost",size:"iconMd",rounded:!0,onClick:el,"aria-label":T("Download to file","Download to file"),children:(0,a.jsx)(l.s3,{...J,size:20})})}),(0,a.jsx)(i.ZI,{children:(0,a.jsx)("p",{children:T("Download to file","Download to file")})})]}),(0,a.jsx)(F,{artifact:S,iconProps:J}),!M&&L.SHOW_ARTIFACTS_SHARE_BUTTON?(0,a.jsxs)(i.m_,{delayDuration:300,children:[(0,a.jsx)(i.k$,{asChild:!0,children:(0,a.jsx)(r.$n,{variant:"ghost",size:"iconMd",rounded:!0,onClick:q,"aria-label":T("Publish artifact","Publish artifact"),children:(0,a.jsx)(v.A,{...J})})}),(0,a.jsx)(i.ZI,{children:(0,a.jsx)("p",{children:V?T("Copied public link!","Copied public link!"):T("Publish artifact","Publish artifact")})})]}):null]})]}):null}let J={size:18,strokeWidth:2}},30040:(e,t,s)=>{"use strict";s.d(t,{Toaster:()=>o});var a=s(79342),n=s(61312),l=s(40938),r=s(16506),i=s(14908);let o=e=>{let{...t}=e,{theme:s}=(0,r.D)();return(0,a.jsx)(i.l$,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:(0,n.cn)("group toast bg-popover rounded-2xl border-0 shadow-sm","w-fit min-w-[200px] left-0 right-0 sm:mx-auto","ring-1 ring-inset ring-input-border","p-3.5 h-fit gap-3"),title:"text-primary font-bold",icon:"ms-0 me-0",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},icons:{error:(0,a.jsx)(l.A,{size:18})},...t})}},39923:()=>{},73008:(e,t,s)=>{"use strict";s.d(t,{WebVitals:()=>i});var a=s(17703),n=s(5268);let l=new Set,r=new Set(["TTFB","FCP","FID","LCP"]);function i(){return(0,n.useReportWebVitals)(o),null}function o(e){if(!(!r.has(e.name)||l.has(e.id))){if(l.add(e.id),"TTFB"===e.name)return void function(e){var t;let s=null==(t=e.entries)?void 0:t[0];s instanceof PerformanceNavigationTiming&&(0,a.N8)("webVitals",{type:"wv_ttfb",valueMs:e.value,dnsLookup:s.domainLookupEnd-s.domainLookupEnd,tcpHandshake:s.connectEnd-s.connectStart,tlsHandshake:s.connectEnd-s.secureConnectionStart,domParsing:s.domComplete-s.domInteractive})}(e);(0,a.N8)("webVitals",{type:"wv_"+e.name.toLowerCase(),valueMs:e.value})}}},85288:(e,t,s)=>{"use strict";s.d(t,{DirectionProvider:()=>c});var a=s(79342),n=s(20337),l=s(61683),r=s(5083),i=s(88382),o=s(26067);function c(e){let{children:t}=e,[s,c]=(0,i.useState)(()=>(0,o.il)(l.Ay.language)),{client:u}=(0,n.useStatsigClient)();return(0,i.useEffect)(()=>{d((0,o.il)(l.Ay.language));let e=e=>{l.Ay.isInitializing||u.logEvent("locale_changed",e,{languages:l.Ay.languages.join(", "),location:"src/lib/locales/direction-provider"});let t=(0,o.il)(e);d(t),c(t)};return l.Ay.on("languageChanged",e),()=>l.Ay.off("languageChanged",e)},[u]),(0,a.jsx)(r.Kq,{dir:s,children:t})}function d(e){"rtl"===e?document.body.dir=e:document.body.dir=""}},98420:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,39923,23)),Promise.resolve().then(s.bind(s,17924)),Promise.resolve().then(s.bind(s,39489)),Promise.resolve().then(s.bind(s,65047)),Promise.resolve().then(s.bind(s,80095)),Promise.resolve().then(s.bind(s,10986)),Promise.resolve().then(s.bind(s,97225)),Promise.resolve().then(s.bind(s,30040)),Promise.resolve().then(s.bind(s,73008)),Promise.resolve().then(s.bind(s,85288)),Promise.resolve().then(s.bind(s,28372)),Promise.resolve().then(s.bind(s,27147)),Promise.resolve().then(s.bind(s,62874)),Promise.resolve().then(s.bind(s,9717)),Promise.resolve().then(s.bind(s,13396)),Promise.resolve().then(s.bind(s,72582)),Promise.resolve().then(s.bind(s,24220)),Promise.resolve().then(s.bind(s,37022)),Promise.resolve().then(s.bind(s,20575)),Promise.resolve().then(s.bind(s,68837)),Promise.resolve().then(s.bind(s,42259)),Promise.resolve().then(s.bind(s,98621)),Promise.resolve().then(s.bind(s,25417)),Promise.resolve().then(s.bind(s,92502)),Promise.resolve().then(s.bind(s,11205)),Promise.resolve().then(s.bind(s,41109)),Promise.resolve().then(s.bind(s,83437)),Promise.resolve().then(s.bind(s,46709)),Promise.resolve().then(s.bind(s,56331)),Promise.resolve().then(s.bind(s,16506)),Promise.resolve().then(s.t.bind(s,98650,23)),Promise.resolve().then(s.t.bind(s,55442,23)),Promise.resolve().then(s.t.bind(s,62101,23)),Promise.resolve().then(s.t.bind(s,45905,23)),Promise.resolve().then(s.t.bind(s,73577,23)),Promise.resolve().then(s.t.bind(s,398,23)),Promise.resolve().then(s.bind(s,63041)),Promise.resolve().then(s.bind(s,67614)),Promise.resolve().then(s.bind(s,29071)),Promise.resolve().then(s.bind(s,78433)),Promise.resolve().then(s.bind(s,35030))}},e=>{var t=t=>e(e.s=t);e.O(0,[57046,20936,6373,51829,64713,28422,94150,4684,55701,37866,26294,77186,58895,18096,24657,19004,72781,52160,67303,66432,65146,53592,5743,87786,33846,23551,41272,93038,43303,60556,24823,49972,10953,52401,5861,13504,98096,14987,47610,20204,77358],()=>t(98420)),_N_E=e.O()}]);